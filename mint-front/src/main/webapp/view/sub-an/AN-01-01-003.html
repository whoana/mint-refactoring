<!--
	Screen ID : AN-01-10-003
	Screen NM : 인터페이스 상세(APP모델, 레이아웃관리 추가 - 단일모델)[신한생명]
-->

<!--location -->
<div id="detail-header-div" class="row wrapper border-bottom white-bg page-heading">
	<div class="col-lg-5">
 		<h2><lb class="lb-353"></lb></h2>
		<ol class="breadcrumb">
	        <li><lb class="lb-9"></lb></li>
	        <li class="active"><strong><lb class="lb-353"></lb></strong></li>
		</ol>
	</div>
	<!--button-->
	<div class="col-lg-7">
		<div class="title-action" >
		</div>
	</div>
	<!--button end-->
</div>
<!--location end-->

<!--wrapper wrapper-content-->
<div class="wrapper wrapper-content animated fadeInRight" >

	<div class="row">
		<div class="col-lg-12">
			<div class="ibox float-e-margins">
				<div class="ibox-title">
					<h5><lb class="lb-109"></lb></h5>
                    <div class="ibox-tools" id="requirement-help">
                    	<a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
					</div>
					<div style="float: right; padding: 0px 20px 0px 0px;">

						<button class="btn btn-w-m btn-primary btn-approval" style="display:none;"><i class="fa fa-pencil-square-o"></i> <lb class="lb-389">승인</lb></button>
						<button class="btn btn-w-m btn-danger btn-return" style="display:none;"><i class="fa fa-reply"></i> <lb class="lb-390">반려</lb> </button>
					    <button class="btn btn-w-m btn-default btn-outline btn-deploy"><i class="fa fa-share-alt"></i> <lb class="lb-840">배포</lb></button>

			            <button class="btn btn-w-m btn-default btn-outline btn-modify"><i class="fa fa-pencil"></i> <lb class="lb-342">수정</lb> </button>
			            <button class="btn btn-w-m btn-default btn-outline btn-delete"   style="display:none;"><i class="fa fa-trash-o"></i> <lb class="lb-343">삭제</lb> </button>
			            <button class="btn btn-w-m btn-default btn-outline btn-history"  style="display:none;"><i class="fa fa-history"></i> <lb class="lb-656">변경 이력</lb> </button>
			            <button class="btn btn-w-m btn-success btn-restore"              style="display:none;"><i class="fa fa-undo"></i> <lb class="lb-84">복원</lb> </button>
			            <button class="btn btn-w-m btn-default btn-outline btn-status"><i class="fa fa-gavel"></i> <lb class="lb-140">상태변경</lb> </button>
			            <button class="btn btn-w-m btn-default btn-outline btn-back"                          ><i class="fa fa-reply"></i> <lb class="lb-311">이전화면</lb> </button>
			        </div>
				</div>

              	<div class="ibox-content">

                   	<div class="row">

                       	<div class="col-sm-4" style="display:none;">
                       		<div class="form-horizontal">
                       			<div class="form-group">
									<label class="label-tag-4"><lb class="lb-820">기관</lb></label>
									<input id="tf-orgNm" name="orgNm" type="text" class="input-tag-4 input-tag-view k-textbox" placeholder="" disabled="disabled">
									<input id="hd-orgId" name="orgId" type="hidden">
									<input id="hd-orgCd" name="orgCd" type="hidden">
								</div>
							</div>
						</div>
						<div class="col-sm-4">
							<div class="form-horizontal">
								<div class="form-group">
									<label class="label-tag-4"><lb class="lb-81"></lb></label>
									<input id="tf-businessDisplayNm" name="businessDisplayNm" type="text" class="input-tag-4 input-tag-view k-textbox" placeholder="" disabled="disabled">
									<input id="hd-businessId" name="businessId" type="hidden">
									<input id="hd-businessCd" name="businessCd" type="hidden">
									<input id="hd-businessNm" name="businessNm" type="hidden">
								</div>
							</div>
						</div>
						<div class="col-sm-4">
							<div class="form-horizontal">
								<div class="form-group">
									<label class="label-tag-4"><lb class="lb-9999">권한그룹</lb></label>
									<input id="tf-authGroup" name="authGroup" type="text" class="input-tag-4 k-textbox input-tag-view mint-readonly" placeholder="" readonly="readonly" disabled="disabled">
								</div>
							</div>
						</div>
						<div class="col-sm-4" style="display:none;">
							<div class="form-horizontal">
								<div class="form-group">
									<label class="label-tag-4"><lb class="lb-83"></lb></label>
									<input id="tf-requirementNm" name="requirementNm" type="text" class="input-tag-4 input-tag-view k-textbox" placeholder="" disabled="disabled">
									<input id="hd-requirementId" name="requirementId" type="hidden">
								</div>
							</div>
						</div>

						<hr class="hr-space">

						<div class="col-sm-4">
							<div class="form-horizontal">
                               	<div class="form-group">
                               		<label class="label-tag-4"><lb class="lb-153"></lb></label>
                               		<input id="tf-interfaceNm" name="interfaceNm" type="text" class="input-tag-4 input-tag-view k-textbox" placeholder="" disabled="disabled">
                               		<input id="hd-interfaceId" name="interfaceId"type="hidden">
                              	</div>
							</div>
						</div>
						<div class="col-sm-4">
							<div class="form-horizontal">
	                            <div class="form-group">
	                            	<label class="label-tag-4"><lb class="lb-154"></lb></label>
                                	<input id="tf-integrationId" name="integrationId" type="text" class="input-tag-4 input-tag-view k-textbox"  placeholder="" disabled="disabled">
                              	</div>
							</div>
						</div>
						<div class="col-sm-4">
							<div class="form-horizontal">
								<div class="form-group">
									<label class="label-tag-4"><lb class="lb-106"></lb></label>
									<input id="tf-statusNm" name="statusNm" type="text" class="input-tag-4 input-tag-view k-textbox" placeholder="" disabled="disabled">
									<input id="hd-statusCd" name="statusCd" type="hidden">
								</div>
							</div>
						</div>


						<hr class="hr-space">
						<div class="col-sm-12">
							<div class="b-col"></div>
						</div>
						<hr class="hr-space">

						<div class="col-sm-4" style="display:none;">
							<div class="form-horizontal">
                               	<div class="form-group">
                               		<label class="label-tag-4"><lb class="lb-535">등록자</lb></label>
                               		<input id="tf-regUserNm"    name="regUserNm"    type="text" class="input-tag-4 input-tag-view k-textbox" style="text-align:center;" placeholder="" disabled="disabled">
                               		<input id="hd-regUserId"    name="regUserId"    type="hidden">
                               		<input id="hd-regCellPhone" name="regCellPhone" type="hidden">
                               		<input id="hd-regPhone"     name="regPhone"     type="hidden">
                               		<input id="hd-regEmail"     name="regEmail"     type="hidden">
                              	</div>
							</div>
						</div>
						<div class="col-sm-4">
							<div class="form-horizontal">
	                            <div class="form-group">
	                            	<label class="label-tag-4"><lb class="lb-71">등록일</lb></label>
                                	<input id="tf-regDate" name="regDate" type="dates" class="input-tag-4 input-tag-view k-textbox" style="text-align:center;" placeholder="" disabled="disabled">
                              	</div>
							</div>
						</div>
						<div class="col-sm-4">
							<div class="form-horizontal">
								<div class="form-group">
									<label class="label-tag-4"><lb class="lb-582">수정일</lb></label>
									<input id="tf-modDate" name="modDate" type="dates" class="input-tag-4 input-tag-view k-textbox" style="text-align:center;" placeholder="" disabled="disabled" >
								</div>
							</div>
						</div>
					</div><!-- end row -->
           		</div>
           	</div>
       	</div>
   	</div>

	<div class="row">
		<div class="col-lg-12">
			<div class="tabs-container">
				<div class="tabs-lefts">
					<ul id="tab-interface-info" class="nav nav-tabs">
						<li class="active"><a data-toggle="tab" href="#intf-tab01"><lb class="lb-152">기본정보</lb></a></li>
						<li class=""><a data-toggle="tab" href="#intf-tab02"><lb class="lb-180">연계시스템</lb></a></li>
						<li class=""><a data-toggle="tab" href="#intf-tab03"><lb class="lb-209">담당자</lb></a></li>
						<li class=""><a data-toggle="tab" href="#intf-tab04"><lb class="lb-218">부가정보</lb></a></li>
					</ul>
					<div class="tab-content">
						<!-- 기본정보 -->
						<div id="intf-tab01" class="tab-pane active">
							<div class="panel-body">
			                   	<div class="row">
			                       	<div class="col-sm-4">
			                       		<div class="form-horizontal">
			                       			<div class="form-group">
												<label class="label-tag-4"><lb class="lb-80">연계채널</lb></label>
												<input id="cb-channelNm" name="channelNm" type="combobox" class="input-tag-4 input-tag-view" disabled="disabled">
											</div>
										</div>
									</div>
									<div class="col-sm-4">
			                       		<div class="form-horizontal">
			                       			<div class="form-group">
												<label class="label-tag-4"><lb class="lb-1002">표준구분</lb></label>
												<input id="rd-modelStd" disabled="disabled">
											</div>
										</div>
									</div>
									<div class="col-sm-4">
			                       		<div class="form-horizontal">
			                       			<div class="form-group">
												<label class="label-tag-4"><lb class="lb-9999">형상배포옵션</lb></label>
												<input id="rd-deployOption" disabled="disabled">
											</div>
										</div>
									</div>

			                   		<hr class="hr-space">
									<div class="col-sm-12">
										<div class="b-col"></div>
									</div>
			                   		<hr class="hr-space">

			                       	<div class="col-sm-4">
										<div class="form-horizontal">
				                            <div class="form-group">
				                        		<label class="label-tag-4"><lb class="lb-155">Data처리방향</lb></label>
				                             	<input id="cb-dataPrDirNm" name="dataPrDirNm" type="combobox" class="input-tag-4 input-tag-view" disabled="disabled">
			                            	</div>
			                        	</div>
									</div>
									<div class="col-sm-4">
										<div class="form-horizontal">
				                            <div class="form-group">
				                            	<label class="label-tag-4"><lb class="lb-158">Data처리방식</lb></label>
				                              	<input id="cb-dataPrMethodNm" name="dataPrMethodNm" type="combobox" class="input-tag-4 input-tag-view" disabled="disabled">
			                              	</div>
				                   		</div>
									</div>
									<div class="col-sm-4">
										<div class="form-horizontal">
			                               	<div class="form-group">
				                           		<label class="label-tag-4"><lb class="lb-162">App처리방식</lb></label>
												<input id="cb-appPrMethodNm" name="appPrMethodNm" type="combobox" class="input-tag-4 input-tag-view" disabled="disabled">
			                             	</div>
			                          	</div>
									</div>

									<hr class="hr-space">

									<div class="col-sm-4">
										<div class="form-horizontal">
				                            <div class="form-group">
				                            	<label class="label-tag-4"><lb class="lb-165">데이터순차보장</lb></label>
				                                <input id="cb-dataOrderYn" name="dataOrderYn" type="combobox" class="input-tag-4 input-tag-view" disabled="disabled">
			                              	</div>
										</div>
									</div>
									<div class="col-sm-4">
										<div class="form-horizontal">
			                               	<div class="form-group">
				                               	<label class="label-tag-4"><lb class="lb-166">발생주기</lb></label>
				                                <input id="cb-dataFrequencyNm" name="dataFrequencyNm" type="text" class="input-tag-4 input-tag-view" disabled="disabled">
			                              	</div>
										</div>
									</div>
									<div class="col-sm-4">
										<div class="form-horizontal">
			                               	<div class="form-group">
			                               		<label class="label-tag-4"><lb class="lb-174">발생주기상세</lb></label>
		                                   		<input id="tf-dataFrequencyInput" name="dataFrequencyInput" type="text" class="input-tag-4 input-tag-view k-textbox" placeholder="" disabled="disabled">
			                              	</div>
										</div>
									</div>

									<hr class="hr-space">

									<div class="col-sm-4">
										<div class="form-horizontal">
				                            <div class="form-group">
				                            	<label class="label-tag-4"><lb class="lb-175">건당사이즈</lb></label>
		                                   		<input id="nf-sizePerTran" name="sizePerTran" type="number" class="input-tag-4 input-tag-view" min="0" step="1" max="999999999" placeholder="0" disabled="disabled">
			                            	</div>
										</div>
									</div>
									<div class="col-sm-4">
										<div class="form-horizontal">
			                               	<div class="form-group">
			                               		<label class="label-tag-4"><lb class="lb-176">주기별건수</lb></label>
		                                   		<input id="nf-cntPerFrequency" name="cntPerFrequency" type="number" class="input-tag-4 input-tag-view" min="0" step="1" max="999999999" placeholder="0" disabled="disabled">
			                              	</div>
										</div>
									</div>
									<div class="col-sm-4">
										<div class="form-horizontal">
				                            <div class="form-group">
				                            	<label class="label-tag-4"><lb class="lb-177">일일발생횟수</lb></label>
			                                	<input id="nf-cntPerDay" name="cntPerDay" type="number" class="input-tag-4 input-tag-view" min="0" step="1" max="999999999" placeholder="0" disabled="disabled">
			                              	</div>
										</div>
									</div>

		                            <hr class="hr-space">

									<div class="col-sm-4" >
				                       	<form class="form-horizontal" >
				                            <div class="form-group" >
				                            	<label class="label-tag-4"><lb class="lb-178">일일총전송량</lb></label>
			                                	<input id="nf-qttPerDay" type="number" class="input-tag-4 input-tag-view" disabled="disabled">
				                           	</div>
				                       	</form>
			                   		</div>
								</div><!-- end row -->
							</div><!-- end panel-body -->
						</div>

						<!-- 연계 시스템 -->
						<div id="intf-tab02" class="tab-pane">
							<div class="panel-body">
								<div class="row">
									<div class="col-sm-12">
										<div id="gd-system"></div>
									</div>
								</div>
							</div><!-- end panel-body -->
						</div><!-- end tab-pane -->

						<div id="intf-tab03" class="tab-pane">
							<div class="panel-body">

		                 		<div class="row">
		 							<div class="col-lg-12">
		 	  							<div id="gd-user"></div>
			               			</div>
		    					</div>
							</div><!-- end panel-body -->
						</div><!-- end tab-pane -->

						<div id="intf-tab04" class="tab-pane">
							<div class="panel-body">

		                        <ul class="category-list" style="padding: 0">
		                        	<li><i class="fa fa-circle text-primary" style="color: #1c84c6;"></i> <lb class="lb-3033"></lb></li>
		                        </ul>
			                	<div class="row">
			                       	<div class="col-sm-12">
			                       		<input id="fu-uploadFile" name="uploadFile" type="file" />
									</div>
			               		</div>

								<hr class="hr-space">
								<hr class="hr-space">
								<hr class="hr-space">

		                        <ul class="category-list" style="padding: 0">
		                        	<li><i class="fa fa-circle text-primary" style="color: #1c84c6;"></i> <lb class="lb-3034"></lb></li>
		                        </ul>
		                        <div class="row">
		                        	<div class="col-sm-12">
		                        	<textarea id="ta-description" rows="5" cols="30" style="height:200px"></textarea>
		                        	</div>
		                        </div>

								<hr class="hr-space">
								<hr class="hr-space">

							</div><!-- end panel-body -->
						</div><!-- end tab-pane -->
						<input id="hd-modelMid" name="hd-modelMid" type="hidden">
					</div><!--  end tab-content -->
				</div><!-- end tab-position -->
			</div><!-- end tabs-container -->
       	</div><!--  end col-sm-12 -->
	</div><!-- end row -->
	<div id="pkgInfo">
		<div class="ibox-content">
			<div class="row">
	            <div class="panel-body">
					<div id="gd-package"></div>
				</div>
			</div>
		</div>
    	<div style="float: right; padding: 0px 20px 10px 0px;">
    		<button id="btn-checkin" class="btn btn-primary btn-w-m btn-primary btn-outline"><i class="fa fa-check"></i><lb class="lb-9999">체크인</lb></button>
		</div>
	</div>
</div><!-- end wrapper -->

<script type="text/x-kendo-template" id="template-layout">
	<div>
		<span id="btn-layout" style="float: right; padding:5px 10px 5px 0px; cursor: pointer;" onclick="return $.main_detail.fn_btnLayoutClickEvent()">
			<i class='fa fa-square-o'></i> <lb class="lb-9999">레이아웃</lb></span>
		</span>
	</div>
</script>

<script type="text/x-kendo-template" id="template-ifModel-detail">
	<div class="ibox-content" style="border-top:0;">
		<div class="row">
			<div class="col-sm-4" style="display:none;">
				<label class="label-tag-4 k-block"><lb class="lb-9999">서버</lb></label>
				<input type="text" class="input-tag-4 input-tag-disabled k-textbox" value="#=data.appModelInfo.serverName#" readonly="readonly" disabled="disabled" />
			</div>
			<div class="col-sm-4">
				<label class="label-tag-4 k-block"><lb class="lb-9999">APP 유형</lb></label>
				<input type="text" class="input-tag-4 input-tag-disabled k-textbox" value="#=data.appModelInfo.name#" readonly="readonly" disabled="disabled" />
			</div>
		</div>
	</div>
	<div class="ibox-content attributeArea">
		<div class="row">
	# if( !mint.common.isEmpty($.main_detail.attributes[data.appModelInfo.type] ) ) { #
		# for(var i=0; i<$.main_detail.attributes[data.appModelInfo.type].length; i++) { #
			# if( !mint.common.isEmpty(data.appModelInfo.attributes[$.main_detail.attributes[data.appModelInfo.type][i].cd] ) ) { #
				# for(var j=0; j<data.appModelInfo.attributes[$.main_detail.attributes[data.appModelInfo.type][i].cd].length; j++) { #
					# if( $.main_detail.attributes[data.appModelInfo.type][i].inputType == "6") { #
			<div class="col-sm-12 form-group-original">
				<label class="label-tag-4 k-block" style="width:11.193%;"> #= data.appModelInfo.attributes[$.main_detail.attributes[data.appModelInfo.type][i].cd][j].name # </label>
				<textarea class="input-tag-4 input-tag-disabled k-textbox" style="width:88.30%;height:200px;border-width:thin;" readonly="readonly" disabled="disabled">#= decodeURIComponent(atob(data.appModelInfo.attributes[$.main_detail.attributes[data.appModelInfo.type][i].cd][j].val)) #</textarea>
			</div>
					# } else { #
			<div class="col-sm-4 form-group-original">
				<label class="label-tag-4 k-block"> #= data.appModelInfo.attributes[$.main_detail.attributes[data.appModelInfo.type][i].cd][j].name # </label>
				<input type="text" class="input-tag-4 input-tag-disabled k-textbox" title="#= data.appModelInfo.attributes[$.main_detail.attributes[data.appModelInfo.type][i].cd][j].val #" value="#= data.appModelInfo.attributes[$.main_detail.attributes[data.appModelInfo.type][i].cd][j].val #" readonly="readonly" disabled="disabled" />
			</div>
					# } #
				# } #
			# } #
		# } #
	# } #
		</div>
	</div>
</script>


<script>
	$(document).ready(function(){
		//=======================================================================
		//(1) function 및 variable scope 설정 :: (메인은 main, 팝업 및 서브는 sub)
		//=======================================================================
		screenName = "AN-01-01-003";
		$.extend({
			main_detail : {
				//=======================================================================
				// (2) Screen 에서 사용할 variable 정의
				//=======================================================================
				requirementModelObject : new Object(),
				attributes : null,
				isDeployTest : false,
				//=======================================================================
				// (3) Screen 에서 사용할 function 정의
				//=======================================================================

				//-----------------------------------------------------------------------
				// Description :: 화면 초기화
				//-----------------------------------------------------------------------
				fn_init : function() {
					try {
						mint.init('$.main_detail.fn_initCallback');
					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_init"});
					}
				},//end fn_init()

				//-----------------------------------------------------------------------
				// Description :: 화면 초기화 콜백
				//-----------------------------------------------------------------------
				fn_initCallback : function() {
					try {

						var env = mint.common.getEnvorinment();
	            		var flag = env['system.model.deploy.front.test'];
	            		if( !mint.common.isEmpty(flag) && flag[0] === 'true' ) {
	            			$.main_detail.isDeployTest = true;
	            		} else {
	            			$.main_detail.isDeployTest = false;
	            		}

						$.main_detail.fn_initComponent(null);
						$.main_detail.fn_getAttributesInit();
				      	//-----------------------------------------------------------------------
				      	// 2016.11.17 수정
				      	// 임시저장 정보를 조회 하기 위해 파라메터 추가
				      	//-----------------------------------------------------------------------
				      	{
				      		var requirementId = mint.common.getScreenParam("requirementId");
				      		var restId = 'REST-R02-AN-01-01';

				      		// 임시저장 정보를 조회하기 위한 파라메터를 얻어온다
				      		var linkType = mint.common.getScreenParam("linkType");
				      		if( !mint.common.isEmpty(linkType) && linkType == "after" ) {
				      			restId = 'REST-R99-AN-01-00';
				      			mint.common.removeScreenParam("linkType");
				      		}

				      		if( ! mint.common.isEmpty( requirementId ) ) {
								mint.callService(null, screenName, restId, '$.main_detail.fn_setInterfaceInfo',
									{
								    	  errorCall : true
								    	, params : {requirementId : requirementId}
								    }
								);
				      		}
				      	}

				      	mint.common.removeScreenParam('isModify');
					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_initCallback"});
					}
				},//end fn_initCallback()

				//-----------------------------------------------------------------------
				// Description :: component 초기화
				//-----------------------------------------------------------------------
				fn_initComponent : function(options) {
					try {

						// 표준구분
						$("#rd-modelStd").kendoSwitch({
							messages: {
				                checked: "Yes",
				                unchecked: "No"
				            }
						});

						// 배포옵션
						$("#rd-deployOption").kendoSwitch({
							width: 100,
							checked : true,
							messages: {
				                checked: "형상배포",
				                unchecked: "버전관리"
				            }
						});

						//공통코드에 넣든가 하자.
						var YesNoValue = [{ nm: 'Yes', value: 'Y' }, { nm: 'No', value: 'N' }];

						mint.ui.setDropDownList('cb-channelNm'      , mint.common.commonCodeMap.get("channelList"), 0, 'channelNm', 'channelNm');
						mint.ui.setDropDownList('cb-dataPrDirNm'    , mint.common.commonCodeMap.get("cds").IM01   , 0, 'nm'       , 'nm'       );
						mint.ui.setDropDownList('cb-dataPrMethodNm' , mint.common.commonCodeMap.get("cds").IM12   , 0, 'nm'       , 'nm'       );
						mint.ui.setDropDownList('cb-appPrMethodNm'  , mint.common.commonCodeMap.get("cds").IM02   , 0, 'nm'       , 'nm'       );
						mint.ui.setDropDownList('cb-dataOrderYn'    , YesNoValue                                  , 0, 'nm'       , 'nm'       );
						mint.ui.setDropDownList('cb-dataFrequencyNm', mint.common.commonCodeMap.get("cds").IM03   , 0, 'nm'       , 'nm'       );

						mint.ui.setNumericWithoutMax('nf-sizePerTran'    , 0, 1, '#,### byte');
						mint.ui.setNumericWithoutMax('nf-cntPerFrequency', 0, 1, 'n0'        );
						mint.ui.setNumericWithoutMax('nf-cntPerDay'      , 0, 1, 'n0'        );
						mint.ui.setNumericWithoutMax('nf-qttPerDay'      , 0, 1, '#,### byte');

						//요건 등록자 정보
						$('#tf-regUserNm').val( mint.session.getUserNm() );
						$('#hd-regUserId').val( mint.session.getUserId() );
						$('#hd-regUserCellPhone').val( mint.session.getCellPhone() );
						$('#hd-regUserPhone').val( mint.session.getPhone() );
						$('#hd-regEmail').val( mint.session.getEmail() );
				        $('#tf-regDate').val( mint.common.getTodayDate() + "(" + mint.session.getUserNm() + ")");

				        $("#pkgInfo").kendoWindow({
							actions: ["Minimize", "Close"],
							width: "1000px",
							pinned: true,
							resizable: false,
							modal: true,
							title: "배포대상",
							visible: false
						});

						//-----------------------------------------------------------------------
						// 연계시스템 그리드
						//-----------------------------------------------------------------------
						$("#gd-system").kendoGrid({
				          	dataSource : $.main_detail.fn_getSystemGridDataSource([])
							, filterable: false
							, scrollable: false
							, resizable: true
				            , sortable: true
				            , noRecords: true
				            , selectable: false
				            , editable: false
				            , toolbar : kendo.template( $("#template-layout").html() )
							, columns: [
								{
									field : "nodeTypeNm",
									title : mint.label.getLabel('lb-469'),
									headerAttributes : { style : "text-align: center" },
									attributes : { style : "text-align: center; white-space: nowrap;" },
									editor : mint.ui.gridEditorNodeTypeComboBox,
								}, {
									field : "orgDisplayNm",
									title : mint.label.getLabel('lb-820'),
									headerAttributes : { style : "text-align: center" },
									attributes : { style : "text-align: center; white-space: nowrap;" },
								}, {
									field : "systemDisplayNm",
									title : mint.label.getLabel('lb-82'),
									headerAttributes : { style : "text-align: center" },
									attributes : { style : "text-align: center; white-space: nowrap;" },
								}, {
									field : "resourceNm",
									title : mint.label.getLabel('lb-86'),
									headerAttributes : { style : "text-align: center" },
									attributes : { style : "text-align: center; white-space: nowrap;" },
									editor : mint.ui.gridEditorResourceTypeComboBox,
								}, {
                                    field : "systemId",
                                    hidden : true
                                }, {
                                    field : "systemCd",
                                    hidden : true
                                }, {
                                    field : "systemNm",
                                    hidden : true
                                }, {
									field : "orgId",
									hidden : true
								}, {
									field : "orgCd",
									hidden : true
								}, {
									field : "orgNm",
									hidden : true
								}, {
									field : "nodeType",
									hidden : true
								}
							]
							, detailTemplate : '<div class="gridDetail"></div>'
						    , detailExpand: function(e) {
						    	$.main_detail.fn_detailExpand(e);
						    }
							, dataBound: function (e) {
						    	if(0 == $("#gd-system").data().kendoGrid.dataSource.view().length) {
						    		$("#gd-system").children(".k-grid-content").height('150');
						    	} else {
						    		$("#gd-system").children(".k-grid-content").height('auto');
						    	}
						    }
				        });

						//-----------------------------------------------------------------------
						// 담당자 그리드
						//-----------------------------------------------------------------------
						$("#gd-user").kendoGrid({
				          	dataSource : $.main_detail.fn_getUserGridDataSource([])
							, filterable: false
							, scrollable: false
							, resizable: true
							, noRecords: true
				            , sortable: true
				            , selectable: false
				            , editable: false
							, columns: [
								{
									field : "roleTypeNm",
									title : mint.label.getLabel('lb-210'),
									headerAttributes : { style : "text-align: center" },
									attributes : { style : "text-align: center; white-space: nowrap;" },
									editor : mint.ui.gridEditorRoleTypeComboBox,
								}, {
									field : "user.userNm",
									title : mint.label.getLabel('lb-211'),
									headerAttributes : { style : "text-align: center" },
									attributes : { style : "text-align: center; white-space: nowrap;" }
								}, {
									field : "user.cellPhone",
									title :  mint.label.getLabel('lb-212'),
									headerAttributes : { style : "text-align: center" },
									attributes : { style : "text-align: center; white-space: nowrap;" }
								}, {
									field : "user.phone",
									title : mint.label.getLabel('lb-213'),
									headerAttributes : { style : "text-align: center" },
									attributes : { style : "text-align: center; white-space: nowrap;" }
								}, {
									field : "user.email",
									title : mint.label.getLabel('lb-214'),
									headerAttributes : { style : "text-align: center" },
									attributes : { style : "text-align: center; white-space: nowrap;" }
								}, {
                                    field : "userId",
                                    hidden : true
                                }
							]
							, dataBound: function (e) {
						    	if(0 == $("#gd-user").data().kendoGrid.dataSource.view().length) {
						    		$("#gd-user").children(".k-grid-content").height('150');
						    	} else {
						    		$("#gd-user").children(".k-grid-content").height('auto');
						    	}
						    }
				        });

						//-----------------------------------------------------------------------
						// Package 그리드
						//-----------------------------------------------------------------------
						$("#gd-package").kendoGrid({
				          	dataSource : []
							, filterable: false
							, scrollable: false
							, resizable: true
							, noRecords: true
				            , sortable: true
				            , selectable: true
				            , editable: false
							, columns: [
								{
									field : "pkgId",
									title : "패키지번호",
									headerAttributes : { style : "text-align: center" },
									attributes : { style : "text-align: center; white-space: nowrap;" },
								}, {
									field : "pkgNm",
									title : "패키지명",
									headerAttributes : { style : "text-align: center" },
									attributes : { style : "text-align: center; white-space: nowrap;" }
								}
							]
							, dataBound: function (e) {
					    		$("#gd-package").children(".k-grid-content").height('auto');
						    }
				        });

						//-----------------------------------------------------------------------
						// Description
						//-----------------------------------------------------------------------
						$("#ta-description").kendoEditor({

				        });

					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_initComponent"});
					}
				},//end fn_initComponent()

				//-----------------------------------------------------------------------
				// Description :: APP모델속성정
				//-----------------------------------------------------------------------
				fn_getAttributesInit : function() {
					try {
						mint.callService(
							null
					 		, screenName
							, 'REST-R02-RT-01-00'
							, function(jsonData) {
								if( !mint.common.isEmpty(jsonData) ) {
									$.main_detail.attributes = jsonData;
								}
							}
							, {errorCall : true}
						);
					} catch ( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_getAttributesInit"});
					}
				},//end fn_getAttributesInit()

				//-----------------------------------------------------------------------
				// Description :: 시스템 상세(APP모델속성정보)
				//-----------------------------------------------------------------------
				fn_detailExpand : function(e) {
					try {
 						var detailRow = e.detailRow;
 						var targetData = $("#gd-system").data("kendoGrid").dataItem(e.masterRow);
						var template = kendo.template($('#template-ifModel-detail').html());
						detailRow.find(".gridDetail").html(template(targetData));

						$(".attributeArea").kendoTooltip({
							filter: "input",
							position: "top"
						});

					} catch ( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_detailExpand"});
					}
				}, // end fn_detailExpand

				//-----------------------------------------------------------------------
				// Description :: 레이아웃 버튼 클릭 이벤트
				//-----------------------------------------------------------------------
				fn_btnLayoutClickEvent : function(jsonObject) {
					try {
						var gridData = $("#gd-system").data("kendoGrid").dataSource.view();
						var modelObject = new Object();

						modelObject.mid = $("#hd-modelMid").val();
						modelObject.appModels = gridData;

						mint.common.setScreenParam('modelObject', modelObject);
						mint.common.setScreenParam('callback', '$.main_detail.fn_btnLayoutClickEventCallBack');
						mint.common.setScreenParam("isModify", false);
						mint.attachContents('layoutDiv', '../sub-an/AN-06-03-003.html');

					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_btnLayoutClickEvent"});
					}
				},//end fn_btnLayoutClickEvent()

				//-----------------------------------------------------------------------
				// Description :: 레이아웃 버튼 클릭 이벤트 CallBack
				//-----------------------------------------------------------------------
				fn_btnLayoutClickEventCallBack : function(responseData, isModify) {
					try {
					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_btnLayoutClickEventCallBack"});
					}
				},//end fn_btnLayoutClickEventCallBack()


				//-----------------------------------------------------------------------
				// Description :: System Grid DataSource
				//-----------------------------------------------------------------------
				fn_getSystemGridDataSource : function(jsonData) {
					try {

						var	dataSource = new kendo.data.DataSource({
								  data: jsonData
							    , page:1
							    , schema: {
							    	model: $.main_detail.fn_getSystemGridModel()
							    }
								, sort: { field: "nodeTypeNm", dir: "asc" }
							});

						return dataSource;
					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main.fn_getSystemGridDataSource"});
					}
				},//end fn_getSystemGridDataSource()

				//-----------------------------------------------------------------------
				// Description :: System Grid Model
				//-----------------------------------------------------------------------
				fn_getSystemGridModel : function() {
					try {

						var CountryInfoModel = new kendo.data.Model.define({
							id: "countryId",
							fields: {
            					objectType	: {editable: false, nullable: false, defaultValue: "CountryInfo"},
            					countryId	: {editable: true,  nullable: false, defaultValue: ""}
							}
						});

						var ZoneInfoModel = new kendo.data.Model.define({
							id: "zoneId",
							fields: {
	            				objectType	: {editable: false, nullable: false, defaultValue: "ZoneInfo"},
	            				zoneId		: {editable: true,  nullable: false, defaultValue: ""},
	            				countryInfo	: {editable: false, nullable: false, defaultValue: new CountryInfoModel()}
							}
						});

						var ParentSystemModel = new kendo.data.Model.define({
		            		id: "systemId",
		            		fields: {
		            			objectType	: {editable: false, nullable: false, defaultValue: "System"},
		            			systemId	: {editable: false},
		            			systemNm	: {editable: true, nullable: false},
		            			systemCd	: {editable: true, nullable: false},
		            			rootYn		: {editable: true, nullable: true,  defaultValue: "N"},
		            			grpYn		: {editable: true, nullable: true,  defaultValue: "N"},
		            			externalYn	: {editable: true, nullable: true,  defaultValue: "N"},
		            			zoneInfo	: {editable: true, nullable: false, defaultValue: new ZoneInfoModel()},
		            			areaInput	: {editable: true, nullable: true,  defaultValue: ""},
		            			comments	: {editable: true, nullable: true,  defaultValue: ""},
		            			childCnt	: {editable: false, nullable: true,  defaultValue: 0}
		            		}
						});

						var SystemModel = new kendo.data.Model.define({
		            		id: "systemId",
		            		fields: {
		            			objectType	: {editable: false, nullable: false, defaultValue: "System"},
		            			systemId	: {editable: false},
		            			systemNm	: {editable: true,  nullable: false},
		            			systemCd	: {editable: true,  nullable: false},
		            			rootYn		: {editable: true,  nullable: true,  defaultValue: "N"},
		            			grpYn		: {editable: true,  nullable: true,  defaultValue: "N"},
		            			externalYn	: {editable: true,  nullable: true,  defaultValue: "N"},
		            			zoneInfo	: {editable: true,  nullable: false, defaultValue: new ZoneInfoModel()},
		            			areaInput	: {editable: true,  nullable: true,  defaultValue: ""},
		            			comments	: {editable: true,  nullable: true,  defaultValue: ""},
		            			parentSystem: {editable: true,  nullable: false, defaultValue: new ParentSystemModel()},
		            			childCnt	: {editable: false, nullable: true,  defaultValue: 0}
		            		}
						});

						var SystemGridModel = new kendo.data.Model.define({
							fields: {
								nodeTypeNm      : {editable: true,   nullable: false,  defaultValue: ""},
								orgDisplayNm    : {editable: false,  nullable: false,  defaultValue: ""},
								systemDisplayNm : {editable: false,  nullable: false,  defaultValue: ""},
								resourceNm      : {editable: true,   nullable: false,  defaultValue: ""},
								service         : {editable: true,   nullable: false,  defaultValue: ""},
								serviceDesc     : {editable: true,   nullable: false,  defaultValue: ""},
		            			systemId	    : {editable: false,  nullable: false,  defaultValue: ""},
		            			systemCd	    : {editable: false,  nullable: false,  defaultValue: ""},
		            			systemNm	    : {editable: false,  nullable: false,  defaultValue: ""},
		            			orgId	        : {editable: false,  nullable: false,  defaultValue: ""},
		            			orgCd	        : {editable: false,  nullable: false,  defaultValue: ""},
		            			orgNm	        : {editable: false,  nullable: false,  defaultValue: ""},
		            			nodeType  	    : {editable: false,  nullable: false,  defaultValue: ""}
							}
						});

						return SystemGridModel;

					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main.fn_getSystemGridModel"});
					}
				}, //end fn_getSystemGridModel()

				//-----------------------------------------------------------------------
				// Description :: User Grid DataSource
				//-----------------------------------------------------------------------
				fn_getUserGridDataSource : function(jsonData) {
					try {

						var	dataSource = new kendo.data.DataSource({
								  data: jsonData
							    , page:1
							    , schema: {
							    	model: $.main_detail.fn_getUserGridModel()
							    }
							});

						return dataSource;
					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main.fn_getUserGridDataSource"});
					}
				},//end fn_getUserGridDataSource()

				//-----------------------------------------------------------------------
				// Description :: User Grid Model
				//-----------------------------------------------------------------------
				fn_getUserGridModel : function() {
					try {

						var UserModel = new kendo.data.Model.define({
		            		id: "userId",
		            		fields: {
		            			objectType	: {editable: false, nullable: false, defaultValue: "User"},
		            			userId	    : {editable: false, nullable: false, defaultValue: ""},
		            			userNm	    : {editable: false, nullable: false, defaultValue: ""},
		            			password	: {editable: false, nullable: false, defaultValue: ""},
		            			companyNm	: {editable: false, nullable: false, defaultValue: ""},
		            			cellPhone   : {editable: false, nullable: false, defaultValue: ""},
		            			phone	    : {editable: false, nullable: false, defaultValue: ""},
		            			email	    : {editable: false, nullable: false, defaultValue: ""},
		            		}
						});

						var UserGridModel = new kendo.data.Model.define({
		            		fields: {
		            			roleTypeNm	: {editable: true},

		            			//TODO : 중첩필드 적용은 어떻게 하는지 찾아볼것, 테스트 결과 안되네...
			            		user        : {editable: false,  nullable: false, defaultValue: new UserModel()},
		            			userId	    : {editable: false, nullable: false, defaultValue: ""},
		            			userNm	    : {editable: false, nullable: false, defaultValue: ""},
		            			password	: {editable: false, nullable: false, defaultValue: ""},
		            			companyNm	: {editable: false, nullable: false, defaultValue: ""},
		            			cellPhone   : {editable: false, nullable: false, defaultValue: ""},
		            			phone	    : {editable: false, nullable: false, defaultValue: ""},
		            			email	    : {editable: false, nullable: false, defaultValue: ""},

		            			//TODO : 삼성전기버전의 필드인데, 불필요시 향후 삭제할것.
		            			systemNmCd	: {editable: false,  nullable: false, defaultValue: ""},
		            			systemId	: {editable: false,  nullable: true,  defaultValue: ""},
		            			systemCd	: {editable: false,  nullable: true,  defaultValue: ""},
		            			systemNm	: {editable: false,  nullable: true,  defaultValue: ""},
		            		}
						});

						return UserGridModel;

					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main.fn_getUserGridModel"});
					}
				}, //end fn_getUserGridModel()

				//-----------------------------------------------------------------------
				// Description :: 인터페이스 정보 셋팅
				//-----------------------------------------------------------------------
				fn_setInterfaceInfo : function(jsonData) {
					try {
						if( !mint.common.isEmpty(jsonData) ) {
							$.main_detail.requirementModelObject = JSON.parse(JSON.stringify(jsonData));
							$.main_detail.fn_visibleBtn(jsonData.requirement.status);

							$('#hd-requirementId').val( jsonData.requirement.requirementId );
							$('#hd-requirementNm').val( jsonData.requirement.requirementNm );
							$('#tf-statusNm').val( jsonData.requirement.statusNm );
							$('#hd-statusCd').val( jsonData.requirement.status );


							var businessObject = jsonData.requirement.business;
							$('#tf-businessDisplayNm').val( businessObject.businessNm + mint.lb + businessObject.businessCd + mint.rb );
							$('#hd-businessId').val( businessObject.businessId );
							$('#hd-businessCd').val( businessObject.businessCd );
							$('#hd-businessNm').val( businessObject.businessNm );

							var regUserObject = jsonData.requirement.regUser;
							$('#tf-regUserNm').val( regUserObject.userNm );
							$('#hd-regUserId').val( regUserObject.userId );
							$('#hd-regCellPhone').val( regUserObject.cellPhone );
							$('#hd-regPhone').val( regUserObject.phone );
							$('#hd-regEmail').val( regUserObject.email );

							var modUserObject = jsonData.requirement.modUser;
							$('#tf-regDate').val( mint.common.isEmpty( jsonData.requirement.regDate) ? '' : mint.common.formatDate(jsonData.requirement.regDate) + "(" + regUserObject.userNm + ")" );
							$('#tf-modDate').val( mint.common.isEmpty( jsonData.requirement.modDate) ? '' : mint.common.formatDate(jsonData.requirement.modDate) + "(" + modUserObject.userNm + ")" );

							var interfaceObject = jsonData.requirement.interface;
							$('#tf-interfaceNm').val( interfaceObject.interfaceNm );
							$('#hd-interfaceId').val( interfaceObject.interfaceId );
							$('#tf-integrationId').val( interfaceObject.integrationId );

							var channelObject = interfaceObject.channel;
							$('#cb-channelNm').data("kendoDropDownList").value(channelObject.channelNm);

							$('#cb-dataPrDirNm').data("kendoDropDownList").value(interfaceObject.dataPrDirNm);
							$('#cb-dataPrMethodNm').data("kendoDropDownList").value(interfaceObject.dataPrMethodNm);
							$('#cb-appPrMethodNm').data("kendoDropDownList").value(interfaceObject.appPrMethodNm);

							$('#cb-dataOrderYn').data("kendoDropDownList").value(interfaceObject.dataSeqYn == 'N' ? 'No' : 'Yes');
							$('#cb-dataFrequencyNm').data("kendoDropDownList").value(interfaceObject.dataFrequencyNm);
							$('#tf-dataFrequencyInput').val(interfaceObject.dataFrequencyInput);

							$('#nf-sizePerTran').data("kendoNumericTextBox").value(interfaceObject.sizePerTran);
							$('#nf-cntPerFrequency').data("kendoNumericTextBox").value(interfaceObject.cntPerFrequency);
							$('#nf-cntPerDay').data("kendoNumericTextBox").value(interfaceObject.cntPerDay);
							$('#nf-qttPerDay').data("kendoNumericTextBox").value(interfaceObject.qttPerDay);

							//-----------------------------------------------------------------------
							// System
							//-----------------------------------------------------------------------

							if( !mint.common.isEmpty(jsonData.interfaceModel) ) {
								$('#hd-modelMid').val(jsonData.interfaceModel.mid);
								if(jsonData.interfaceModel.std === "Y") {
									$("#rd-modelStd").data("kendoSwitch").value(true);
								} else {
									$("#rd-modelStd").data("kendoSwitch").value(false);
								}
							} else {
								$('.btn-deploy').hide();
							}

							var systemObjectList = [];
							var senderSystemObject = interfaceObject.senderSystemInfoList;
							var receiverSystemObject = interfaceObject.receiverSystemInfoList;

							for( var i=0; i<senderSystemObject.length; i++ ) {
								senderSystemObject[i].systemDisplayNm = senderSystemObject[i].systemNm + mint.lb + senderSystemObject[i].systemCd + mint.rb;
								senderSystemObject[i].orgDisplayNm    = senderSystemObject[i].orgNm + mint.lb + senderSystemObject[i].orgCd + mint.rb;

								if( !mint.common.isEmpty(jsonData.interfaceModel) ) {
									for( var j=0; j<jsonData.interfaceModel.appModels.length; j++ ) {
										if(senderSystemObject[i].systemId == jsonData.interfaceModel.appModels[j].systemId
												&& senderSystemObject[i].seq == jsonData.interfaceModel.appModels[j].systemSeq) {
											senderSystemObject[i].appModelInfo = jsonData.interfaceModel.appModels[j];
										}

										if(jsonData.interfaceModel.appModels[j].mappings.length > 0 || jsonData.interfaceModel.appModels[j].msgs.length > 0) {
											$("#btn-layout > i").addClass("fa-check-square-o");
											$("#btn-layout > i").removeClass("fa-square-o");
											$("#btn-layout > i").css("color","#1c84c6");
										}
									}
								}

								systemObjectList.push(senderSystemObject[i]);
							}

							for( var i=0; i<receiverSystemObject.length; i++ ) {
								receiverSystemObject[i].systemDisplayNm = receiverSystemObject[i].systemNm + mint.lb + receiverSystemObject[i].systemCd + mint.rb;
								receiverSystemObject[i].orgDisplayNm    = receiverSystemObject[i].orgNm + mint.lb + receiverSystemObject[i].orgCd + mint.rb;
								if( !mint.common.isEmpty(jsonData.interfaceModel) ) {
									for( var j=0; j<jsonData.interfaceModel.appModels.length; j++ ) {
										if(receiverSystemObject[i].systemId == jsonData.interfaceModel.appModels[j].systemId
												&& receiverSystemObject[i].seq == jsonData.interfaceModel.appModels[j].systemSeq) {
											receiverSystemObject[i].appModelInfo = jsonData.interfaceModel.appModels[j];
										}

										if(jsonData.interfaceModel.appModels[j].mappings.length > 0 || jsonData.interfaceModel.appModels[j].msgs.length > 0) {
											$("#btn-layout > i").addClass("fa-check-square-o");
											$("#btn-layout > i").removeClass("fa-square-o");
											$("#btn-layout").css("color","#1c84c6");
										}
									}
								}

								systemObjectList.push(receiverSystemObject[i]);
							}

							$('#gd-system').data('kendoGrid').setDataSource( $.main_detail.fn_getSystemGridDataSource(systemObjectList) );

							/*
							$("#gd-system .k-master-row").each(function( index ) {
								$('#gd-system').data('kendoGrid').expandRow(this);
							});
							*/

							//-----------------------------------------------------------------------
							// 담당자
							//-----------------------------------------------------------------------
							var relUserObjectList = interfaceObject.relUsers;
							$('#gd-user').data('kendoGrid').setDataSource( $.main_detail.fn_getUserGridDataSource(relUserObjectList) );

							var developerObject = jsonData.requirement.developer;
							var testerObject    = jsonData.requirement.tester;
							var moverObject     = jsonData.requirement.mover;

							//-----------------------------------------------------------------------
							// 인터페이스 - 추가 특성, 채널별 추가 특성
							//-----------------------------------------------------------------------
							var propertiesList = interfaceObject.properties;
							if( !mint.common.isEmpty(propertiesList[0]) ) {
								if(propertiesList[0].attrValue == "2") {
									$('#rd-deployOption').data("kendoSwitch").value(true);
								} else {
									$('#rd-deployOption').data("kendoSwitch").value(false);
								}
							}

							//-----------------------------------------------------------------------
							// 첨부파일
							//-----------------------------------------------------------------------
							var uploadFiles = [];

							if(0 < jsonData.requirement.attatchFileList.length) {
								for(var i=0; i<jsonData.requirement.attatchFileList.length; i++) {
									var fileObject = new Object;

									fileObject.name = jsonData.requirement.attatchFileList[i].fileNm;
									fileObject.size = '';
									fileObject.extension = '';
									fileObject.fileId = jsonData.requirement.attatchFileList[i].fileId;
									fileObject.filePath = jsonData.requirement.attatchFileList[i].filePath;

									uploadFiles.push(fileObject);
								}
							}

					 		$("#fu-uploadFile").kendoUpload({
				 			    async: {
					 				saveUrl: "home/save",
					 				autoUpload: false
						 		},
					 			localization: {
					 				select: mint.label.getLabel('lb-220')
					 			},
					 			files: uploadFiles,
					 		});
							{
								var fileUploadElement = $('#fu-uploadFile').data('kendoUpload');
								//-----------------------------------------------------------------------
								//Kendo version up 에 따른 fileupload button disabled 변경됨
								//-----------------------------------------------------------------------
								//fileUploadElement.disable();
								//-----------------------------------------------------------------------
								$('.k-upload-button').addClass('k-state-disabled');
						 		$('.k-upload-pct').css('display','none');
						 		$('.k-file-success').each(function(index) {
						 			var fileInfo = fileUploadElement.options.files[index];
						 			$(this).attr("onClick", "mint.fileDownLoad('" + encodeURI(fileInfo.filePath) + "','" + encodeURI(fileInfo.name)+ "');");
						 			$(this).css("cursor", "pointer");
						 		});
							}

							//-----------------------------------------------------------------------
							// Description
							//-----------------------------------------------------------------------
							$("#ta-description").data("kendoEditor").value(jsonData.requirement.comments);
							$($('#ta-description').data().kendoEditor.body).prop('contenteditable', false);
							$($('#ta-description').data().kendoEditor.body).prop('disabled', true);

							// 삭제 인터페이스 확인
							if(!mint.common.isEmpty(jsonData.requirement.delYn) && jsonData.requirement.delYn=='Y'){
								$.main_detail.fn_visibleBtnDisable();

								if( mint.session.isInterfaceAdmin() || mint.lifecycle.isApprover() ) {
									$('.btn-restore').show();
								}

							}else{
								$('.btn-history').show();
			            		if( !$.main_detail.isDeployTest ) {
									if($("#rd-modelStd").data("kendoSwitch").check() || jsonData.requirement.status == "F1") { // 표준 인터페이스이거나 검토완료 상태일때
										mint.callService( null, screenName, 'REST-R01-RT-03-01', function(jsonData) {
											if( !mint.common.isEmpty(jsonData) ) {
												if(jsonData) { // 최초등록이 아닐경우에만 체크아웃 상태확인 한다.

													//-----------------------------------------------------------------------
													// 체크아웃 상태체크(신한생명)
													//-----------------------------------------------------------------------
													$.main_detail.fn_checkoutStatus(interfaceObject.integrationId, businessObject.businessCd);
												}
											}
										}, {errorCall : false, params : {interfaceMid: jsonData.interfaceModel.mid} });
									}
			            		}
							}

							//-----------------------------------------------------------------------
							//authGroup
							//-----------------------------------------------------------------------
							{
								var requestObject = new Object();
								{
									requestObject.categoryCd = 'DATA';
									requestObject.dataType = '1';
									requestObject.dataId = interfaceObject.interfaceId;
								}
								mint.callService(requestObject, 'AN-01-01-003', 'REST-R01-AU-01-03',
									function(responseData) {
										if( !mint.common.isEmpty(responseData) ) {
											$('#tf-authGroup').val(responseData.name);
										}
									},
									{
										errorCall : true,
										notificationView : false
								    }
								);
							}

						} else {
							mint.common.alert('BW00009', null);
							mint.back(null);
						}
					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_setInterfaceInfo"});
					}
				},//end fn_setInterfaceInfo()

				fn_checkoutStatus : function(integrationId, businessCd) {
					try {
						var channelItem = $("#cb-channelNm").data("kendoDropDownList").dataItem();
						var requestObject = new Object();
						requestObject.ObjectType = "Map";
						requestObject.integrationId = integrationId;
						requestObject.businessCd = businessCd;
						requestObject.channelCd = channelItem.channelCd;
						mint.callService( requestObject, screenName, 'REST-R01-RT-03-02', function(jsonData) { // 체크아웃 상태체크
							if( !mint.common.isEmpty(jsonData) ) {
								if( jsonData ) {
									$.main_detail.fn_enabledBtn('.btn-deploy');
									$.main_detail.fn_enabledBtn('.btn-modify');
								} else {
									$.main_detail.fn_disabledBtn(".btn-deploy");
									$.main_detail.fn_disabledBtn(".btn-modify");
									var msg = '<span><h4>형상웹화면에서</h4></span><span><h4>체크아웃 상태를 확인하세요.</h4></span>';
									mint.common.jobNotification(msg, "warning", {closeButton:true});
								}
							} else {
								$.main_detail.fn_disabledBtn(".btn-deploy");
								$.main_detail.fn_disabledBtn(".btn-modify");
								var msg = '<span><h4>형상웹화면에서</h4></span><span><h4>체크아웃 상태를 확인하세요.</h4></span>';
								mint.common.jobNotification(msg, "warning", {closeButton:true});
							}
						}, {errorCall : false }
						);
					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_checkoutStatus"});
					}
				},

				//-----------------------------------------------------------------------
				// Description :: 버튼 Show/Hide 설정
				//-----------------------------------------------------------------------
				fn_visibleBtn : function(status) {
					try {

						$('.btn-delete').show();

						if( !$.main_detail.isDeployTest ) {
							if(status == "B1") {

								$.main_detail.fn_disabledBtn(".btn-deploy");
								$.main_detail.fn_disabledBtn(".btn-modify");

								if(mint.lifecycle.isApprover()) {
									$('.btn-approval').show();
									$('.btn-return').show();
								}
							}
						}

						/* if(status == "F1") {
							$.main_detail.fn_disabledBtn(".btn-deploy");
						} */

					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_visibleBtn"});
					}
				},//end fn_visibleBtn()

				//-----------------------------------------------------------------------
				// Description :: 삭제인터페이스 버튼 Hide 설정
				//-----------------------------------------------------------------------
				fn_visibleBtnDisable : function() {
					try {
						$('.btn-approval').hide();
						$('.btn-delete').hide();
						$('.btn-history').hide();
						$('.btn-modify').hide();
						$('.btn-status').hide();
						$('.btn-deploy').hide();
					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_visibleBtnDisable"});
					}
				},//end fn_visibleBtnDisable()

				//-----------------------------------------------------------------------
				// Description :: 버튼 비활성화 설정
				//-----------------------------------------------------------------------
				fn_disabledBtn : function( btn ) {
					try {
						$(btn).attr('disabled', true);
						$(btn).attr('readonly', true);
					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_disabledBtn"});
					}
				},//end fn_disabledBtn()

				//-----------------------------------------------------------------------
				// Description :: 버튼 활성화 설정
				//-----------------------------------------------------------------------
				fn_enabledBtn : function( btn ) {
					try {
						$(btn).attr('disabled', false);
						$(btn).attr('readonly', false);
					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_enableddBtn"});
					}
				},//end fn_enableddBtn()

				//-----------------------------------------------------------------------
				// Description :: CRUD 가 가능한지 여부를 체크 한다
				// - CRUD Access 가능 사용자
				//   (1) 등록자
				//   (2) 결재권자( mint.lifecycle.isApprover() )
				//-----------------------------------------------------------------------
				fn_isAuthorized : function(itemType) {
					try {

						var deferred = $.Deferred();
						var type = 'AUTH';

						var flag = mint.common.getEnvValue('pep.per.mint.authority.check.data');
						if(!mint.common.isEmpty(flag) && flag[0] === 'true') {
							//-----------------------------------------------------------------------
							// Authority Check
							//-----------------------------------------------------------------------
							var requestObject = new Object();
							{
								requestObject.objectType = 'AuthorityRequest';
								requestObject.categoryCd = 'DATA';
								requestObject.itemType = itemType;
								requestObject.ownerId = mint.session.getUserId();
								requestObject.dataType = '1';
								requestObject.dataId = $("#hd-interfaceId").val();
							}

							mint.callService(requestObject, screenName, 'REST-R01-AU-01-01',
								function(responseObject, errorCd, errorMsg) {
									if( !mint.common.isEmpty(responseObject) && responseObject.authorized == true ) {
										var msg = '';
										deferred.resolve({type: type, flag: true, msg: msg});
									} else {
										var msg = mint.message.getMessage('CW00007', null);
										deferred.reject({type: type, flag: false, msg: msg});
									}
								},
								{
									errorCall : true,
									notificationView : false
								}
							);
						} else {
							if( $('#hd-regUserId').val() == mint.session.getUserId() || mint.lifecycle.isApprover() ) {
								var msg = '';
								deferred.resolve({type: type, flag: true, msg: msg});
							} else {
								var msg = mint.message.getMessage('CW00007', null);
								deferred.reject({type: type, flag: false, msg: msg});
							}
						}

					} catch( e ) {
						deferred.reject({type: type, msg: e});
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_isAuthorized"});
					} finally {
						return deferred.promise();
					}
				},//end fn_isAuthorized()

				//-----------------------------------------------------------------------
				// Description :: 요건 삭제
				//-----------------------------------------------------------------------
				fn_deleteRequirement : function(jsonData) {
					try {
						mint.callService(null, screenName, 'REST-D01-AN-01-00',
							function (jsonData, errorCd, errorMsg) {
								if( ! mint.common.isEmpty(errorCd) && errorCd == 0 ) {
									mint.common.alert('CI00103', null); //삭제를 완료했습니다.
									mint.move('../sub-an/AN-01-01-001');
								}
							}
							,{
								 errorCall : false
								,params : {
									requirementId : $('#hd-requirementId').val()
								}
							}
						);
					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_deleteRequirement"});
					}
				},//end fn_deleteRequirement()

				//-----------------------------------------------------------------------
				// Description :: 요건 복원
				//-----------------------------------------------------------------------
				fn_requirementRestore : function(actionFlag, dateType) {
					try {
						mint.callService(null, screenName, 'REST-U05-AN-01-00'
							,function(jsonData) {
								mint.common.alert('CI00104', null)
								mint.move('../sub-an/AN-02-04-601');
							}
							,{
								 errorCall : true
								,params : {
									  requirementId : $('#hd-requirementId').val()
								}
							}
						);
					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_requirementRestore"});
					}
				},//end fn_requirementRestore()

				//-----------------------------------------------------------------------
				// Description :: 인터페이스 모델 배포
				//-----------------------------------------------------------------------
				fn_modelDeploy : function() {
					try {

						if( !$.main_detail.isDeployTest ) {
							if($("#rd-modelStd").data("kendoSwitch").check() || $('#hd-statusCd').val() == "F1") {
								var requestObject = new Object();
								requestObject.ObjectType = "Map";
								requestObject.userId = mint.session.getUserId();
								mint.callService( requestObject, screenName, 'REST-R01-RT-03-03', function(jsonData) { // 패키지 리스트조회
									if( !mint.common.isEmpty(jsonData) ) {
										var dataSource = new kendo.data.DataSource({
											  data: jsonData
										    , page:1
										    , pageSize: mint.ui.getPageSizesS({'currentPage' : true})
										});
										$("#gd-package").data("kendoGrid").setDataSource(dataSource);
										$("#pkgInfo").data("kendoWindow").center().open();
									} else {
										alert("패키지 정보가 존재하지 않습니다.");
									}

								}, {errorCall : false }
								);
							} else {
								var confirmCheck = mint.common.confirm('CI00006', null);
								if(confirmCheck) {
									var msgObject = new Object();
									msgObject.msgId = "CW00020";
									msgObject.msgParam = "검토요청을 완료했습니다."
									$.main_detail.fn_requirementModifyStatus('B1', msgObject);
								}
							}
						} else {
							var jsonData = "[{\"prgList\":[{\"prgPath\":\"/usr/pgm/a\",\"prgNm\":\"betterCallSaul\"}],\"pkgNm\":\"테스트패키지01\",\"pkgId\":\"TESTPKG01\"}]";
							var dataSource = new kendo.data.DataSource({
								  data: JSON.parse(jsonData)
							    , page:1
							    , pageSize: mint.ui.getPageSizesS({'currentPage' : true})
							});
							$("#gd-package").data("kendoGrid").setDataSource(dataSource);
							$("#gd-package").data("kendoGrid").select("tr:eq(1)");
							$.main_detail.fn_checkIn();
						}
					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_modelDeploy"});
					}
				},

				//-----------------------------------------------------------------------
				// Description :: 체크인
				//-----------------------------------------------------------------------
				fn_checkIn : function() {
					try {
						var requestObject = new Object();
						requestObject.objectType = 'ModelDeployment';
						requestObject.interfaceMid = $("#hd-modelMid").val();
						requestObject.deployUser = mint.session.getUserId();
						requestObject.deployDate = mint.common.formatDateTime(new Date(),'yyyyMMddHHmmss');

						if($('#rd-deployOption').data("kendoSwitch").check()) {
							requestObject.deployOption = "2";
						} else {
							requestObject.deployOption = "1";
						}

						var channelItem = $("#cb-channelNm").data("kendoDropDownList").dataItem();
						if( channelItem.channelCd == "FWS" ) {
							requestObject.method  = "1";
						} else if( channelItem.channelCd == "EAI" ) {
							requestObject.method  = "2";
						} else if( channelItem.channelCd == "ETL" ) {
							requestObject.method  = "3";
						} else if( channelItem.channelCd == "MCI" ) {
							requestObject.method  = "4";
						} else if( channelItem.channelCd == "MCO" ) {
							requestObject.method  = "5";
						} else if( channelItem.channelCd == "BAC" ) {
							requestObject.method  = "6";
						} else if( channelItem.channelCd == "ICO" ) {
							requestObject.method  = "7";
						} else if( channelItem.channelCd == "NRC" ) {
							requestObject.method  = "8";
						} else {
							requestObject.method  = "0";
						}

						var entityGrid = $("#gd-package").data("kendoGrid");
				        var selectedItem = entityGrid.dataItem(entityGrid.select());

						var userData = new Object();
						userData.userId = mint.session.getUserId();
						userData.pkgId = selectedItem.pkgId;

						requestObject.userData = userData;

						mint.callService( requestObject, screenName, 'REST-R01-RT-02-01', function(jsonData) {
							if( !mint.common.isEmpty(jsonData) ) {
								mint.common.alert('BI00019', null);
								$("#pkgInfo").data("kendoWindow").center().close();
								mint.setDetailView('Y');
								mint.common.setScreenParam("requirementId", $('#hd-requirementId').val());
					      		mint.move('../sub-an/AN-01-01-003');
							}
						}, {errorCall : false});
					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_checkIn"});
					}
				},

				//-----------------------------------------------------------------------
				// Description :: 상태변경
				//-----------------------------------------------------------------------
				fn_requirementModifyStatus : function(actionFlag, msgObject) {
					try {
						mint.callService(null, screenName, 'REST-U06-AN-01-00'
							,function(jsonData) {
								if( !mint.common.isEmpty(msgObject)) {
									mint.common.alert(msgObject.msgId, msgObject.msgParam);
								} else {
									mint.common.alert('CI00102', null);
								}
								mint.setDetailView('Y');
								mint.common.setScreenParam("requirementId", $('#hd-requirementId').val());
					      		mint.move('../sub-an/AN-01-01-003');
							}, {
								 errorCall : true
								,params : {
									  requirementId : $('#hd-requirementId').val()
									  , status		: actionFlag
								}
							}
						);
					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_requirementModifyStatus"});
					}
				}//end fn_requirementModifyStatus()

			}// end main
		});// end extends

		//=======================================================================
		// (4) 이벤트 핸들러 정의
		//=======================================================================

		//-----------------------------------------------------------------------
		// Description :: 수정 버튼 Click 이벤트
		//-----------------------------------------------------------------------
		$('.btn-modify').on('click', function(e) {
			$.main_detail.fn_isAuthorized('2')
			.done(function(response) {
				mint.setDetailView("Y");
				mint.common.setScreenParam("isModify", true);
				mint.common.setScreenParam('requirementId', $('#hd-requirementId').val());
				mint.move('../sub-an/AN-01-01-002');
			}).fail(function(response) {
				if(response.flag == false) {
					mint.common.alert(response.msg);
				}
			});
        });

		//-----------------------------------------------------------------------
		// Description :: 삭제 버튼 Click 이벤트
		//-----------------------------------------------------------------------
		$('.btn-delete').on('click', function(e) {
			$.main_detail.fn_isAuthorized('3')
			.done(function(response) {
				var confirmCheck = mint.common.confirm('CI00003', null);
				if(confirmCheck) {
					$.main_detail.fn_deleteRequirement();
				}
			}).fail(function(response) {
				if(response.flag == false) {
					mint.common.alert(response.msg);
				}
			});
        });

		//-----------------------------------------------------------------------
		// Description :: 승인 버튼 Click 이벤트
		//-----------------------------------------------------------------------
		$('.btn-approval').on('click', function(e) {
			if( mint.lifecycle.isApprover() ) {
				var confirmCheck = mint.common.confirm('CI00007', null);
				if(confirmCheck) {
					var msgObject = new Object();
					msgObject.msgId = 'CI00107';
					msgObject.msgParam = null;
					$.main_detail.fn_requirementModifyStatus('F1', msgObject);
				}
			} else {
				mint.common.alert('CW00007', null);
			}
		});

		//-----------------------------------------------------------------------
		// Description :: 반려 버튼 Click 이벤트
		//-----------------------------------------------------------------------
		$('.btn-return').on('click', function(e) {
			if( mint.lifecycle.isApprover() ) {
				var confirmCheck = mint.common.confirm('CI00008', null);
				if(confirmCheck) {
					var msgObject = new Object();
					msgObject.msgId = 'CI00108';
					msgObject.msgParam = null;
					$.main_detail.fn_requirementModifyStatus('E1', msgObject);
				}
			} else {
				mint.common.alert('CW00007', null);
			}
		});

		//-----------------------------------------------------------------------
		// Description :: 이전 버튼 Click 이벤트
		//-----------------------------------------------------------------------
		$('.btn-back').on('click', function(e) {
			var options = new Object();
			var callBackPage = mint.common.getScreenParam("callBackPage");
			if( ! mint.common.isEmpty( callBackPage ) ) {
				options.callBackPage = callBackPage;
      		}
			mint.back(options);
			mint.common.setScreenParam("callBackPage", null); // 이전페이지 호출 후 초기화.
		});

		//-----------------------------------------------------------------------
		// Description :: 개발완료 버튼 Click 이벤트
		//-----------------------------------------------------------------------
		$('.btn-status').on('click', function(e) {
			var ifdlist = ['9801207',' 9800819','9803715','9804191','9852023','9801180','9803253','9850036','9800821','9804408','9850037'];
			
			if(ifdlist.includes(mint.session.getUserId())) {
				var confirmCheck = mint.common.confirm('CI00002', null);
				if(confirmCheck) {
					var msgObject = new Object();
					msgObject.msgId = 'CI00102';
					msgObject.msgParam = null;
					$.main_detail.fn_requirementModifyStatus('G0', msgObject);
				}
			} else {
				alert("인터페이스 담당자만 개발완료 처리가 가능합니다.");
			}
			
		});

		//-----------------------------------------------------------------------
		// Description :: 히스토리 Click 이벤트 (팝업)
		//-----------------------------------------------------------------------
		$('.btn-history').click(function(e) {
			//mint.common.setScreenParam("requirementId",);
			mint.common.searchPopup('../sub-co/CO-01-00-013.html','CO-01-00-013');
		});

		//-----------------------------------------------------------------------
		// Description :: 복원 버튼 Click 이벤트
		//-----------------------------------------------------------------------
		$('.btn-restore').on('click', function(e) {
			if( mint.lifecycle.isApplier() || mint.session.isInterfaceAdmin() ) {
				$.main_detail.fn_requirementRestore();
			} else {
				mint.common.alert('CW00007', null);
			}
		});

		//-----------------------------------------------------------------------
		// Description :: 배포 버튼 Click 이벤트
		//-----------------------------------------------------------------------
		$('.btn-deploy').on('click', function(e) {
			$.main_detail.fn_modelDeploy();
		});

		//-----------------------------------------------------------------------
		// Description :: 체크인 버튼 Click 이벤트
		//-----------------------------------------------------------------------
		$('#btn-checkin').on('click', function(e) {
			var entityGrid = $("#gd-package").data("kendoGrid");
	        var selectedItem = entityGrid.dataItem(entityGrid.select());

			if( !mint.common.isEmpty(selectedItem) ) {
				if(!mint.common.isEmpty(selectedItem.pkgId)) {
					$.main_detail.fn_checkIn();
				} else {
					alert("패키지번호가 존재하지 않습니다.");
					return;
				}
			} else {
				alert("선택한 패키지정보가 없습니다.");
				return;
			}
		});

		//=======================================================================
		// (5) 기타 Function 정의
		//=======================================================================

		//=======================================================================
		// (6) 화면 로딩시 실행할 항목 기술
		//=======================================================================
		$.main_detail.fn_init();
		mint.label.attachLabel(null);

	});

</script>