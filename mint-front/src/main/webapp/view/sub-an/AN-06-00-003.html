<!--
	Screen ID : AN-06-00-003
	Screen NM : 전문I/O 상세
	[변경 이력]
	* 20200225-001 : New
-->

<!--location -->
<div class="row wrapper border-bottom white-bg page-heading">
	<div id="oldPath" class="col-lg-5">
 		<h2 class="lb-change"><lb class="lb-833">전문I/O 상세</lb></h2>
		<ol class="breadcrumb">
			<li><lb class="lb-1025">전문I/O 관리</lb></li>
	        <li class="active"><strong class="lb-change"><lb class="lb-833">전문I/O 상세</lb></strong></li>
		</ol>
	</div>
	<div id="menuPath" class="col-lg-5">
    </div>
</div>
<!--location end-->

<!--wrapper wrapper-content-->
<div class="wrapper wrapper-content animated fadeInRight" >
	<div class="row">
		<div class="col-lg-12">
			<div class="ibox float-e-margins">
				<div class="ibox-title">
					<h5><lb class="lb-1008"></lb></h5>
                    <div class="ibox-tools">
                    	<a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
					</div>
					<div style="float: right; padding: 0px 20px 0px 0px;">
						<a class="btn btn-w-m btn-success btn-outline btn-used"><i class="fa fa-desktop"></i> <lb class="lb-519">사용</lb>(<lb class="used-cnt">0</lb>)</a>
			            <a class="btn btn-w-m btn-default btn-outline btn-update"><i class="fa fa-pencil"></i> <lb class="lb-12"></lb></a>
			            <a class="btn btn-w-m btn-default btn-outline btn-delete"><i class="fa fa-trash-o"></i> <lb class="lb-343"></lb></a>
			            <a class="btn btn-w-m btn-default btn-outline btn-back"><i class="fa fa-reply"></i> <lb class="lb-311"></lb></a>
					</div>
				</div>

              	<div class="ibox-content">
                  	<div class="row">
						<div class="col-sm-4">
							<div class="form-horizontal">
                               	<div class="form-group">
                               		<label class="label-tag-4"><lb class="lb-1006">코드(CD)</lb></label>
                               		<input id="tf-dataSetCd" name="dataSetCd" type="text" class="input-tag-4 k-textbox input-tag-view mint-readonly" placeholder="">
                               		<input id="hd-dataSetId" name="hd-dataSetId" type="hidden">
                              	</div>
							</div>
						</div>
						<div class="col-sm-4">
							<div class="form-horizontal">
                               	<div class="form-group">
                               		<label class="label-tag-4"><lb class="lb-1037">한글명</lb></label>
                               		<input id="tf-dataSetNm1" name="dataSetNm1" type="text" class="input-tag-4 k-textbox input-tag-view mint-readonly" placeholder="">
                              	</div>
							</div>
						</div>
						<div class="col-sm-4">
							<div class="form-horizontal">
                               	<div class="form-group">
                               		<label class="label-tag-4"><lb class="lb-1038">영문명</lb></label>
                               		<input id="tf-dataSetNm2" name="dataSetNm2" type="text" class="input-tag-4 k-textbox input-tag-view mint-readonly" placeholder="">
                              	</div>
							</div>
						</div>
						<hr class="hr-space">
                        <div class="col-sm-4">
                            <div class="form-group">
                                <span class="label-tag-4"><lb class="lb-494">구분</lb></span>
								<span style="padding: 0px 0px 0px 10px;">
					            	<div class="radio radio-inline" style="padding-left:20px; padding-top:5px;">
										<span class="radio-info" style="padding-right: 10px;">
											<input id="rd-layout-y" class="mint-readonly" type="radio" name="rd-layout" value="Y" checked="checked"><label for="rd-layout-y"><lb class="lb-1039">전문I/O</lb></label>
										</span>
		                                <span class="radio-danger" style="padding:0px 20px;">
		                                	<input id="rd-layout-n" class="mint-readonly" type="radio" name="rd-layout" value="N"><label for="rd-layout-n"><lb class="lb-1030">복합유형</lb></label>
		                                </span>
                                	</div>
                                </span>
                            </div>
                        </div>
						<div class="col-sm-4">
							<div class="form-horizontal">
	                            <div class="form-group">
									<label class="label-tag-4"><lb class="lb-1018">암호화</lb></label>
									<input id="cb-encryptType" name="encryptType" type="combobox" placeholder="Select" class="input-tag-4 input-tag-view mint-readonly" data-bind="value: value, events: {select: select}">
                              	</div>
							</div>
						</div>
						<div class="col-sm-4">
							<div class="form-horizontal">
                               	<div class="form-group">
                               		<label class="label-tag-4"><lb class="lb-1012">길이</lb></label>
                               		<input id="tf-length" name="length" type="number" class="input-tag-4 k-textbox input-tag-view mint-readonly" placeholder="" readonly="readonly" disabled="disabled">
                              	</div>
							</div>
						</div>

						<div style="display:none;">
						<hr class="hr-space">
						<div class="col-sm-4">
							<div class="form-horizontal">
	                            <div class="form-group">
									<label class="label-tag-4"><lb class="lb-48">유형</lb></label>
									<input id="cb-dataFormat" name="msgType" type="combobox" placeholder="Search..." class="input-tag-4 input-tag-view mint-readonly" data-bind="value: value, events: {select: select}">
                              	</div>
							</div>
						</div>
						<div class="col-sm-4">
							<div class="form-horizontal">
                               	<div class="form-group">
                               		<label class="label-tag-4"><lb class="lb-1044">레코드구분자</lb></label>
                               		<input id="tf-recordDelimiter" name="recordDelimiter" type="text" class="input-tag-4 k-textbox delimiter input-tag-view mint-readonly" placeholder="" readonly="readonly" disabled="disabled" data-bind="disabled: isDisabled">
                              	</div>
							</div>
						</div>
						<div class="col-sm-4">
							<div class="form-horizontal">
                               	<div class="form-group">
                               		<label class="label-tag-4"><lb class="lb-1045">필드구분자</lb></label>
                               		<input id="tf-fieldDelimiter" name="fieldDelimiter" type="text" class="input-tag-4 k-textbox delimiter input-tag-view mint-readonly" placeholder="" readonly="readonly" disabled="disabled" data-bind="disabled: isDisabled">
                              	</div>
							</div>
						</div>
						</div>

						<hr class="hr-space">
						<div class="col-sm-4">
							<div class="form-horizontal">
	                            <div class="form-group">
									<label class="label-tag-4"><lb class="lb-9999">권한그룹</lb></label>
									<input id="tf-authGroup" name="authGroup" type="text" class="input-tag-4 k-textbox input-tag-view mint-readonly" placeholder="" readonly="readonly" disabled="disabled">
                              	</div>
							</div>
						</div>
						<div class="col-sm-4">
							<div class="form-horizontal">
                               	<div class="form-group">
                               		<label class="label-tag-4"><lb class="lb-71">등록일</lb></label>
                               		<input id="tf-regDate"    name="regDate"    type="text" class="input-tag-4 k-textbox input-tag-view mint-readonly" placeholder="" readonly="readonly" disabled="disabled">
                               		<input id="hd-regId" name="hd-regId" type="hidden">
                              	</div>
							</div>
						</div>
						<div class="col-sm-4">
							<div class="form-horizontal">
	                            <div class="form-group">
	                            	<label class="label-tag-4"><lb class="lb-582">수정일</lb></label>
                                	<input id="tf-modDate" name="modDate" type="text" class="input-tag-4 k-textbox input-tag-view mint-readonly" placeholder="" readonly="readonly" disabled="disabled">
                                	<input id="hd-modId" name="hd-modId" type="hidden">
                              	</div>
							</div>
						</div>
					</div><!-- end row -->

           		</div>
           	</div>
       	</div>
   	</div>

	<div class="row">
		<div class="col-lg-12">
			<div class="tabs-container">
				<div class="tabs-lefts">
					<ul id="tab-datafield-info" class="nav nav-tabs">
						<li class="active"><a data-toggle="tab" href="#tab01"><lb class="lb-1009"></lb></a></li>
						<li class=""><a data-toggle="tab" href="#tab02"><lb class="lb-218"></lb></a></li>
					</ul>
					<div class="tab-content">
						<div id="tab01" class="tab-pane active">
							<div class="panel-body">

		                 		<div class="row">
		 							<div class="col-lg-12">
		 	  							<div id="gd-TreeList"></div>
			               			</div>
		    					</div>
							</div><!-- end panel-body -->
						</div><!-- end tab-pane -->

						<div id="tab02" class="tab-pane">
							<div class="panel-body">
		                        <div class="row">
		                        	<div class="col-sm-12">
		                        	<textarea id="ta-description" rows="5" cols="30" style="height:200px"></textarea>
		                        	</div>
		                        </div>
								<hr class="hr-space">
								<hr class="hr-space">
							</div><!-- end panel-body -->
						</div><!-- end tab-pane -->

					</div><!--  end tab-content -->
				</div><!-- end tab-position -->
			</div><!-- end tabs-container -->
       	</div><!--  end col-sm-12 -->
	</div><!-- end row -->
</div><!-- end wrapper -->


<script type="text/x-kendo-template" id="template-grid-btn-list">
	<div>
		<span id="btn-add" style="float: right; padding:5px 10px 5px 0px; cursor: pointer;" onclick="return $.main_detail.fn_btn_add_click()">
			<i class='fa fa-plus-square-o'></i> <lb class="lb-370"></lb></span>
		</span>
		<span id="btn-down" style="float: right; padding:5px 10px 5px 0px; cursor: pointer;" onclick="return $.main_detail.fn_btn_down_click()">
			<i class='fa fa-level-down'></i> <lb class="lb-1035"></lb></span>
		</span>
		<span id="btn-up" style="float: right; padding:5px 10px 5px 0px; cursor: pointer;" onclick="return $.main_detail.fn_btn_up_click()">
			<i class='fa fa-level-up'></i> <lb class="lb-1034"></lb></span>
		</span>
		<span id="btn-copy" style="float: right; padding:5px 10px 5px 0px; cursor: pointer;" onclick="return $.main_detail.fn_btn_copy_click()">
			<i class='fa fa-copy'></i> <lb class="lb-313"></lb></span>
		</span>
		<span id="btn-meta-add" style="float: right; padding:5px 10px 5px 0px; cursor: pointer;">
			<i class='fa fa-plus-square-o'></i> <lb class="lb-1013" onclick="return $.main_detail.fn_btn_add_metafield_click()"></lb></span>
		</span>
	</div>
</script>


<script>
	$(document).ready(function(){
		//=======================================================================
		//(1) function 및 variable scope 설정 :: (메인은 main, 팝업 및 서브는 sub)
		//=======================================================================
		screenName = "AN-06-00-003";
		$.extend({
			main_detail : {
				//=======================================================================
				// (2) Screen 에서 사용할 variable 정의
				//=======================================================================
				isReadOnly : false,
				//=======================================================================
				// (3) Screen 에서 사용할 function 정의
				//=======================================================================

				//-----------------------------------------------------------------------
				// Description :: 화면 초기화
				//-----------------------------------------------------------------------
				fn_init : function() {
					try {
						mint.init('$.main_detail.fn_initCallback');
						//mint.common.siteMenuPath(screenName);
					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_init"});
					}
				},//end fn_init()

				//-----------------------------------------------------------------------
				// Description :: 화면 초기화 콜백
				//-----------------------------------------------------------------------
				fn_initCallback : function() {
					try {
						//-----------------------------------------------------------------------
						// 화면 초기화
						//-----------------------------------------------------------------------
						$.main_detail.fn_initComponent(null);

						//-----------------------------------------------------------------------
						// 샹세/수정 체크
						//-----------------------------------------------------------------------
						$.main_detail.isReadOnly = true;
						$.main_detail.dataSetId = mint.common.getScreenParam('dataSetId');

			      		if( ! mint.common.isEmpty( $.main_detail.dataSetId ) ) {
							mint.callService(null, 'AN-06-00-002', 'REST-R02-AN-06-00', '$.main_detail.fn_setDataField',
								{
									errorCall : true,
									params : {dataSetId : $.main_detail.dataSetId}
							    }
							);

							//-----------------------------------------------------------------------
							//authGroup
							//-----------------------------------------------------------------------
							{
								var requestObject = new Object();
								{
									requestObject.categoryCd = 'DATA';
									requestObject.dataType = '2';
									requestObject.dataId = $.main_detail.dataSetId;
								}
								mint.callService(requestObject, 'AN-06-00-003', 'REST-R01-AU-01-03',
									function(responseData) {
										if( !mint.common.isEmpty(responseData) ) {
											$('#tf-authGroup').val(responseData.name);
										}
									},
									{
										errorCall : true,
										notificationView : false
								    }
								);
							}

							$.main_detail.fn_used();
			      		}

						//-----------------------------------------------------------------------
						// Screen Parameter Clear
						//-----------------------------------------------------------------------
						{
							mint.common.removeScreenParam('dataSetId');
						}

					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_initCallback"});
					}
				},//end fn_initCallback()

				//-----------------------------------------------------------------------
				// Description :: component 초기화
				//-----------------------------------------------------------------------
				fn_initComponent : function(options) {
					try {
						//-----------------------------------------------------------------------
						// readOnly Input Field
						//-----------------------------------------------------------------------
						{
							$(':input[class*="mint-readonly"]').each(function(){
								$(this).prop("readonly", true);
								$(this).prop("disabled", true);
							});
						}
//
						// Dropdown
						{
							// Variables
							$.main_detail.YesNoValue = [{ nm: 'Yes', cd: 'Y' }, { nm: 'No', cd: 'N' }];
							$.main_detail.encryptTypeUsedYN = true;

							// Init Binding
		 					mint.ui.setDropDownList('cb-dataFormat', mint.common.commonCodeMap.get("cds").AN11, 0, 'nm', 'cd');
		 					if( $.main_detail.encryptTypeUsedYN == true ) {
		 						mint.ui.setDropDownList('cb-encryptType', $.main_detail.YesNoValue, 0, 'nm', 'cd');
		 					} else {
		 						mint.ui.setDropDownList('cb-encryptType', mint.common.commonCodeMap.get("cds").AN08, 0, 'nm', 'cd');
		 					}

		 					// Data Selection
		 					var an11 = mint.common.getEnvValue('default.ui.an11');
		 					kendo.bind($('#cb-dataFormat'), kendo.observable({
		 						value: (!mint.common.isEmpty(an11) && an11.length > 0) ? an11[0] : '0',
		 						select: function(e) {
		 							//$.main_detail.fn_delimiterField(e.dataItem);
		 						}
		 					}));

		 					if( $.main_detail.encryptTypeUsedYN == true) {
			 					kendo.bind($('#cb-encryptType'), kendo.observable({
			 						value: 'N',
			 						select: function(e) {
			 							//TODO
			 						}
			 					}));
		 					} else {
			 					var an08 = mint.common.getEnvValue('default.ui.an08');
			 					kendo.bind($('#cb-encryptType'), kendo.observable({
			 						value: (!mint.common.isEmpty(an08) && an08.length > 0) ? an08[0] : '0',
			 						select: function(e) {
			 							//TODO
			 						}
			 					}));
		 					}

						}

						// TreeList
						$.main_detail.fn_initTreeList();

						// TextArea
						$("#ta-description").kendoEditor({
				        });

					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_initComponent"});
					}
				},//end fn_initComponent()


				//-----------------------------------------------------------------------
				// Description :: fn_initTreeList
				//-----------------------------------------------------------------------
				fn_initTreeList : function(jsonData) {
					try {
						var hCSSCenter = {style: 'text-align: center; vertical-align:middle;'};
						var aCSSCenter = {style: 'text-align: center; white-space: nowrap;'};
						var aCSSLeft = {style: 'text-align: left; white-space: nowrap;'};

						var locked = true;
						var dataSource = (!mint.common.isEmpty($.main_detail.isModify) && $.main_detail.isModify === true) ? [] : $.main_detail.fn_getTreeListDataSource([]);
						$("#gd-TreeList").kendoTreeList({
				          	dataSource : $.main_detail.fn_getTreeListDataSource([]),
							filterable: false,
							resizable: true,
				            sortable: false,
				            selectable: true,
				            scrollable: true,
				            editable: {
				                mode: "inline",
				            },
						    toolbar: ["excel"],
						    excel: {
								allPages: true,
								filterable: false,
								fileName: mint.common.remakeYYMMDD(new Date()).substring(0, 14) + mint.label.getLabel('lb-10') + '.xlsx'
						    },
						    messages: {
						        commands: {
						          excel: mint.label.getLabel('lb-508')
						        }
						    },
							columns: [

								{
									field: "name1",
									title: mint.label.getLabel('lb-1014'),
									headerAttributes: hCSSCenter, attributes : aCSSLeft,
									width: "130px", locked: locked, expandable: true,
								},
								{
									field: "parentNmKo",
									title: mint.label.getLabel('lb-1049'), //부모식별자(한)
									headerAttributes: hCSSCenter, attributes : aCSSLeft,
									width: "130px", locked: locked,
								},
								{
									field: "requiredYn",
									title: mint.label.getLabel('lb-1050'), //필수
									headerAttributes: hCSSCenter, attributes: aCSSCenter,
									width: "80px", locked: locked,
								},
								{
									field: "metaYn",
									title: mint.label.getLabel('lb-1043'), //메타체크
									headerAttributes: hCSSCenter, attributes: aCSSCenter,
									width: "80px", locked: locked,
								},
								{
									field: "name2",
									title: mint.label.getLabel('lb-1015'),
									headerAttributes: hCSSCenter, attributes: aCSSLeft,
									width: "130px", locked: locked
								},
								{
									field: "parentNmEn",
									title: mint.label.getLabel('lb-1051'), //부모식별자(영)
									headerAttributes: hCSSCenter, attributes : aCSSLeft,
									width: "130px", locked: locked,
								},
								{
									field: "typeNm",
									title:  mint.label.getLabel('lb-48'),
									template: '#=typeNm#',
									headerAttributes: hCSSCenter, attributes: aCSSCenter,
									width: "120px", locked: locked,
								},
								{
									field: "userKeyYn",
									title: mint.label.getLabel('lb-1052'), //이용자식별번호여부
									template: '#=userKeyYn#',
									headerAttributes: hCSSCenter, attributes: aCSSCenter,
									width: "130px", locked: false,
								},
								{
									field: "personalInfoUseYn",
									title: mint.label.getLabel('lb-1053'), //개인정보대상여부
									template: '#=personalInfoUseYn#',
									headerAttributes: hCSSCenter, attributes: aCSSCenter,
									width: "120px", locked: false,
								},
								{
									field: "pk",
									title: mint.label.getLabel('lb-1058'), //PK
									headerAttributes: hCSSCenter, attributes: aCSSCenter,
									width: "80px", locked: false,
								},
								{
									field: "length",
									title: mint.label.getLabel('lb-1012'),
									headerAttributes: hCSSCenter, attributes: aCSSCenter, format: '{0:#}',
									width: "100px",
								},
								{
									field: "scale",
									title: mint.label.getLabel('lb-1059'), //SCALE
									headerAttributes: hCSSCenter, attributes: aCSSCenter, format: '{0:#}',
									width: "100px",
								},
								{
									field: "offset",
									title: mint.label.getLabel('lb-1016'),
									headerAttributes: hCSSCenter, attributes: aCSSCenter, format: '{0:#}',
									width: "100px",
									hidden: true,
								},
								{
									field: "defaultValue",
									title: mint.label.getLabel('lb-1017'),
									headerAttributes: hCSSCenter, attributes: aCSSCenter,
									width: "100px",
								},
								{
									field: "justifyNm",
									title: mint.label.getLabel('lb-1023'),
									template: '#=justifyNm#',
									headerAttributes: hCSSCenter, attributes: aCSSCenter,
									width: "120px",
								},
								{
									field: "padding",
									title: mint.label.getLabel('lb-1024'),
									headerAttributes: hCSSCenter, attributes: aCSSCenter,
									width: "95px",
								},
								{
									field: "encryptTypeNm",
									title: mint.label.getLabel('lb-1018'),
									template: '#=encryptTypeNm#',
									headerAttributes: hCSSCenter, attributes: aCSSCenter,
									width: "120px",
								},
								{
									field: "koreanYn",
									title: mint.label.getLabel('lb-1054'), //한글여부
									headerAttributes: hCSSCenter, attributes: aCSSCenter,
									width: "100px",
								},
								{
									field: "decimalPointYn",
									title: mint.label.getLabel('lb-1055'), //소수점포함여부
									headerAttributes: hCSSCenter, attributes: aCSSCenter,
									width: "120px",
								},

								{
									field: "maskingYn",
									title: mint.label.getLabel('lb-1056'), //마스킹여부
									headerAttributes: hCSSCenter, attributes: aCSSCenter,
									editor: mint.ui.gridEditorYesOrNoComboBox,
									width: "100px",
								},
								{
									field: "maskingPatternCd",
									title: mint.label.getLabel('lb-1057'), //마스킹패턴코드
									headerAttributes: hCSSCenter, attributes: aCSSCenter,
									width: "150px",
								},
								{
									field: "comments",
									title: mint.label.getLabel('lb-527'), //비고
									headerAttributes: hCSSCenter, attributes: aCSSCenter,
									width: "200px",
								},

								{
									field: "isLengthField",
									title: mint.label.getLabel('lb-1019'),
									headerAttributes: hCSSCenter, attributes: aCSSCenter,
									width: "100px",
									hidden: true,
								},
								{
									field: "hasRepeatCountField",
									title: mint.label.getLabel('lb-1020'),
									headerAttributes: hCSSCenter, attributes: aCSSCenter,
									width: "100px",
									hidden: true,
								},
								{
									field: "repeatFieldId",
									title: mint.label.getLabel('lb-1021'),
									headerAttributes: hCSSCenter, attributes: aCSSCenter,
									width: "120px",
									hidden: true,
								},
								{
									field: "repeatCount",
									title: mint.label.getLabel('lb-1022'),
									headerAttributes: hCSSCenter, attributes: aCSSCenter, format: '{0:#}',
									width: "100px",
									hidden: true,
								},
								{ field : "id", hidden : true },

							],
						    excelExport: function(e) {
						    	$.main_detail.fn_excelExport(e);
					      	},
							beforeEdit: function(e) {
							},
							edit: function(e) {
							},
 							change: function(e) {
							},
							dataBound: function (e) {
								mint.ui.gridVerticalScrollBar(e);
								//-----------------------------------------------------------------------
								// ROW / COL CSS 처리
								//-----------------------------------------------------------------------
								var items = e.sender.dataItems();
								if( items.length > 0 ) {
									for(var i = 0; i < items.length; i++ ) {
										var trTotal = e.sender.wrapper.find("tr[data-uid='" + items[i].uid + "']");
										trTotal.removeClass('k-alt');
									}
								}
 							},
 							dataBinding: function(e) {
 							},
							collapse: function(e) {
							},
							beforeEdit: function(e) {
							},
							save: function(e) {
							},
							saveChanges: function(e) {
							},
							remove: function(e) {
							},
							cancel: function(e) {
							},
							dragend: function(e) {
							}
						});
					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_initTreeList"});
					}
				},//end fn_initTreeList()

				//-----------------------------------------------------------------------
				// Description :: fn_getTreeListDataSource
				//-----------------------------------------------------------------------
				fn_getTreeListDataSource : function(jsonData) {
					try {

						//-----------------------------------------------------------------------
						// Data 건수가 많을 경우 Page 처리 한다 (우선 임계값을 100 으로 설정..)
						// TODO :: addRow, addChildRow 로 필드 추가할 경우, 현재 반영된 DataSource 형태를 따른다.(고민필요)
						//-----------------------------------------------------------------------
						var dataLength = jsonData.length;
						var isDefault = dataLength > 100 ? true : false;

						if(isDefault) {
							var	dataSource = {
								data: jsonData,
							    schema: {
							    	model: $.main_detail.fn_getTreeListModel(isDefault)
							    },
							    pageSize : mint.ui.getPageSizesM({'currentPage' : true})
							};

							var treeList = $("#gd-TreeList").data('kendoTreeList');
							treeList.options.pageable = {
								input : true
							}
						} else {
							var	dataSource = new kendo.data.TreeListDataSource({
								data: jsonData,
							    schema: {
							    	model: $.main_detail.fn_getTreeListModel(isDefault)
							    },
							});
						}

						return dataSource;
					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main.fn_getTreeListDataSource"});
					}
				},//end fn_getTreeListDataSource()

				//-----------------------------------------------------------------------
				// Description :: fn_getTreeListModel
				//-----------------------------------------------------------------------
				fn_getTreeListModel : function(isDefault) {
					try {
						var model = {
							id: "id",
							parentId: "parentId",
		            		fields: {
		            			objectType: {type: "string", editable:false, nullable:false, defaultValue: "DataField"},
		            			id: {type: "string", editable:true, nullable: false},
		            			dataSetId:   {type: "string", editable:false, nullable: false, defaultValue: ""},
		            			dataFieldId: {type: "string", editable:false, nullable: false, defaultValue: ""},
		            			parentId: {type: "string", editable:true, nullable: true},
		            			seq:         {type: "string", editable: false, nullable: false, defaultValue: ""},
			            		name1:       {type: "string", editable: true, nullable: false, defaultValue: "", validation: { required: true }},
			            		name2:       {type: "string", editable: true, nullable: false, defaultValue: "", validation: { required: true }},
			            		cd:          {type: "string", editable: false, nullable: true, defaultValue: ""},
			            		type:        {type: "string", editable: true, nullable: false, defaultValue: ""},
			            		typeNm:      {type: "string", editable: true, nullable: false, defaultValue: ""},
		            			length:      {type: "number", validation: { required: true, min: 0} , editable: true, nullable: false, defaultValue: 0},
			            		offset:      {type: "number", validation: { required: true, min: 0, step: 1, format: 'n0', decimals: 1 } , editable: true, nullable: false, defaultValue: 0},
		            			encryptType : {type: "string", editable: true, nullable: false, defaultValue: ""},
		            			encryptTypeNm : {type: "string", editable: true, nullable: false, defaultValue: ""},
		            			isLengthField : {type: "string", editable: true, nullable: false, defaultValue: ""},
		            			repeatCount : {type: "number", validation: { required: true, min: 0} , editable: true, nullable: false, defaultValue: 0},
		            			hasRepeatCountField : {type: "string", editable: true, nullable: false, defaultValue: ""},
		            			repeatFieldId : {type: "string", editable: true, nullable: false, defaultValue: ""},
		            			repeatDataSetId : {type: "string", editable: true, nullable: false, defaultValue: ""},
		            			defaultValue: {type: "string", editable: true, nullable: false, defaultValue: ""},
		            			justify : {type: "string", editable: true, nullable: false, defaultValue: ""},
		            			justifyNm : {type: "string", editable: true, nullable: false, defaultValue: ""},
		            			padding : {type: "string", editable: true, nullable: false, defaultValue: ""},
		            			fieldSetId:  {type: "string", editable:false, nullable: true, defaultValue: ""},

		            			refDataSetId:  {type: "string", editable:true, nullable: true, defaultValue: ""},
		            			refDataFieldId:  {type: "string", editable:true, nullable: true, defaultValue: ""},
		            			parentNmKo:	{type: "string", editable: true, nullable: true, defaultValue: ""},
		            			parentNmEn:	{type: "string", editable: true, nullable: true, defaultValue: ""},
		            			requiredYn:	{type: "string", editable: true, nullable: true, defaultValue: ""},
		            			scale:	{type: "number", validation: { required: false, min: 0}, editable: true, nullable: false, defaultValue: 0},
		            			koreanYn:	{type: "string", editable: true, nullable: true, defaultValue: ""},
		            			metaYn:	{type: "string", editable: true, nullable: true, defaultValue: ""},
		            			decimalPointYn:	{type: "string", editable: true, nullable: true, defaultValue: ""},

		            			maskingYn:	{type: "string", editable: true, nullable: true, defaultValue: ""},
		            			maskingPatternCd: {type: "string", editable: true, nullable: true, defaultValue: ""},
		            			userKeyYn: {type: "string", editable: true, nullable: true, defaultValue: "N"},
		            			personalInfoUseYn: {type: "string", editable: true, nullable: true, defaultValue: "N"},
		            			pk: {type: "string", editable: true, nullable: true, defaultValue: "N"},
		            			comments:	{type: "string", editable: true, nullable: true, defaultValue: ""},

		            			regDate : {type: "string", editable: true, nullable: false, defaultValue: ""},
		            			regId : {type: "string", editable: true, nullable: false, defaultValue: ""},
		            			modDate : {type: "string", editable: true, nullable: false, defaultValue: ""},
		            			modId : {type: "string", editable: true, nullable: false, defaultValue: ""},
		            		},
		            		expanded: true
						};

						if(isDefault) {
							var TreeListModel = model;
						} else {
							var TreeListModel = new kendo.data.TreeListModel.define(model);
						}
						return TreeListModel;
					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main.fn_getTreeListModel"});
					}
				}, //end fn_getTreeListModel()

				//-----------------------------------------------------------------------
				// Description :: fn_excelExport
				//-----------------------------------------------------------------------
				fn_excelExport : function(e) {
					try {
						//-----------------------------------------------------------------------
				    	// sheet
				    	//-----------------------------------------------------------------------
				        var sheet = e.workbook.sheets[0];
				        var columnLength = sheet.columns.length;

						var excelTitle = mint.label.getLabel('lb-1039') + ' Report';
						var masterColSpan = 4;
						var masterHeader = {
		            		background: '#7a7a7a',
		            		color: '#fff',
		            		hAlign: 'center',
		            		vAlign: 'center',
		            		bold: true
						};

						var master = [
							{
								type: 'header',
								cells: [
									$.extend({
										value: excelTitle,
										colSpan: columnLength,
										rowSpan: 1,
										fontSize: '14px',
									}, masterHeader),
								]
							},
							{
								type: 'data',
								cells: [
									{value: '', colSpan: columnLength, rowSpan: 1}
								]
							},
							{
								type: 'data',
								cells: [
									$.extend({
										value: mint.label.getLabel('lb-1006'), //CODE
										colSpan: masterColSpan
									}, masterHeader),
									{value: $('#tf-dataSetCd').val()}
								]
							},
							{
								type: 'data',
								cells: [
									$.extend({
										value: mint.label.getLabel('lb-1037'), //한글명
										colSpan: masterColSpan
									}, masterHeader),
									{value: $('#tf-dataSetNm1').val()}
								]
							},
							{
								type: 'data',
								cells: [
									$.extend({
										value: mint.label.getLabel('lb-1038'), //영문명
										colSpan: masterColSpan
									}, masterHeader),
									{value: $('#tf-dataSetNm2').val()}
								]
							},
							{
								type: 'data',
								cells: [
									$.extend(masterHeader, {
										value: mint.label.getLabel('lb-1018'), //암호화
										colSpan: masterColSpan
									}),
									{value: $('#cb-encryptType').val()}
								]
							},
							{
								type: 'data',
								cells: [
									{value: '', colSpan: columnLength, rowSpan: 1}
								]
							},
						];

				        var attachedRow = master.concat(sheet.rows);
				        sheet.rows = attachedRow;

						//-----------------------------------------------------------------------
				    	// 스타일 편집
				    	//-----------------------------------------------------------------------
				        for (var i = 0; i < sheet.rows.length; i++) {
				        	for (var ci = 0; ci < sheet.rows[i].cells.length; ci++) {
				            	sheet.rows[i].cells[ci].vAlign = "center";
				            	//정렬
				            	if( sheet.rows[i].type == 'header' ) {
				            		var cell = sheet.rows[i].cells[ci];
				            		//헤더일 경우
				            		cell.background = '#7a7a7a';
				            		cell.color = '#fff';
				            		cell.hAlign = 'center';
				            		cell.bold = true;
				            	}
				            }
				    	}

						//-----------------------------------------------------------------------
				    	// Excel File Name
				    	//-----------------------------------------------------------------------
				        e.workbook.fileName = $('#tf-dataSetCd').val() + '.xlsx';
					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_excelExport"});
					}
				},//end fn_excelExport()


				//-----------------------------------------------------------------------
				// Description :: fn_setDataField
				//-----------------------------------------------------------------------
				fn_setDataField : function(jsonData) {
					try {

						if( !mint.common.isEmpty(jsonData) ) {
							// Layer 1
							$('#hd-dataSetId').val( jsonData.dataSetId );
							$('#tf-dataSetCd').val( jsonData.cd );
							$('#tf-dataSetNm1').val( jsonData.name1 );
							$('#tf-dataSetNm2').val( jsonData.name2 );

							// Layer 2
							$('input:radio[name=rd-layout]:input[value=' + jsonData.isRoot + ']').prop('checked', true);
							$('#cb-encryptType').data('kendoDropDownList').value(jsonData.encryptType);
							$('#tf-length').val( jsonData.length );

							// Layer 3
							$('#cb-dataFormat').data('kendoDropDownList').value(jsonData.dataFormat);
							$('#tf-recordDelimiter').val(jsonData.recordDelimiter);
							$('#tf-fieldDelimiter').val(jsonData.fieldDelimiter);


							var regInfo = (mint.common.isEmpty( jsonData.regDate ) ? '' : mint.common.formatDate(jsonData.regDate)) + '(' + jsonData.regUser.userNm + ')';
							var modInfo = (mint.common.isEmpty( jsonData.modDate ) ? '' : mint.common.formatDate(jsonData.modDate)) + '(' + jsonData.modUser.userNm + ')';
							$('#tf-regDate').val( regInfo );
							$('#tf-modDate').val( modInfo );

							$('#hd-regId').val( jsonData.regId );
							$('#hd-modId').val( jsonData.modId );

							// TreeList
							var dataFieldList = jsonData.dataFieldList;
							var dataSource = $.main_detail.fn_getTreeListDataSource(dataFieldList);
							var treeList = $("#gd-TreeList").data('kendoTreeList');
							treeList.setDataSource(dataSource);

							//-----------------------------------------------------------------------
							// Description
							//-----------------------------------------------------------------------
							$("#ta-description").data("kendoEditor").value(jsonData.comments);
							$($('#ta-description').data().kendoEditor.body).prop('contenteditable', false);
							$($('#ta-description').data().kendoEditor.body).prop('disabled', true);

						} else {
							mint.common.alert('CW00019', 'Layout');
							mint.back(null);
						}
					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_setDataField"});
					}
				},//end fn_setDataField()

				//-----------------------------------------------------------------------
				// Description :: fn_used
				//-----------------------------------------------------------------------
				fn_used : function() {
					try {
			      		if( ! mint.common.isEmpty( $.main_detail.dataSetId ) ) {
							mint.callService(null, 'AN-06-00-003', 'REST-R07-AN-06-00',
								function(responseData) {
									if( !mint.common.isEmpty(responseData) ) {
										$('.used-cnt').text(responseData.length);
										$.main_detail.usedData = responseData;
									}
								},
								{
									errorCall : true, notificationView : false, params : {dataSetId : $.main_detail.dataSetId}
								}
							);
			      		}

					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_used"});
					}
				},//end fn_used()

				//-----------------------------------------------------------------------
				// Description :: fn_usedDetailGrid
				//-----------------------------------------------------------------------
				fn_usedDetailGrid : function(dataSource) {
					try {

						var hCSSCenter = {style: 'text-align: center; vertical-align:middle;'};
						var aCSSCenter = {style: 'text-align: center; white-space: nowrap;'};
						var aCSSLeft = {style: 'text-align: left; white-space: nowrap;'};
						var locked = false;

						var gridTemplate = function() {
							return {
					          	dataSource : dataSource,
								filterable: false,
								resizable: true,
					            sortable: false,
					            selectable: true,
					            scrollable: true,
								pageable : {
									refresh : false,
									pageSizes : mint.ui.getPageSizesS(),
									buttonCount : 5,
								},
								noRecords: true,
								columns: [
									{
										field: "integrationId",
										title: mint.label.getLabel('lb-154'),
										headerAttributes: hCSSCenter, attributes : aCSSLeft,
										width: "130px", locked: locked, expandable: true,
									},
									{
										field: "interfaceNm",
										title: mint.label.getLabel('lb-153'),
										headerAttributes: hCSSCenter, attributes : aCSSLeft,
										width: "130px", locked: locked,
									},
									{
										field: "businessId",
										hidden: true
									},
									{
										field: "businessCd",
										hidden: true
									},
									{
										field: "interfaceId",
										hidden: true
									},
									{
										field: "interfaceMid",
										hidden: true
									},
									{
										field: "dataSetId",
										hidden: true
									},
								],
								dataBound: function (e) {
									//TODO :: Workalound
									mint.common.setTimeout(function(){
										mint.ui.gridVerticalScrollBar(e);
									}, 10);

									//-----------------------------------------------------------------------
									// ROW / COL CSS 처리
									//-----------------------------------------------------------------------
									var items = e.sender.dataItems();
									if( items.length > 0 ) {
										for(var i = 0; i < items.length; i++ ) {
											var tr = e.sender.wrapper.find("tr[data-uid='" + items[i].uid + "']");
											tr.removeClass('k-alt');
										}
									}
	 							},
							};

						};

						$(".used-detail").kendoGrid(gridTemplate());
					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_usedDetailGrid"});
					}
				},//end fn_usedDetailGrid()

				//-----------------------------------------------------------------------
				// Description :: fn_delete
				//-----------------------------------------------------------------------
				// 1) 권한 체크(등록자 or 같은 조직)
				//  1.1) 권한이 없으면 Alert
				//  1.2) 권한이 있으면 Next Step
				// 2) 사용중여부 체크
				//  2.1) 사용중(O) -> Alert
				//  2.2) 사용중(X) -> 3) step
				// 3) goDelete
				//-----------------------------------------------------------------------
				fn_delete : function() {
					try {

						$.main_detail.fn_isAuthorized('3')
						.done(function(response) {
	 						$.main_detail.fn_isUsed()
	 						.done(function(response) {
	 							mint.common.debugLog('Used Check :: ' + response.flag + ' ' + response.msg);
	 							mint.common.alert(response.msg);
	 						})
	 						.fail(function(response) {
	 							if(response.flag == false) {
									$.main_detail.fn_goDelete();
	 							}
	 						});
						})
						.fail(function(response) {
							if(response.flag == false) {
								mint.common.alert(response.msg);
							}
						});

					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_delete"});
					}
				},//end fn_delete()

				//-----------------------------------------------------------------------
				// Description :: fn_update
				//-----------------------------------------------------------------------
				// 1) 권한 체크(등록자 or 같은 조직)
				//  1.1) 권한이 없으면 Alert
				//  1.2) 권한이 있으면 Next Step
				// 2) 사용중여부 체크
				//  2.1) 사용중(O) -> 3) step
				//  2.2) 사용중(X) -> 5) step
				// 3) 배포상태 체크
				//  3.1) 배포(O) -> 4) step
				//  3.2) 배포(X) -> 5) step
				// 4) 형상상태 체크
				//  4.1) 수정가능(O) -> 5) step
				//  4.4) 수정가능(X) -> Alert
				// 5) goUpdate
				//-----------------------------------------------------------------------
				fn_update : function() {
					try {

						$.main_detail.fn_isAuthorized('2')
						.done(function(response) {
	 						$.main_detail.fn_isUsed()
	 						.done(function(response) {
	 							mint.common.debugLog('Used Check :: ' + response.flag + ' ' + response.msg);

	 							var flag = mint.common.getEnvValue('system.model.deploy.front.test');
	 							if(!mint.common.isEmpty(flag) && flag[0] === 'true'){
	 								$.main_detail.fn_goUpdate();
	 							} else {
		 							$.main_detail.fn_usedDetailWindowOpen(false);
	 							}
	 						})
	 						.fail(function(response) {
	 							if(response.flag == false) {
									$.main_detail.fn_goUpdate();
	 							}
	 						});
						})
						.fail(function(response) {
							if(response.flag == false) {
								mint.common.alert(response.msg);
							}
						});

					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_update"});
					}
				},//end fn_update()

				//-----------------------------------------------------------------------
				// Description :: fn_modifyProcess
				//-----------------------------------------------------------------------
				fn_modifyProcess : function(selectedItem) {
					var deferred = $.Deferred();
					try {

						var interfaceMid = selectedItem.interfaceMid;
						var integrationId = selectedItem.integrationId;
						var businessCd = selectedItem.businessCd;


						$.main_detail.fn_isDeployed(interfaceMid)
						.then(function(response) {
							mint.common.debugLog('Deploy Check :: ' + response.flag + ' ' + response.msg);
							return $.main_detail.fn_isValidStatus(integrationId, businessCd);
						})
						.then(function(response) {
							mint.common.debugLog('Status Check :: ' + response.flag + ' ' + response.msg);
							$.main_detail.fn_goUpdate();
							deferred.resolve();
						})
						.fail(function(response) {
							if( !mint.common.isEmpty(response.flag) ) {
								//-----------------------------------------------------------------------
								//flag 가 있으면 normal
								//-----------------------------------------------------------------------
								mint.common.infoLog('$.main_detail.fn_modifyProcess : ' + JSON.stringify(response) );

								switch(response.type) {
									case 'DEPLOY' :
										if(response.flag == false) {
											$.main_detail.fn_goUpdate();
										}
										deferred.resolve();
										break;
									case 'STATUS' :
										if(response.flag == false) {
											mint.common.alert(response.msg);
										}
										deferred.reject();
										break;
									default :
										deferred.resolve();
										break;
								}

							} else {
								//-----------------------------------------------------------------------
								//flag 가 없으면 error
								//-----------------------------------------------------------------------
								mint.common.errorLog('$.main_detail.fn_modifyProcess : ' + response );
								deferred.reject();
							}
						});

					} catch( e ) {
						deferred.reject(e);
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_modifyProcess"});
					} finally {
						return deferred.promise();
					}
				},//end fn_modifyProcess()

				//-----------------------------------------------------------------------
				// Description :: fn_isUsed
				//-----------------------------------------------------------------------
				fn_isUsed : function() {
					var deferred = $.Deferred();
					var type = 'USED';
					try {

						mint.callService(null, screenName, 'REST-R06-AN-06-00',
							function(responseObject) {

								if( !mint.common.isEmpty(responseObject) && responseObject > 0 ) {
									var msg = mint.message.getMessage('CW00025', $("#tf-dataSetCd").val());
									deferred.resolve({type: type, flag: true, msg: msg});
								} else {
									var msg = mint.message.getMessage('CW00026', $("#tf-dataSetCd").val());
									deferred.reject({type: type, flag: false, msg: msg});
								}

							},
							{
								errorCall : true,
								notificationView : false,
								params : {dataSetId : $("#hd-dataSetId").val()}
							}

						);

					} catch( e ) {
						deferred.reject({type: type, msg: e});
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_isUsed"});
					} finally {
						return deferred.promise();
					}
				},//end fn_isUsed()

				//-----------------------------------------------------------------------
				// Description :: fn_isDeployed
				//-----------------------------------------------------------------------
				fn_isDeployed : function(interfaceMid) {
					var deferred = $.Deferred();
					var type = 'DEPLOY';
					try {

						mint.callService(null, screenName, 'REST-R01-RT-03-01',
							function(responseObject, errorCd, errorMsg) {
								if( !mint.common.isEmpty(responseObject) && responseObject == true ) {
									var msg = 'is deployed';
									deferred.resolve({type: type, flag: true, msg: msg});
								} else {
									var msg = 'is not deployed';
									deferred.reject({type: type, flag: false, msg: msg});
								}
							},
							{
								errorCall : true,
								notificationView : false,
								params 	: {interfaceMid : interfaceMid}
							}

						);

					} catch( e ) {
						deferred.reject({type: type, msg: e});
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_isDeployed"});
					} finally {
						return deferred.promise();
					}
				},//end fn_isDeployed()

				//-----------------------------------------------------------------------
				// Description :: fn_isValidStatus
				//-----------------------------------------------------------------------
				fn_isValidStatus : function(integrationId, businessCd) {
					var deferred = $.Deferred();
					var type = 'STATUS';
					try {

						var requestObject = {
							integrationId: integrationId,
							businessCd: businessCd
						};

						mint.callService(requestObject, screenName, 'REST-R01-RT-03-02',
							function(responseObject, errorCd, errorMsg) {
								if( !mint.common.isEmpty(responseObject) && responseObject == true ) {
									var msg = 'valid status';
									deferred.resolve({type: type, flag: true, msg: msg});
								} else {
									var msg = 'invalid status(' + mint.message.getMessage('BW00057') + ')';
									deferred.reject({type: type, flag: false, msg: msg});
								}
							},
							{
								errorCall : true,
								notificationView : false
							}

						);

					} catch( e ) {
						deferred.reject({type: type, msg: e});
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_isValidStatus"});
					} finally {
						return deferred.promise();
					}
				},//end fn_isValidStatus()

				//-----------------------------------------------------------------------
				// Description :: fn_isAuthorized
				//-----------------------------------------------------------------------
				fn_isAuthorized : function(itemType) {
					var deferred = $.Deferred();
					var type = 'AUTH';

					try {

						var flag = mint.common.getEnvValue('pep.per.mint.authority.check.data');
						if(!mint.common.isEmpty(flag) && flag[0] === 'true') {
							//-----------------------------------------------------------------------
							// Authority Check
							//-----------------------------------------------------------------------
							var requestObject = new Object();
							{
								requestObject.objectType = 'AuthorityRequest';
								requestObject.categoryCd = 'DATA';
								requestObject.itemType = itemType;
								requestObject.ownerId = mint.session.getUserId();
								requestObject.dataType = '2';
								requestObject.dataId = $("#hd-dataSetId").val();
							}

							mint.callService(requestObject, screenName, 'REST-R01-AU-01-01',
								function(responseObject, errorCd, errorMsg) {
									if( !mint.common.isEmpty(responseObject) && responseObject.authorized == true ) {
										var msg = '';
										deferred.resolve({type: type, flag: true, msg: msg});
									} else {
										var msg = mint.message.getMessage('CW00007', null);
										deferred.reject({type: type, flag: false, msg: msg});
									}
								},
								{
									errorCall : false,
									notificationView : false
								}
							);
						} else {
							//-----------------------------------------------------------------------
							// TEST MODE
							//-----------------------------------------------------------------------
							if( $('#hd-regId').val() == mint.session.getUserId() || $('#hd-modId').val() == mint.session.getUserId() || mint.session.isInterfaceAdmin() == 'Y' ) {
								var msg = '';
								deferred.resolve({type: type, flag: true, msg: msg});
							} else {
								var msg = mint.message.getMessage('CW00007', null);
								deferred.reject({type: type, flag: false, msg: msg});
							}
						}

					} catch( e ) {
						deferred.reject({type: type, msg: e});
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_isAuthorized"});
					} finally {
						return deferred.promise();
					}
				},//end fn_isAuthorized()

				//-----------------------------------------------------------------------
				// Description :: fn_goUpdate
				//-----------------------------------------------------------------------
				fn_goUpdate : function() {
					try {
						mint.setDetailView("Y");
						mint.common.setScreenParam("isModify", true);
						mint.common.setScreenParam('dataSetId', $('#hd-dataSetId').val());
						mint.move('../sub-an/AN-06-00-002');
					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_goUpdate"});
					}
				},//end fn_goUpdate()

				//-----------------------------------------------------------------------
				// Description :: fn_goDelete
				//-----------------------------------------------------------------------
				fn_goDelete : function() {
					try {
						var confirmCheck = mint.common.confirm('CI00003');
						if(confirmCheck) {
							mint.callService(null, screenName, 'REST-D01-AN-06-00'
								,function(jsonData) {
									mint.common.alert('CI00103', null);
						      		mint.move('../sub-an/AN-06-00-001');
								}
								,{
									 errorCall : false
									,params : { dataSetId : $.main_detail.dataSetId }
								}
							);
						}
					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_goDelete"});
					}
				},//end fn_goDelete()

				//-----------------------------------------------------------------------
				// Description :: fn_usedDetailWindowOpen
				//-----------------------------------------------------------------------
				fn_usedDetailWindowOpen : function(readOnly, options) {
					try {
						//-----------------------------------------------------------------------
						// sub window 를 attach 할 division select
						//-----------------------------------------------------------------------
						var subWindow = $('.mint-sub-window');
						if( mint.common.isEmpty(subWindow) || subWindow.size() == 0 ) {
							$('body').append($('<div class="mint-sub-window"><div class="used-detail"></div></div>'));
						}

						//-----------------------------------------------------------------------
						// 선택된 디비전에 컨텐츠를 붙인다
						//-----------------------------------------------------------------------
						var	ds = {
							data: mint.common.isEmpty($.main_detail.usedData) ? [] : $.main_detail.usedData,
							pageSize : mint.ui.getPageSizesS({'currentPage' : true})
						};
						$.main_detail.fn_usedDetailGrid(ds);

						if( readOnly ) {
							//-----------------------------------------------------------------------
							// subWindow Open
							//-----------------------------------------------------------------------
							$('.mint-sub-window').kendoDialog({
								title: mint.label.getLabel('lb-1060'), //전문I/O 사용 목록
					            modal: true,
					            draggable: true,
					            scrollable: false,
					            width: '1000px',
					            buttonLayout: 'normal',
					            closable: true,
					            close: function(e) {
					            	this.destroy();
					            }
							});
						} else {

							//-----------------------------------------------------------------------
							// subWindow Open
							//-----------------------------------------------------------------------
							$('.mint-sub-window').kendoDialog({
								title: mint.label.getLabel('lb-1061'), //형상관리 상태체크(인터페이스를 선택하세요)
					            modal: true,
					            draggable: true,
					            scrollable: false,
					            width: '1000px',
					            buttonLayout: 'normal',
					            closable: true,
					            actions: [
					                {
					                	text: mint.label.getLabel('lb-1062'), //상태체크
					                	primary: true,
					                	action: function(e) {

											var usedGrid = $(".used-detail").data("kendoGrid");
											var selectedItem = usedGrid.dataItem(usedGrid.select());

											if( mint.common.isEmpty(selectedItem) ) {
												mint.common.alert('BW00022');
												return false;
											} else {

												$.main_detail.fn_modifyProcess(selectedItem)
												.done(function() {
													var dialog = $('.mint-sub-window').data('kendoDialog');
													dialog.close();
												})
												.fail(function() {

												});
											}

											return false;
					                	}
					                },
					                { text: mint.label.getLabel('lb-143') },
					            ],
					            close: function(e) {
					            	this.destroy();
					            }
							});
						}

					} catch (e) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_usedDetailWindowOpen"});
					}
				}, //end fn_usedDetailWindowOpen

			}// end main
		});// end extends

		//=======================================================================
		// (4) 이벤트 핸들러 정의
		//=======================================================================

		//-----------------------------------------------------------------------
		// Description :: 이전 버튼 Click 이벤트
		//-----------------------------------------------------------------------
		$('.btn-back').on('click', function(e) {
			mint.back(null);
		});

		//-----------------------------------------------------------------------
		// Description :: 삭제 버튼 Click 이벤트
		//-----------------------------------------------------------------------
		$('.btn-delete').on('click', function(e) {
			$.main_detail.fn_delete();
		});

		//-----------------------------------------------------------------------
		// Description :: 수정 버튼 Click 이벤트
		//-----------------------------------------------------------------------
		$('.btn-update').on('click', function(e) {
			$.main_detail.fn_update();
        });

		//-----------------------------------------------------------------------
		// Description :: used 버튼 Click 이벤트
		//-----------------------------------------------------------------------
		$('.btn-used').on('click', function(e) {
			$.main_detail.fn_usedDetailWindowOpen(true);
        });

		//=======================================================================
		// (5) 기타 Function 정의
		//=======================================================================

		//=======================================================================
		// (6) 화면 로딩시 실행할 항목 기술
		//=======================================================================
		$.main_detail.fn_init();
		mint.label.attachLabel(null);

	});
</script>