<!--
	Screen ID : AN-06-00-001
	Screen NM : 데이타 레이아웃 조회
		[변경 이력]
	* 20170124-001
-->

<!--location -->
<div class="row wrapper border-bottom white-bg page-heading">
	<div id="oldPath" class="col-lg-5">
		<h2><lb class="lb-10"></lb></h2>
		<ol class="breadcrumb">
			<li><lb class="lb-1025"></lb></li>
	        <li><lb class="lb-1025"></lb></li>
	        <li class="active"><strong><lb class="lb-10"></lb></strong></li>
 		</ol>
	</div>
	<div id="menuPath" class="col-lg-5">
    </div>
</div>
<!--location end-->

<!--wrapper wrapper-content-->
<div class="wrapper wrapper-content animated fadeInRight">
	<div class="row">
		<div class="col-lg-12">
			<div class="ibox float-e-margins">
				<div class="ibox-title">
					<h5><lb class="lb-78"></h5>&nbsp;&nbsp;&nbsp;
					<div class="ibox-tools">
						<a class="help-over-pannel" onclick="mint.ui.help(this, 'AP00000005','H002')"></a>
                   		<a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
					</div>
					<div style="float: right; padding: 0px 20px 0px 0px;">
						<a class="btn btn-w-m btn-default btn-outline btn-clear"><i class="fa fa-check "></i> <lb class="lb-79"></lb></a>
						<a class="btn btn-w-m btn-default btn-outline btn-search"><i class="fa fa-search "></i> <lb class="lb-10"></lb></a>
						<a class="btn btn-w-m btn-primary btn-register"><i class="fa fa-check "></i> <lb class="lb-11"></a>
					</div>
				</div>

             	<div class="ibox-content">
               		<div class="row">
						<div class="col-sm-4">
                            <div class="form-group">
                            	<span class="label-tag-4"><lb class="lb-1006">코드(CD)</lb></span>
                            	<input id="s-cb-datasetCd" type="text" class="input-tag-4">
                           	</div>
						</div>

						<div class="col-sm-4">
                            <div class="form-group">
                            	<span class="label-tag-4"><lb class="lb-1037">한글명</lb></span>
                            	<input id="s-cb-datasetNm1" type="text" class="input-tag-4">
                           	</div>
						</div>

						<div class="col-sm-4">
                            <div class="form-group">
                            	<span class="label-tag-4"><lb class="lb-1038">영문명</lb></span>
                            	<input id="s-cb-datasetNm2" type="text" class="input-tag-4">
                           	</div>
						</div>

						<hr class="hr-space">

                        <div class="col-sm-4">
                            <div class="form-group">
                                <span class="label-tag-4"><lb class="lb-494">구분</lb></span>
								<span style="padding: 0px 0px 0px 10px;">
					            	<div class="radio radio-inline" style="padding-left:20px; padding-top:5px;">
										<span class="radio-info" style="padding:0px 20px 0px 0px">
											<input id="s-rd-layout-a" type="radio" name="s-rd-layout" value="" checked="checked"><label for="s-rd-layout-y"><lb class="lb-89">전체</lb></label>
										</span>
										<span class="radio-info" style="padding:0px 20px;">
											<input id="s-rd-layout-y" type="radio" name="s-rd-layout" value="Y"><label for="s-rd-layout-y"><lb class="lb-1039">전문I/O</lb></label>
										</span>
		                                <span class="radio-danger" style="padding:0px 20px;">
		                                	<input id="s-rd-layout-n" type="radio" name="s-rd-layout" value="N"><label for="s-rd-layout-n"><lb class="lb-1030">복합유형</lb></label>
		                                </span>
                                	</div>
                                </span>
                            </div>
                        </div>

						<div style='display:none;'>
						<div class="col-sm-4">
                            <div class="form-group">
								<span class="label-tag-4"><lb class="lb-48">유형</lb></span>
								<input id="s-cb-dataFormat" name="dataFormat" type="text" class="input-tag-4">
							</div>
						</div>
						</div>

						<div class="col-sm-4">
							<div class="form-group">
								<span class="label-tag-4"><lb class="lb-1018">암호화</lb></span>
								<input id="s-cb-encryptType" name="encryptType" type="text" class="input-tag-4">
							</div>
						</div>
                   	</div><!--row end-->

                </div><!--ibox-content end-->
           	</div><!--ibox float-e-margins end-->
		</div><!--col-lg-12 end-->
	</div><!--row end-->

	<div class="row">
 		<div class="col-lg-12">
            <div class="ibox float-e-margins">
                <div class="ibox-title">
					<h5><lb class="lb-91"></h5>
                    <div class="ibox-tools">
                   		<a class="help-over-pannel" onclick="mint.ui.help(this, 'AP00000005','H001')"></a>
                   		<a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
					</div>
					<div style="float: right; padding: 0px 20px 0px 0px;">
						<a class="btn btn-w-m btn-default btn-outline btn-datasetcompare" style="display:none;"><i class="fa fa-search "></i> <lb class="lb-1027"></lb></a>
					</div>
               	</div>

                <div class="ibox-content">
	     			<div id="grid"></div>
	     			<div id="grid-excel" style="display:none"></div>
               	</div>
            </div><!--ibox float-e-margins end-->
       	</div><!--col-lg-12 end-->
	</div><!--row end-->
</div>

<script>
	$(document).ready(function() {
		//=======================================================================
		//(1) function 및 variable scope 설정 :: (메인은 main, 팝업 및 서브는 sub)
		//=======================================================================
		screenName = "AN-06-00-001";
		$.extend({
			main : {
				//=======================================================================
				// (2) Screen 에서 사용할 variable 정의
				//=======================================================================
				//-----------------------------------------------------------------------
				// [페이지 관련] - Page Control Variable
				//-----------------------------------------------------------------------
				page : 1,
				perCount : 1,
				totalCount : 0,
				//=======================================================================
				// (3) Screen 에서 사용할 function 정의
				//=======================================================================

				//-----------------------------------------------------------------------
				// Description :: 화면 초기화
				//-----------------------------------------------------------------------
				fn_init : function() {
					try {
						mint.init('$.main.fn_initCallback');
					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main.fn_init"});
					}
				},//end fn_init()

				//-----------------------------------------------------------------------
				// Description :: 화면 초기화 콜백
				//-----------------------------------------------------------------------
				fn_initCallback : function() {
					try {
						mint.common.siteMenuPath(screenName);
						$.main.fn_initComponent();
					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main.fn_initCallback"});
					}
				},//end fn_initCallback()

				//-----------------------------------------------------------------------
				// Description :: fn_initComponent
				//-----------------------------------------------------------------------
				fn_initComponent : function(options) {
					try {
						// Variables
						$.main.YesNoValue = [{ nm: 'Yes', cd: 'Y' }, { nm: 'No', cd: 'N' }];
						$.main.encryptTypeUsedYN = true;

						//-----------------------------------------------------------------------
						// 검색 필드
						//-----------------------------------------------------------------------
						{
							//TODO :: Message
							var noDataTemplate = '검색어를 입력하세요';

							// DataSet Cd
					    	mint.ui.setKendoComboBox('s-cb-datasetCd', mint.ui.getKendoServerFilter(screenName, 'REST-R01-CO-80-01'), 'cd', 'cd', {
					    		noDataTemplate: noDataTemplate
					    	});

							// DataSet Nm1
					    	mint.ui.setKendoComboBox('s-cb-datasetNm1', mint.ui.getKendoServerFilter(screenName, 'REST-R01-CO-80-01'), 'nm1', 'nm1', {
					    		noDataTemplate: noDataTemplate
					    	});

							// DataSet Nm2
					    	mint.ui.setKendoComboBox('s-cb-datasetNm2', mint.ui.getKendoServerFilter(screenName, 'REST-R01-CO-80-01'), 'nm2', 'nm2', {
					    		noDataTemplate: noDataTemplate
					    	});

							// etc
		 					mint.ui.setKendoComboBox('s-cb-dataFormat', mint.common.commonCodeMap.get("cds").AN07, 'nm', 'cd');
							if($.main.encryptTypeUsedYN == true) {
								mint.ui.setKendoComboBox('s-cb-encryptType', $.main.YesNoValue, 'nm', 'cd');
							} else {
								mint.ui.setKendoComboBox('s-cb-encryptType', mint.common.commonCodeMap.get("cds").AN08, 'nm', 'cd');
							}
						}

						//-----------------------------------------------------------------------
						// Grid
						//-----------------------------------------------------------------------
						$.main.fn_initGrid();

					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_initComponent"});
					}
				},//end fn_initComponent()

	            //-----------------------------------------------------------------------
	            // Description :: 검색 조건 초기화 함수
	            //-----------------------------------------------------------------------
	            fn_resetComponent : function() {
	                try {
	                	//Text & ComboBox
						$('input:text').each(function(){
							$(this).val('');
						});

	                	//Radion Button
						$('input:radio[value=""]').each(function(){
							$(this).prop("checked", true);
						});
	                } catch( e ) {
	                    mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main.fn_resetComponent"});
	                }
	            },

				//-----------------------------------------------------------------------
				// Description :: 엔터키 이벤트
				//-----------------------------------------------------------------------
				fn_onKeyDownSearchEvent : function() {
					try {
						if(event.keyCode == 13) {
							$.main.fn_getData(true);
				     	}
					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main.fn_onKeyDownSearchEvent"});
					}
				},//end fn_onKeyDownSearchEvent()



				//-----------------------------------------------------------------------
				// Description ::  fn_initGrid
				//-----------------------------------------------------------------------
				fn_initGrid : function() {
					try {
						var fixLeftGridWidth = $('#grid')[0].clientWidth;
						var fixLeftCoulmnWidth = fixLeftGridWidth / 10;

						var hCSSCenter = {style: 'text-align: center; vertical-align:middle;'};
						var aCSSCenter = {style: 'text-align: center; white-space: nowrap;'};
						var aCSSLeft = {style: 'text-align: left; white-space: nowrap;'};


						var columns = [
							{
								title : "",
								template : "<input type='checkbox' name='dataset-list-checkbox' class='if-popup-ifCheckbox' onclick='$.main.fn_checkDataSetGridRow(this)' >",
								headerAttributes: hCSSCenter, attributes: aCSSCenter,
								width : "30px",
								hidden: true
							},
							{
								title: mint.label.getLabel('lb-494'), //'구분'
								field: "isRoot",
								template: '#=$.main.fn_getGridTemplateIsRoot(isRoot)#',
								headerAttributes: hCSSCenter, attributes: aCSSCenter,
								width: fixLeftCoulmnWidth / 2,
							},
							{
								title: mint.label.getLabel('lb-1006'), //'코드(CD)'
								field: "cd",
								template: "<span title='${cd}'>${cd}</span>",
								headerAttributes: hCSSCenter, attributes: aCSSCenter,
								width: fixLeftCoulmnWidth,
							},
							{
								title: mint.label.getLabel('lb-1037'), //'한글명'
								field: "name1",
								template: "<span title='${name1}'>${name1}</span>",
								headerAttributes: hCSSCenter, attributes: aCSSCenter,
								width: fixLeftCoulmnWidth,
							},
							{
								title: mint.label.getLabel('lb-1038'), //'영문명'
								field: "name2",
								template: "<span title='${name2}'>${name2}</span>",
								headerAttributes: hCSSCenter, attributes: aCSSCenter,
								width: fixLeftCoulmnWidth,
							},

							{
								title: mint.label.getLabel('lb-48'), //'유형'
								field: "dataFormatNm",
								template: "<span title='${dataFormatNm}'>${dataFormatNm}</span>",
								headerAttributes: hCSSCenter, attributes: aCSSCenter,
								width: fixLeftCoulmnWidth / 2,
								hidden: true
							},
							{
								title: mint.label.getLabel('lb-1018'), //'암호화'
								field: "encryptType",
								template: "<span title='${encryptTypeNm}'>${encryptType}</span>",
								headerAttributes: hCSSCenter, attributes: aCSSCenter,
								width: fixLeftCoulmnWidth / 2,
							},
							{
								title: mint.label.getLabel('lb-1040'), //'사용여부'
								field: "use",
								template: "<span title='${use}'>${use}</span>",
								headerAttributes: hCSSCenter, attributes: aCSSCenter,
								width: fixLeftCoulmnWidth / 2,
								hidden: true
							},
							{
								title: mint.label.getLabel('lb-1041'), //'맵핑여부'
								field: "isMapped",
								template: "<span title='${isMapped}'>${isMapped}</span>",
								headerAttributes: hCSSCenter, attributes: aCSSCenter,
								width: fixLeftCoulmnWidth / 2,
								hidden:true
							},
							{
								title: mint.label.getLabel('lb-71'),
								field: "regDate",
								template: "#=kendo.toString(kendo.parseDate(regDate, 'yyyyMMddHHmm'), 'yyyy/MM/dd')#",
								headerAttributes: hCSSCenter, attributes: aCSSCenter,
								width: fixLeftCoulmnWidth / 2,
							},
							{
								title: mint.label.getLabel('lb-535'),
								field: "regUser.userNm",
								template: "<span title='${regUser.userNm}'>${regUser.userNm}</span>",
								headerAttributes: hCSSCenter, attributes: aCSSCenter,
								width: fixLeftCoulmnWidth / 2,
							},
						];


						//-----------------------------------------------------------------------
						// GRID
						//-----------------------------------------------------------------------
						var grid = $("#grid").kendoGrid({
							dataSource: $.main.fn_getGridDataSource({total:0}, null),
							filterable: false,
						    sortable : false,
							selectable: "row",
							resizable: true,
							pageable : {
								refresh : false,
								pageSizes : mint.ui.getPageSizesS(),
						    	buttonCount : 5,
					            change:function(e) {
					            	$.main.dataSetListCheckbox = {};
						       	}
							},
						    toolbar: ["excel"],
						    excel: {
								allPages: true,
								filterable: true,
								fileName: mint.common.remakeYYMMDD(new Date()).substring(0, 14) + mint.label.getLabel('lb-10') + '.xlsx',
								//proxyURL : $.main.fn_excelExport()
						    },
						    messages: {
						        commands: {
						          excel: mint.label.getLabel('lb-508')
						        }
						    },
						    excelExport: function(e) {
						    	$.main.fn_excelExport();
						        e.preventDefault();
					      	},
						    columns: columns,
						    dataBound: function (e) {
						    	if(0 == $("#grid").data('kendoGrid').dataSource.view().length) {
						    		var gridHeight = window.innerHeight - ($('.navbar-static-top').height() + $('.page-heading').height() + $('.col-lg-12').height());

						    		$("#grid").children(".k-grid-content").height(gridHeight /3.5);
						    		$("#grid").children(".k-grid-content-locked").height(gridHeight / 3.5);
						    	} else {
						    		$("#grid").children(".k-grid-content").height('auto');
							    	$("#grid").children(".k-grid-content-locked").height('auto');
						    	}

						    	mint.ui.gridVerticalScrollBar(e);
						    },
						    page: function(e) {
						    	$.main.fn_gridPageEvent(e);
						    },
						});
						//-----------------------------------------------------------------------
						// [페이지 관련] - 그리드 페이지 컨트롤 이벤트 설정
						//-----------------------------------------------------------------------
						{
							var pager = $('#grid').data('kendoGrid').pager;
							pager.element.bind('change', function(e) {
								$.main.fn_gridItemPerPageEvent(e);
							});
							$.main.perCount = pager.pageSize();
						}

						//-----------------------------------------------------------------------
						// GRID-EXCEl
						//-----------------------------------------------------------------------
						var grid = $("#grid-excel").kendoGrid({
							dataSource: $.main.fn_getGridDataSource({total:0}, null),
						    toolbar: ["excel"],
						    excel: {
								allPages: true,
								filterable: true,
								fileName: mint.common.remakeYYMMDD(new Date()).substring(0, 14) + '.xlsx',
						    },
						    messages: {
						        commands: {
						          excel: mint.label.getLabel('lb-508')
						        }
						    },
						    excelExport: function(e) {
								//-----------------------------------------------------------------------
						    	// 스타일 편집
						    	//-----------------------------------------------------------------------
						        var sheet = e.workbook.sheets[0];
						        for (var i = 0; i < sheet.rows.length; i++) {
						        	for (var ci = 0; ci < sheet.rows[i].cells.length; ci++) {
						            	sheet.rows[i].cells[ci].vAlign = "center";
						            	//정렬
						            	if( sheet.rows[i].type == 'header' ) {
						            		//헤더일 경우
						            		sheet.rows[i].cells[ci].hAlign = "center";
						            		sheet.rows[i].cells[ci].bold = true;
						            	}
						            }
						    	}
					      	},
						    columns: columns,
						});


					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main.fn_initGrid"});
					}
				},//end fn_initGrid()

				//-----------------------------------------------------------------------
				// Description :: fn_getGridDataSource
				//-----------------------------------------------------------------------
				fn_getGridDataSource : function(requestObject, responseObject) {
					try {
						var pageSize =  mint.ui.getPageSizesS({'currentPage' : true});
						var	dataSource = new kendo.data.DataSource({
							data: responseObject,
							page: $.main.page,
							pageSize: mint.common.isEmpty(responseObject) ?  pageSize : $.main.perCount,
							serverPaging: true,
							schema: {
								model: $.main.fn_getGridModel(),
								total: function() {
									return ($.main.totalCount = requestObject.total);
								}
							}
						});

						return dataSource;
					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main.fn_getGridDataSource"});
					}
				},//end fn_getGridDataSource()

				//-----------------------------------------------------------------------
				// Description ::fn_getGridModel
				//-----------------------------------------------------------------------
				fn_getGridModel : function() {
					try {
						var UserModel = new kendo.data.Model.define({
		            		id: "userId",
		            		fields: {
		            			objectType	: {editable: false, nullable: false, defaultValue: "User"},
		            			userId	    : {editable: false, nullable: false, defaultValue: ""},
		            			userNm	    : {editable: false, nullable: false, defaultValue: ""},
		            			password	: {editable: false, nullable: false, defaultValue: ""},
		            			companyNm	: {editable: false, nullable: false, defaultValue: ""},
		            			cellPhone   : {editable: false, nullable: false, defaultValue: ""},
		            			phone	    : {editable: false, nullable: false, defaultValue: ""},
		            			email	    : {editable: false, nullable: false, defaultValue: ""},
		            		}
						});

						var GridModel = new kendo.data.Model.define({
		            		fields: {
		            			dataSetId: {editable: false, nullable: false, defaultValue: ""},
			            		name1: {editable: false, nullable: false, defaultValue: ""},
			            		name2: {editable: false, nullable: false, defaultValue: ""},
			            		cd: {editable: false, nullable: false, defaultValue: ""},
			            		dataFormatNm: {editable: false, nullable: false, defaultValue: ""},
			            		encryptTypeNm: {editable: false, nullable: false, defaultValue: ""},
			            		regDate: {editable: false, nullable: false, defaultValue: ""},
			            		user: {editable: false, nullable: false, defaultValue: new UserModel()},
		            		},
		            		expanded: true
						});

						return GridModel;

					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main.fn_getGridModel"});
					}
				}, //end fn_getGridModel()

				//-----------------------------------------------------------------------
				// Description :: fn_getGridTemplateIsRoot
				//-----------------------------------------------------------------------
				fn_getGridTemplateIsRoot : function(isRoot) {
					try {
						var returnVal = '';
						if(!mint.common.isEmpty(isRoot) && isRoot == 'Y') {
							returnVal = mint.label.getLabel('lb-1039'); //'전문I/O'
						} else {
							returnVal = mint.label.getLabel('lb-1030'); //'복합유형'
						}
						return returnVal;
					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main.fn_getGridTemplateIsRoot"});
					}
				},//end fn_getGridTemplateIsRoot()

				//-----------------------------------------------------------------------
				// Description :: [페이지 관련] - Grid Page Event
				//-----------------------------------------------------------------------
				fn_gridPageEvent : function(event) {
					try {
						$.main.page     = parseInt(event.page);
						$.main.perCount = parseInt(event.sender.pager.pageSize());

						$.main.fn_getData(false);
					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "fn_gridPageEvent"});
					}
				},//end fn_gridPageEvent()

				//-----------------------------------------------------------------------
				// Description :: [페이지 관련] - Grid ItemPerPage Event
				//-----------------------------------------------------------------------
				fn_gridItemPerPageEvent : function(event) {
					try {
						var grid = $('#grid').data('kendoGrid');
						if( $.main.perCount != grid.pager.pageSize() ) {
							$.main.perCount = grid.pager.pageSize();
							// 조회가 완료된 이후 페이지 값이 변경되면, 다시 조회하여 초기화 한다
							if( grid.dataSource.total() > 0 ) {
								$.main.fn_getData(true);
							}
						}
					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "fn_gridItemPerPageEvent"});
					}
				},//end fn_gridItemPerPageEvent()

				//-----------------------------------------------------------------------
				// Description :: 조회 버튼 Click 이벤트
				//-----------------------------------------------------------------------
				fn_getData : function(isInit) {
					try {
						var requestObject = $.main.fn_getRequestObject(isInit);

					    //데이터 조회
					    mint.callService(requestObject, 'AN-06-00-001', 'REST-R01-AN-06-00', '$.main.fn_setData', {errorCall : true, includeRequest : true});

					    $.main.dataSetListCheckbox = {};
					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "fn_getData"});
					}
				},//end fn_getData()


				//-----------------------------------------------------------------------
				// Description :: fn_excelExport
				//-----------------------------------------------------------------------
				fn_excelExport : function() {
					try {
						var requestObject = $.main.fn_getRequestObject(true);
						requestObject.page = 1;
						requestObject.perCount = $.main.totalCount;

					    //데이터 조회
					    mint.callService(requestObject, 'AN-06-00-001', 'REST-R01-AN-06-00', function(reqeustObject, responseObject) {
							var dataSource = new kendo.data.DataSource({
								  data: responseObject
							    , page:1
							    , pageSize:mint.ui.getPageSizesS({'currentPage' : true})
							});

							var gridExcel = $("#grid-excel").data("kendoGrid");
							gridExcel.setDataSource(dataSource);
						    gridExcel.saveAsExcel();

					    }, {errorCall : true, includeRequest : true});
					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "fn_excelExport"});
					}
				},//end fn_excelExport()

				//-----------------------------------------------------------------------
				// Description :: fn_getRequestObject
				//-----------------------------------------------------------------------
				fn_getRequestObject : function(isInit) {
					try {
						var requestObject = new Object();
						requestObject.dataSetName1 = $("#s-cb-datasetNm1").val();
						requestObject.dataSetName2 = $("#s-cb-datasetNm2").val();
						requestObject.dataSetCd = $("#s-cb-datasetCd").val();
						requestObject.dataFormat = $("#s-cb-dataFormat").val();
						requestObject.encryptType = $("#s-cb-encryptType").val();
						requestObject.isRoot = $('input:radio[name="s-rd-layout"]:checked').val();

						//-----------------------------------------------------------------------
						// [페이지 관련] - page, perCount 설정
						//-----------------------------------------------------------------------
						{
							if( isInit ) {
								$.main.page = 1;
								requestObject.total = 0;
							} else {
								requestObject.total = $.main.totalCount;
							}

							requestObject.page     = $.main.page;
							requestObject.perCount = $.main.perCount;
						}

						return requestObject;

					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "fn_getRequestObject"});
					}
				},//end fn_getRequestObject()

				//-----------------------------------------------------------------------
				// Description :: 조회 버튼 Click 이벤트 - Grid Data 설정
				//-----------------------------------------------------------------------
				fn_setData : function(requestObject, responseObject) {
					try {
						var	dataSource = $.main.fn_getGridDataSource(requestObject, responseObject);
						$("#grid").data("kendoGrid").setDataSource(dataSource);
					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main.fn_setData"});
					}
				},//end fn_setData()

				//-----------------------------------------------------------------------
				// Description :: 인터페이스 리스트 - 그리드 체크박스 클릭 이벤트 (인터페이스 상세 이동)
				//-----------------------------------------------------------------------
				fn_checkDataSetGridRow : function(node) {
					try {
					    var checked = node.checked,
					    row = $(node).closest("tr"),
					    grid = $("#grid").data("kendoGrid"),
					    dataItem = grid.dataItem(row);

					    $.main.dataSetListCheckbox[dataItem.uid] = {'checked':checked, 'dataItem':dataItem};

					    if (checked) {
					        //-select the row
					        row.addClass("k-state-selected");
					    } else {
					        //-remove selection
					        row.removeClass("k-state-selected");
					    }
					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main.fn_checkDataSetGridRow"});
					}
				},//end fn_checkDataSetGridRow()

				//-----------------------------------------------------------------------
				// Description :: Grid DBClick 이벤트 - 상세 화면 이동
				//-----------------------------------------------------------------------
				fn_moveDataLayOutDetail : function() {
					try {
						var entityGrid = $("#grid").data("kendoGrid");
				        var selectedItem = entityGrid.dataItem(entityGrid.select());

				        mint.setDetailView('Y');
				        mint.common.setScreenParam("caller", "AN-06-00-001");
				        mint.common.setScreenParam("dataSetId", selectedItem.dataSetId);
				        //mint.common.setScreenParam("screenType", "R");
			      		var options = mint.common.getScreenParam("options");
			      		mint.move('../sub-an/AN-06-00-003', options);	//데이터셋 상세 정보 페이지
					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main.fn_moveDataLayOutDetail"});
					}
				},//end fn_moveDataLayOutDetail()

				//-----------------------------------------------------------------------
				// Description :: Grid DBClick 이벤트 - 상세 화면 이동
				//-----------------------------------------------------------------------
				fn_dataSetCompare : function() {
					try {
						var checkboxCount = $("input[name=dataset-list-checkbox]:checked").length;

						if(0 == checkboxCount) {
							mint.common.alert('BW00022', null);			//mint.message.js에 해당 메시지 추가
						} else if(2!=checkboxCount){
							mint.common.alert('BW00021', null);
						} else {
							var dataSetList = [];
							for(var j in $.main.dataSetListCheckbox){
								if($.main.dataSetListCheckbox[j].checked) {
									var tempDataSetObject = new Object();
									//tempDataSetObject.dataSetId = $.main.dataSetListCheckbox[j].dataItem.dataSetId;
									tempDataSetObject = $.main.dataSetListCheckbox[j].dataItem;
									dataSetList.push(tempDataSetObject);
								}
			 				}
							mint.setDetailView('Y');
							mint.common.setScreenParam("dataSetList",dataSetList);
					        mint.common.setScreenParam("caller", "AN-05-00-001");
					        mint.common.setScreenParam("screenType", "R");
				      		//var options = mint.common.getScreenParam("options");
				      		mint.move('../sub-an/AN-05-00-002');		//비교 화면
						}
					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main.fn_dataSetCompare"});
					}
				}//end fn_dataSetCompare()
			}// end main
		});// end extends

		//=======================================================================
		// (4) 이벤트 핸들러 정의
		//=======================================================================

		//-----------------------------------------------------------------------
		// Description :: 검색조건 초기화 클릭
		//-----------------------------------------------------------------------
		$('.btn-clear').on('click', function() {
        	$.main.fn_resetComponent();
    	});
		//-----------------------------------------------------------------------
		// Description :: 조회 버튼에 Click 이벤트 설정
		//-----------------------------------------------------------------------
		$(".btn-search").click(function () {
			$.main.fn_getData(true);
        });

		//-----------------------------------------------------------------------
		// Description ::  들옥  Click 이벤트 설정
		//-----------------------------------------------------------------------
		$(".btn-register").click(function () {
			mint.move('../sub-an/AN-06-00-002',{CRUDPS:'C', detailView:'Y'});
        });

		//-----------------------------------------------------------------------
		// Description ::  레이아웃비교.  Click 이벤트 설정
		//-----------------------------------------------------------------------
		$(".btn-datasetcompare").click(function () {
			$.main.fn_dataSetCompare();
        });

		//-----------------------------------------------------------------------
		// Description :: 그리드 Row DBClick 이벤트 설정 (상세 조회)
		//-----------------------------------------------------------------------
		$('#grid').on('dblclick', "tr.k-state-selected", function () {
			$.main.fn_moveDataLayOutDetail();
		});

		//=======================================================================
		// (5) 기타 Function 정의
		//=======================================================================

		//=======================================================================
		// (6) 화면 로딩시 실행할 항목 기술
		//=======================================================================
		$.main.fn_init();
		mint.label.attachLabel(null);

	});


</script>