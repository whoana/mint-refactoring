<!--
	Screen ID : AN-01-01-002
	Screen NM : 인터페이스 + 모델 등록/수정[신한생명]
-->

<!--location -->
<div class="row wrapper border-bottom white-bg page-heading">
	<div class="col-lg-5">
 		<h2 class="lb-change"><lb class="lb-11"></lb></h2>
		<ol class="breadcrumb">
	        <li><lb class="lb-9"></lb></li>
	        <li class="active"><strong class="lb-change"><lb class="lb-11"></lb></strong></li>
		</ol>
	</div>
	<!--button-->
	<div class="col-lg-7">
		<div class="title-action" >
		</div>
	</div>
	<!--button end-->
</div>
<!--location end-->

<!--wrapper wrapper-content-->
<div class="wrapper wrapper-content animated fadeInRight" >

	<div class="row">
		<div class="col-lg-12">
			<div class="ibox float-e-margins">
				<div class="ibox-title">
					<h5><lb class="lb-109"></lb></h5>
                    <div class="ibox-tools" id="requirement-help">
                    	<a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
					</div>
					<div style="float: right; padding: 0px 20px 0px 0px;">
			            <a class="btn btn-w-m btn-default btn-outline btn-save"><i class="fa fa-save"></i> <lb class="lb-310"></lb></a>
			            <a class="btn btn-w-m btn-default btn-outline btn-cancel" style="display:none;"><i class="fa fa-times"></i> <lb class="lb-143"></lb></a>
			            <a class="btn btn-w-m btn-default btn-outline btn-back"><i class="fa fa-reply"></i> <lb class="lb-311"></lb></a>
					</div>
				</div>

              	<div class="ibox-content">
                   	<div class="row">
						<div class="col-sm-4">
							<div class="form-horizontal">
								<div class="form-group">
									<label class="label-tag-4"><lb class="lb-3002"></lb></label>
									<input id="tf-businessDisplayNm" name="businessDisplayNm" type="text" class="input-tag-4 k-textbox" placeholder="" readonly="readonly">
									<input id="hd-businessId" name="businessId" type="hidden">
									<input id="hd-businessCd" name="businessCd" type="hidden">
									<input id="hd-businessNm" name="businessNm" type="hidden">
								</div>
							</div>
						</div>

						<div class="col-sm-4">
                       		<div class="form-horizontal">
                       			<div class="form-group">
									<label class="label-tag-4"><lb class="lb-9999">권한그룹</lb></label>
									<input id="cb-groupId" name="groupId" type="combobox" class="input-tag-4">
								</div>
							</div>
						</div>

						<div class="col-sm-4" style="display:none;">
							<div class="form-horizontal">
								<div class="form-group">
									<label class="label-tag-4"><lb class="lb-3003"></lb></label>
									<input id="tf-requirementNm" name="requirementNm" type="text" class="input-tag-4 k-textbox" placeholder="">
									<input id="hd-requirementNm" name="requirementId" type="hidden">
									<input id="hd-requirementId" name="requirementId" type="hidden">
								</div>
							</div>
						</div>

						<hr class="hr-space">

						<div class="col-sm-4">
							<div class="form-horizontal">
                               	<div class="form-group">
                               		<label class="label-tag-4"><lb class="lb-3004"></lb></label>
                               		<input id="tf-interfaceNm" name="interfaceNm" type="text" class="input-tag-4 k-textbox" placeholder="">
                               		<input id="hd-interfaceId" name="interfaceId"type="hidden">
                              	</div>
							</div>
						</div>
						<div class="col-sm-4">
							<div class="form-horizontal">
	                            <div class="form-group">
	                            	<label class="label-tag-4"><lb class="lb-3005"></lb></label>
                                	<input id="tf-integrationId" name="integrationId" type="text" class="input-tag-4 k-textbox" placeholder="">
                              	</div>
							</div>
						</div>
						<div class="col-sm-4">
							<div class="form-horizontal">
								<div class="form-group">
									<label class="label-tag-4"><lb class="lb-3006"></lb></label>
									<input id="tf-statusNm" name="statusNm" type="text" class="input-tag-4 input-tag-disabled k-textbox" style="text-align:center;" placeholder="" readonly="readonly" disabled="disabled">
									<input id="hd-statusCd" name="statusCd" type="hidden">
								</div>
							</div>
						</div>

						<hr class="hr-space">

						<div class="col-sm-12">
							<div class="b-col"></div>
						</div>

						<hr class="hr-space">

						<div class="col-sm-4" style="display:none;">
							<div class="form-horizontal">
                               	<div class="form-group">
                               		<label class="label-tag-4"><lb class="lb-3007">등록자</lb></label>
                               		<input id="tf-regUserNm"    name="regUserNm"    type="text" class="input-tag-4 input-tag-disabled k-textbox" style="text-align:center;" placeholder="" readonly="readonly" disabled="disabled">
                               		<input id="hd-regUserId"    name="regUserId"    type="hidden">
                               		<input id="hd-regCellPhone" name="regCellPhone" type="hidden">
                               		<input id="hd-regPhone"     name="regPhone"     type="hidden">
                               		<input id="hd-regEmail"     name="regEmail"     type="hidden">
                              	</div>
							</div>
						</div>
						<div class="col-sm-4">
							<div class="form-horizontal">
	                            <div class="form-group">
	                            	<label class="label-tag-4"><lb class="lb-3008">등록일</lb></label>
                                	<input id="tf-regDate" name="regDate" type="dates" class="input-tag-4 input-tag-disabled k-textbox" style="text-align:center;" placeholder="" readonly="readonly" disabled="disabled">
                              	</div>
							</div>
						</div>
						<div class="col-sm-4">
							<div class="form-horizontal">
								<div class="form-group">
									<label class="label-tag-4"><lb class="lb-3009">수정일</lb></label>
									<input id="tf-modDate" name="modDate" type="dates" class="input-tag-4 input-tag-disabled k-textbox" style="text-align:center;" placeholder="" readonly="readonly" disabled="disabled">
								</div>
							</div>
						</div>
					</div><!-- end row -->
           		</div><!-- end ibox-content -->
           	</div>
       	</div>
   	</div>

	<div class="row">
		<div class="col-lg-12">
			<div class="tabs-container">
				<div class="tabs-lefts">
					<ul id="tab-interface-info" class="nav nav-tabs">
						<li class="active"><a class="basic" data-toggle="tab" href="#intf-tab01"><lb class="lb-3010">기본정보</lb></a></li>
						<li class=""><a class="system" data-toggle="tab" href="#intf-tab02"><lb class="lb-3011">연계시스템</lb></a></li>
						<li class=""><a class="users" data-toggle="tab" href="#intf-tab03"><lb class="lb-3012">담당자</lb></a></li>
						<li class=""><a class="comment" data-toggle="tab" href="#intf-tab04"><lb class="lb-3014">부가정보</lb></a></li>
					</ul>
					<div class="tab-content">
						<!-- 기본정보 -->
						<div id="intf-tab01" class="tab-pane active">
							<div class="panel-body">

			                   	<div class="row">
			                       	<div class="col-sm-4">
			                       		<div class="form-horizontal">
			                       			<div class="form-group">
												<label class="label-tag-4"><lb class="lb-3016">연계채널</lb></label>
												<input id="cb-channelNm" name="channelNm" type="combobox" class="input-tag-4">
											</div>
										</div>
									</div>
									<div class="col-sm-4">
			                       		<div class="form-horizontal">
			                       			<div class="form-group">
												<label class="label-tag-4"><lb class="lb-1002">표준구분</lb></label>
												<input id="rd-modelStd">
											</div>
										</div>
									</div>
									<div class="col-sm-4">
			                       		<div class="form-horizontal">
			                       			<div class="form-group">
												<label class="label-tag-4"><lb class="lb-9999">형상배포옵션</lb></label>
												<input id="rd-deployOption">
											</div>
										</div>
									</div>

			                   		<hr class="hr-space">

									<div class="col-sm-12">
										<div class="b-col"></div>
									</div>

			                   		<hr class="hr-space">

			                       	<div class="col-sm-4">
										<div class="form-horizontal">
				                            <div class="form-group">
				                        		<label class="label-tag-4"><lb class="lb-3017">Data처리방향</lb></label>
				                             	<input id="cb-dataPrDirNm" name="dataPrDirNm" type="combobox" class="input-tag-4">
			                            	</div>
			                        	</div>
									</div>
									<div class="col-sm-4">
										<div class="form-horizontal">
				                            <div class="form-group">
				                            	<label class="label-tag-4"><lb class="lb-3018">Data처리방식</lb></label>
				                              	<input id="cb-dataPrMethodNm" name="dataPrMethodNm" type="combobox" class="input-tag-4">
			                              	</div>
				                   		</div>
									</div>
									<div class="col-sm-4">
										<div class="form-horizontal">
			                               	<div class="form-group">
				                           		<label class="label-tag-4"><lb class="lb-3019">App처리방식</lb></label>
												<input id="cb-appPrMethodNm" name="appPrMethodNm" type="combobox" class="input-tag-4">
			                             	</div>
			                          	</div>
									</div>

									<hr class="hr-space">

									<div class="col-sm-4">
										<div class="form-horizontal">
				                            <div class="form-group">
				                            	<label class="label-tag-4"><lb class="lb-3020">데이터순차보장</lb></label>
				                                <input id="cb-dataOrderYn" name="dataOrderYn" type="combobox" class="input-tag-4">
			                              	</div>
										</div>
									</div>
									<div class="col-sm-4">
										<div class="form-horizontal">
			                               	<div class="form-group">
				                               	<label class="label-tag-4"><lb class="lb-3021">발생주기</lb></label>
				                                <input id="cb-dataFrequencyNm" name="dataFrequencyNm" type="text" class="input-tag-4">
			                              	</div>
										</div>
									</div>
									<div class="col-sm-4">
										<div class="form-horizontal">
			                               	<div class="form-group">
			                               		<label class="label-tag-4"><lb class="lb-3022">발생주기상세</lb></label>
		                                   		<input id="tf-dataFrequencyInput" name="dataFrequencyInput" type="text" class="input-tag-4 k-textbox" placeholder="">
			                              	</div>
										</div>
									</div>

									<hr class="hr-space">

									<div class="col-sm-4">
										<div class="form-horizontal">
				                            <div class="form-group">
				                            	<label class="label-tag-4"><lb class="lb-3023">건당사이즈</lb></label>
		                                   		<input id="nf-sizePerTran" name="sizePerTran" type="number" class="input-tag-4" min="0" step="1" max="999999999" placeholder="0">
			                            	</div>
										</div>
									</div>
									<div class="col-sm-4">
										<div class="form-horizontal">
			                               	<div class="form-group">
			                               		<label class="label-tag-4"><lb class="lb-3024">주기별건수</lb></label>
		                                   		<input id="nf-cntPerFrequency" name="cntPerFrequency" type="number" class="input-tag-4" min="0" step="1" max="999999999" placeholder="0">
			                              	</div>
										</div>
									</div>
									<div class="col-sm-4">
										<div class="form-horizontal">
				                            <div class="form-group">
				                            	<label class="label-tag-4"><lb class="lb-3025">일일발생횟수</lb></label>
			                                	<input id="nf-cntPerDay" name="cntPerDay" type="number" class="input-tag-4" min="0" step="1" max="999999999" placeholder="0">
			                              	</div>
										</div>
									</div>

		                            <hr class="hr-space">

									<div class="col-sm-4" >
				                       	<form class="form-horizontal" >
				                            <div class="form-group" >
				                            	<label class="label-tag-4"><lb class="lb-3026">일일총전송량</lb></label>
			                                	<input id="nf-qttPerDay" type="number" class="input-tag-4" disabled="disabled">
				                           	</div>
				                       	</form>
			                   		</div>
								</div><!-- end row -->
							</div><!-- end panel-body -->
						</div>

						<!-- 연계 시스템 -->
						<div id="intf-tab02" class="tab-pane">
							<div class="panel-body">
								<div class="row">
									<div class="col-sm-12">
										<div id="gd-system"></div>
									</div>
								</div>
							</div><!-- end panel-body -->
						</div><!-- end tab-pane -->

						<div id="intf-tab03" class="tab-pane">
							<div class="panel-body">

		                 		<div class="row">
		 							<div class="col-lg-12">
		 	  							<div id="gd-user"></div>
			               			</div>
		    					</div>
							</div><!-- end panel-body -->
						</div><!-- end tab-pane -->

						<div id="intf-tab04" class="tab-pane">
							<div class="panel-body">

		                        <ul class="category-list" style="padding: 0">
		                        	<li><i class="fa fa-circle text-primary" style="color: #1c84c6;"></i> <lb class="lb-3033"></lb></li>
		                        </ul>
			                	<div class="row">
			                       	<div class="col-sm-12">
			                       		<input id="fu-uploadFile" name="uploadFile" type="file" />
									</div>
			               		</div>

								<hr class="hr-space">
								<hr class="hr-space">
								<hr class="hr-space">

		                        <ul class="category-list" style="padding: 0">
		                        	<li><i class="fa fa-circle text-primary" style="color: #1c84c6;"></i> <lb class="lb-3034"></lb></li>
		                        </ul>
		                        <div class="row">
		                        	<div class="col-sm-12">
		                        	<textarea id="ta-description" rows="5" cols="30" style="height:200px"></textarea>
		                        	</div>
		                        </div>

								<hr class="hr-space">
								<hr class="hr-space">

							</div><!-- end panel-body -->
						</div><!-- end tab-pane -->

						<input id="hd-modelMid" name="hd-modelMid" type="hidden">
						<input id="hd-modelStage" name="hd-modelStage" type="hidden">
						<input id="hd-modelStageNm" name="hd-modelStageNm" type="hidden">
						<input id="hd-modelDeployStatus" name="hd-modelDeployStatus" type="hidden">
						<input id="hd-modelDeployStatusNm" name="hd-modelDeployStatusNm" type="hidden">
						<input id="hd-modelLastDeployDate" name="hd-modelLastDeployDate" type="hidden">
						<input id="hd-modelLastDeployUser" name="hd-modelLastDeployUser" type="hidden">
						<input id="hd-modelLastDeployUserNm" name="hd-modelLastDeployUserNm" type="hidden">
					</div><!--  end tab-content -->
				</div><!-- end tab-position -->
			</div><!-- end tabs-container -->
       	</div><!--  end col-sm-12 -->
	</div><!-- end row -->
</div><!-- end wrapper -->

<script type="text/x-kendo-template" id="template-additionalAttribute">
	<div class="col-sm-4">
		<div class="form-horizontal">
			<div class="form-group">
				<label class="label-tag-4">#= attrNm #</label>
				<input id="tf-addattr-#= attrCd #" name="#= attrCd #" type="text" class="input-tag-4 k-textbox" placeholder="">
			</div>
		</div>
	</div>
</script>

<script type="text/x-kendo-template" id="template-channelAttribute">
	<div class="col-sm-4">
		<div class="form-horizontal">
			<div class="form-group">
				<label class="label-tag-4">#= attrNm #</label>
				<input id="tf-chlattr-#= attrCd #" name="#= attrCd #" type="text" class="input-tag-4 k-textbox" placeholder="">
			</div>
		</div>
	</div>
</script>


<script type="text/x-kendo-template" id="template-systemSearch">
	<div>
		<span id="btn-layout" style="float: right; padding:5px 10px 5px 0px; margin-left:5px; cursor: pointer;" onclick="return $.main_detail.fn_btnLayoutClickEvent()">
			<i class='fa fa-square-o'></i> <lb class="lb-9999">레이아웃</lb></span>
		</span>
		# if ( !$.main_detail.isModify ) { #
		<span class="btn-systemSearch" style="float: right; padding:5px 10px 5px 0px; cursor: pointer;" onclick="$.main_detail.fn_btnSystemSearchClickEvent();">
			<i class='fa fa-plus-square'></i> <lb class="lb-327"></lb></span>
		</span>
		# } #
	</div>
</script>

<script type="text/x-kendo-template" id="template-userSearch">
	<div>
		<span class="btn-userSearch" style="float: right; padding:5px 10px 5px 0px; cursor: pointer;" onclick="$.main_detail.fn_btnUserSearchClickEvent();">
			<i class='fa fa-plus-square'></i> <lb class="lb-327"></lb></span>
		</span>
	</div>
</script>

<script type="text/x-kendo-template" id="template-ifModel-app">
	<div id='app' class="ibox-content" style="border-top:0;">
		<div class="row">
			<div class="col-sm-4" style="display:none;">
				<label class="label-tag-4 k-block"><lb class="lb-9999">서버</lb></label>
				<input id='server' type="combobox" class="input-tag-4 server">
			</div>
			<div class="col-sm-4">
				<label class="label-tag-4 k-block"><lb class="lb-9999">APP 유형</lb></label>
				<input id="appType" type="combobox" class="input-tag-4 appType" onchange="$.main_detail.fn_appTypeDetail(this.value);">
			</div>
		</div>
	</div>
	<div id="attDetail" class="ibox-content">
		<div class="row" data-template="template-ifModel-att" data-bind="source: attribute"></div>
	</div>
</script>

<script type="text/x-kendo-template" id="template-ifModel-att">
	# if ( requiredYn == 'Y') { name = name + '(*)'; } #

	# if ( inputType == '0') { #
	<div class="col-sm-4 form-group-original">
		<label data-bind="text:name" class="label-tag-4 k-block" style="# if ( requiredYn == 'Y') { # background-color:rgb(243,174,174); # } #"></label>
		<input id='#= cd #' type="text" class="input-tag-4 k-textbox">
	</div>
	# } else if ( inputType == '1') { #
	<div class="col-sm-4 form-group-original">
		<label data-bind="text:name" class="label-tag-4 k-block" style="# if ( requiredYn == 'Y') { # background-color:rgb(243,174,174); # } #"></label>
		<input id='#= cd #' type="number" data-role="numerictextbox" data-format="n0" class="input-tag-4">
	</div>
	# } else if ( inputType == '2') { #
	<div class="col-sm-4 form-group-original">
		<label data-bind="text:name" class="label-tag-4 k-block" style="# if ( requiredYn == 'Y') { # background-color:rgb(243,174,174); # } #"></label>
		<input id='#= cd #' type="date" data-role="datepicker" data-format="{0:yyyy/MM/dd}" data-culture="ko-KR" class="input-tag-4" data-date-input="true">
	</div>
	# } else if ( inputType == '3') { #
	<div class="col-sm-4 form-group-original">
		<label data-bind="text:name" class="label-tag-4 k-block" style="# if ( requiredYn == 'Y') { # background-color:rgb(243,174,174); # } #"></label>
		<input id='#= cd #' type="checkbox" data-role="switch">
	</div>
	# } else if ( inputType == '4') { #
	<div class="col-sm-4 form-group-original">
		<label data-bind="text:name" class="label-tag-4 k-block" style="# if ( requiredYn == 'Y') { # background-color:rgb(243,174,174); # } #"></label>
		<input id='#= cd #' data-role="dropdownlist" data-value-field="attrCd" data-text-field="attrName" data-bind="value: attrCd, source: cds" type="combobox" class="input-tag-4">
	</div>
	# } else if ( inputType == '5') { #
	<div class="col-sm-4 form-group-original">
		<label data-bind="text:name" class="label-tag-4 k-block" style="# if ( requiredYn == 'Y') { # background-color:rgb(243,174,174); # } #"></label>
		<input id='#= cd #' class="input-tag-4 k-textbox">
	</div>
	# } else if ( inputType == '6') { #
	<div class="col-sm-12 form-group-original">
		<label data-bind="text:name" class="label-tag-4 k-block" style="width:11.193%; # if ( requiredYn == 'Y') { # background-color:rgb(243,174,174); # } #"></label>
		<textarea id='#= cd #' class="input-tag-4 k-textbox" style="width:88.30%;height:200px;border-width:thin;"></textarea>
	</div>
	# } else if ( inputType == '7') { #
	<div class="col-sm-4 form-group-original">
		<label data-bind="text:name" class="label-tag-4 k-block" style="# if ( requiredYn == 'Y') { # background-color:rgb(243,174,174); # } #"></label>
		<input id='#= cd #' class="input-tag-4 k-textbox">
	</div>
	# } else { #
	<div class="col-sm-4 form-group-original">
		<label data-bind="text:name" class="label-tag-4 k-block" style="# if ( requiredYn == 'Y') { # background-color:rgb(243,174,174); # } #"></label>
		<input id='#= cd #' class="input-tag-4 k-textbox">
	</div>
	# } #
</script>

<script type="text/x-kendo-template" id="template-ifModel-detail">
	<div class="ibox-content" style="border-top:0;">
		<div class="row">
			<div class="col-sm-4" style="display:none;">
				<label class="label-tag-4 k-block"><lb class="lb-9999">서버</lb></label>
				<input type="text" class="input-tag-4 input-tag-disabled k-textbox" value="#=data.serverName#" readonly="readonly" disabled="disabled" />
			</div>
			<div class="col-sm-4">
				<label class="label-tag-4 k-block"><lb class="lb-9999">APP 유형</lb></label>
				<input type="text" class="input-tag-4 input-tag-disabled k-textbox" value="#=data.name#" readonly="readonly" disabled="disabled" />
			</div>
		</div>
	</div>
	<div class="ibox-content attributeArea">
		<div class="row">
	# if( !mint.common.isEmpty($.main_detail.attributes[data.type] ) ) { #
		# for(var i=0; i<$.main_detail.attributes[data.type].length; i++) { #
			# if( !mint.common.isEmpty(data.attributes[$.main_detail.attributes[data.type][i].cd] ) ) { #
				# for(var j=0; j<data.attributes[$.main_detail.attributes[data.type][i].cd].length; j++) { #
					# if( $.main_detail.attributes[data.type][i].inputType == "6") { #
			<div class="col-sm-12 form-group-original">
				<label class="label-tag-4 k-block" style="width:11.193%;"> #= data.attributes[$.main_detail.attributes[data.type][i].cd][j].name # </label>
				<textarea class="input-tag-4 input-tag-disabled k-textbox" style="width:88.30%;height:200px;border-width:thin;" readonly="readonly" disabled="disabled">#= decodeURIComponent(atob(data.attributes[$.main_detail.attributes[data.type][i].cd][j].val)) #</textarea>
			</div>
					# } else { #
			<div class="col-sm-4 form-group-original">
				<label class="label-tag-4 k-block"> #= data.attributes[$.main_detail.attributes[data.type][i].cd][j].name # </label>
				<input type="text" class="input-tag-4 input-tag-disabled k-textbox" title="#= data.attributes[$.main_detail.attributes[data.type][i].cd][j].val #" value="#= data.attributes[$.main_detail.attributes[data.type][i].cd][j].val #" readonly="readonly" disabled="disabled" />
			</div>
					# } #
				# } #
			# } #
		# } #
	# } #
		</div>
	</div>
</script>

<script>
	$(document).ready(function(){
		//=======================================================================
		//(1) function 및 variable scope 설정 :: (메인은 main, 팝업 및 서브는 sub)
		//=======================================================================
		screenName = "AN-01-01-002";
		$.extend({
			main_detail : {
				//=======================================================================
				// (2) Screen 에서 사용할 variable 정의
				//=======================================================================
				isSupplement : false,
				isModify : false,
				isLayoutModify : false,		 //레이아웃수정여부
				requirementId : '',
				attributes : null,			 //모델속성
				uploadFileSelectedCount : 0, //업로드할 파일을 선택할때 카운트
				uploadFileCount : 0,         //업로드가 성공되었을때 증가, 실패시 0
				uploadFileInfoList : [],     //업로드 성공시 해당 파일 정보가 저장됨
				originalAttachFile : [],     //내용 수정시 이미 등록된 파일정보가 있을때 저장됨
				uploadFileFailInfo : [],     //업로드 실패시 파일정보 및 메세지 셋팅 {uid:'',msg:''} 형식
				autoCreateIntegrationID : false,
				//=======================================================================
				// (3) Screen 에서 사용할 function 정의
				//=======================================================================

				//-----------------------------------------------------------------------
				// Description :: 화면 초기화
				//-----------------------------------------------------------------------
				fn_init : function() {
					try {
						mint.init('$.main_detail.fn_initCallback');
						mint.common.siteMenuPath(screenName);
					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_init"});
					}
				},//end fn_init()

				//-----------------------------------------------------------------------
				// Description :: 화면 초기화 콜백
				//-----------------------------------------------------------------------
				fn_initCallback : function() {
					try {
						//-----------------------------------------------------------------------
						// 화면 초기화
						//-----------------------------------------------------------------------
						$.main_detail.isModify = mint.common.getScreenParam('isModify');
						$.main_detail.fn_initComponent(null);
						$.main_detail.fn_getAttributesInit();

						//-----------------------------------------------------------------------
						// 결재권한자가 문서보완 작업을 진행하는지 여부 체크
						//-----------------------------------------------------------------------
						$.main_detail.isSupplement = mint.common.getScreenParam('isSupplement');
						if( !mint.common.isEmpty($.main_detail.isSupplement) && $.main_detail.isSupplement === true ) {
							var msg = '<span><h4>문서보완 편집중입니다.</h4></span>';
							mint.common.jobNotification(msg);
						}

						//-----------------------------------------------------------------------
						// 수정건인지 체크
						//-----------------------------------------------------------------------
						if( !mint.common.isEmpty($.main_detail.isModify) && $.main_detail.isModify === true ) {
							$.main_detail.requirementId = mint.common.getScreenParam('requirementId');
							$('.btn-cancel').show();
							$('.lb-change').text( mint.label.getLabel('lb-12') );

				      		if( ! mint.common.isEmpty( $.main_detail.requirementId ) ) {
								mint.callService(null, screenName, 'REST-R02-AN-01-01', '$.main_detail.fn_setInterfaceInfo',
									{
								    	  errorCall : true
								    	, params : {requirementId : $.main_detail.requirementId}
								    }
								);
				      		}
						}

						//-----------------------------------------------------------------------
						// Screen Parameter Clear
						//-----------------------------------------------------------------------
						{
							mint.common.removeScreenParam('isSupplement');
							mint.common.removeScreenParam('isModify');
							mint.common.removeScreenParam('requirementId');
						}
					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_initCallback"});
					}
				},//end fn_initCallback()

				//-----------------------------------------------------------------------
				// Description :: component 초기화
				//-----------------------------------------------------------------------
				fn_initComponent : function(options) {
					try {

						// 표준구분
						$("#rd-modelStd").kendoSwitch({
							checked : true,
							messages: {
				                checked: "Yes",
				                unchecked: "No"
				            }
						});

						// 배포옵션
						$("#rd-deployOption").kendoSwitch({
							width: 100,
							checked : true,
							messages: {
				                checked: "형상배포",
				                unchecked: "버전관리"
				            }
						});

						mint.ui.setDropDownList('cb-channelNm'      , mint.common.commonCodeMap.get("channelList"), 0, 'channelNm', 'channelNm');
						//------------------------------------------------------------------
						// 신한생명 요청으로 채널코드값이 FWS 인 값으로 기본설정 처리한다.
						//------------------------------------------------------------------
						var channelData = new kendo.data.DataSource({
							data: mint.common.commonCodeMap.get("channelList"),
							filter: { field: "channelCd", operator: "eq", value: "FWS" }
						});

						channelData.fetch(function() {
							var view = channelData.view();
							if(view.length > 0) {
								$("#cb-channelNm").data("kendoDropDownList").value(view[0].channelNm);
							}
						});

						$("#cb-channelNm").data("kendoDropDownList").bind("select", function(e) {
							// $.main_detail.fn_setInterfaceInfoTemplate();

							var systemItems = $('#gd-system').data('kendoGrid');
							if(systemItems.dataItems().length > 0) {
								var confirm = mint.common.confirm('CW00020', "연계시스템 입력항목이 초기화 됩니다. \n진행하시겠습니까?" );

								if (confirm == true) {
									systemItems.dataSource.data([]);
									$("#btn-layout > i").addClass("fa-square-o");
									$("#btn-layout > i").removeClass("fa-check-square-o");
									$("#btn-layout").css("color","#313131");
								} else {
									e.preventDefault();
								}
							}
						});

						if($.main_detail.isModify) {
							$('#cb-channelNm').data('kendoDropDownList').enable(false);
						}


						var YesNoValue = [{ nm: 'Yes', value: 'Y' }, { nm: 'No', value: 'N' }];
						mint.ui.setDropDownList('cb-dataPrDirNm'    , mint.common.commonCodeMap.get("cds").IM01   , 1, 'nm'       , 'nm'       );
						mint.ui.setDropDownList('cb-dataPrMethodNm' , mint.common.commonCodeMap.get("cds").IM12   , 1, 'nm'       , 'nm'       );
						mint.ui.setDropDownList('cb-appPrMethodNm'  , mint.common.commonCodeMap.get("cds").IM02   , 0, 'nm'       , 'nm'       );
						mint.ui.setDropDownList('cb-dataOrderYn'    , YesNoValue                                  , 1, 'nm'       , 'value'    );
						mint.ui.setDropDownList('cb-dataFrequencyNm', mint.common.commonCodeMap.get("cds").IM03   , 7, 'nm'       , 'nm'       );

						mint.ui.setNumericTextBox('nf-sizePerTran'    , {min:0, step:1, decimals:1, format:'#,### byte'}, $.main_detail.fn_setQttPerDay);
						mint.ui.setNumericTextBox('nf-cntPerFrequency', {min:0, step:1, decimals:1, format:'n0'}        , $.main_detail.fn_setQttPerDay);
						mint.ui.setNumericTextBox('nf-cntPerDay'      , {min:0, step:1, decimals:1, format:'n0'}        , $.main_detail.fn_setQttPerDay);
						mint.ui.setNumericTextBox('nf-qttPerDay'      , {min:0, step:1, decimals:1, format:'#,### byte'}, $.main_detail.fn_setQttPerDay);

						//요건 등록자 정보
						$('#tf-regUserNm').val( mint.session.getUserNm() );
						$('#hd-regUserId').val( mint.session.getUserId() );
						$('#hd-regUserCellPhone').val( mint.session.getCellPhone() );
						$('#hd-regUserPhone').val( mint.session.getPhone() );
						$('#hd-regEmail').val( mint.session.getEmail() );
				        $('#tf-regDate').val( mint.common.getTodayDate() + "(" + mint.session.getUserNm() + ")" );

						//-----------------------------------------------------------------------
						// 연계시스템 그리드
						//-----------------------------------------------------------------------
						$.main_detail.fn_initSystemGrid();

						//-----------------------------------------------------------------------
						// 담당자 그리드
						//-----------------------------------------------------------------------
						$.main_detail.fn_initUserGrid();

						//-----------------------------------------------------------------------
						// 파일 업로드
						//-----------------------------------------------------------------------
						if( mint.common.isEmpty($.main_detail.isModify) || $.main_detail.isModify === false ) {
							$.main_detail.fn_initFileUpload([]);
						}

						//-----------------------------------------------------------------------
						// Description
						//-----------------------------------------------------------------------
						$("#ta-description").kendoEditor({

				        });

						$('input[type=number]').css("text-align", 'right');

						//-----------------------------------------------------------------------
						// 환경설정값에 때라 integrationId 설정여부 . 20170317
						//-----------------------------------------------------------------------

						var envVal = mint.common.commonCodeMap.get("environmentalValues");
						if( !mint.common.isEmpty(envVal) ) {
							if( !mint.common.isEmpty(envVal["system.auto.interfaceId.create"]) ) {
								if($.parseJSON(envVal["system.auto.interfaceId.create"][0].trim().toLowerCase())){
									$("#tf-integrationId").prop("readonly", "true");
									$("#tf-integrationId").prop("disabled", "disabled");
									$("#tf-integrationId").prop("class", "input-tag-4 input-tag-disabled k-textbox");
									$.main_detail.autoCreateIntegrationID = true;

									if( !mint.common.isEmpty(envVal["system.auto.interfaceId.interface.admin.create"]) ) {
										if($.parseJSON(envVal["system.auto.interfaceId.interface.admin.create"][0].trim().toLowerCase())){
										 	if(mint.session.isInterfaceAdmin() =='Y'){
												$("#tf-integrationId").prop("readonly", "");
												$("#tf-integrationId").prop("disabled", "");
												$("#tf-integrationId").prop("class", "input-tag-4 k-textbox");
											}
										}
									}
								}
							}
						}

						mint.callService(null, screenName, 'REST-R01-AU-01-02',
							function(jsonData) {
								mint.ui.setDropDownList('cb-groupId', jsonData, 0, 'name', 'groupId');
								for(var o in jsonData) {
									if(jsonData[o].defaultGroup == "Y") {
										$('#cb-groupId').data("kendoDropDownList").value(jsonData[o].groupId);
										break;
									}
								}
							}, {errorCall : true}
						);

					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_initComponent"});
					}
				},//end fn_initComponent()

				//-----------------------------------------------------------------------
				// Description :: APP 모델 속성정보 셋팅
				//-----------------------------------------------------------------------
				fn_getAttributesInit : function() {
					try {
						mint.callService(
							null
					 		, screenName
							, 'REST-R02-RT-01-00'
							, function(jsonData) {
								if( !mint.common.isEmpty(jsonData) ) {
									$.main_detail.attributes = jsonData;
								}
							}
							, {errorCall : true}
						);
					} catch ( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_getAttributesInit"});
					}
				},


				//-----------------------------------------------------------------------
				// Description :: init System Grid
				//-----------------------------------------------------------------------
				fn_initSystemGrid : function(jsonData) {
					try {
						$("#gd-system").kendoGrid({
				          	dataSource : $.main_detail.fn_getSystemGridDataSource([])
							, filterable: false
							, scrollable: false
							, resizable: true
				            , sortable: true
				            , selectable: true
				            , noRecords: true
				            , editable: "inline"
				            , toolbar : kendo.template( $("#template-systemSearch").html() )
				            , save : function(e) {
				            	$.main_detail.fn_saveGridSystem(e);
				            }
							, cancel: function(e) {
								this.collapseRow("tr[data-uid='" + e.model.uid + "']");
							}
							, columns: [
								{
									field : "nodeTypeNm",
									title : mint.label.getLabel('lb-3035'),
									headerAttributes : { style : "text-align: center" },
									attributes : { style : "text-align: center; white-space: nowrap;" },
									editor : function(container, options) {
										mint.ui.gridEditorNodeTypeComboBox(container, options, '$.main_detail.fn_getResource');
									}
								},{
									field : "orgDisplayNm",
									title : mint.label.getLabel('lb-3036'),
									headerAttributes : { style : "text-align: center" },
									attributes : { style : "text-align: center; white-space: nowrap;" }
								},{
									field : "systemDisplayNm",
									title : mint.label.getLabel('lb-3037'),
									headerAttributes : { style : "text-align: center" },
									attributes : { style : "text-align: center; white-space: nowrap;" }
								},{
									field : "resourceNm",
									title : mint.label.getLabel('lb-3038'),
									headerAttributes : { style : "text-align: center" },
									attributes : { style : "text-align: center; white-space: nowrap;" },
									editor : function(container, options) {
										$.main_detail.fn_gridEditorResourceComboBox(container, options);
									}
								},{
									width: "250px",
									attributes : {
										style : "text-align: center; white-space: nowrap;"
									},
									command : $.main_detail.fn_getSystemCommand()
								},

								{ field : "service"	   , hidden : true },
								{ field : "serviceDesc", hidden : true },
								{ field : "systemId"   , hidden : true },
								{ field : "systemCd"   , hidden : true },
								{ field : "systemNm"   , hidden : true },
								{ field : "orgId"      , hidden : true },
								{ field : "orgCd"      , hidden : true },
								{ field : "orgNm"      , hidden : true },
								{ field : "businessId" , hidden : true },
								{ field : "businessCd" , hidden : true },
								{ field : "businessNm" , hidden : true },
								{ field : "nodeTypeCd" , hidden : true },
								{ field : "resourceCd" , hidden : true },
								{ field : "seq"        , hidden : true }

							]
							, detailTemplate : '<div class="gridDetail"></div>'
						    , detailExpand: function(e) {
						    	$.main_detail.fn_detailExpand(e);
						    }
							, dataBound: function (e) {
						    	if(0 == $("#gd-system").data().kendoGrid.dataSource.view().length) {
						    		$("#gd-system").children(".k-grid-content").height('150');
						    	} else {
						    		$("#gd-system").children(".k-grid-content").height('auto');
						    	}
						    }
				        });
					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_initSystemGrid"});
					}
				},//end fn_initSystemGrid()

				fn_getSystemCommand : function() {
					try {
						var commandData = [];
						commandData.push(
							{
								name : "edit",
								text :
								{
									edit : mint.label.getLabel("lb-342"),
									update : mint.label.getLabel("lb-310"),
									cancel : mint.label.getLabel("lb-143")
								}
							}
						);

						if(!$.main_detail.isModify) {
							commandData.push(
								{
									name : "deletes",
									text : "<span class='k-icon k-i-delete'></span>" + mint.label.getLabel('lb-343'),
									click : function(e) {
										var	dataItem = this.dataItem($(e.target).closest("tr"));
										var confirm = mint.common.confirm('BI00003', dataItem.systemDisplayNm );

										if (confirm == true) {
								        	this.dataSource.remove(dataItem);
										}
									}
								}
							);
						}
						return commandData;

					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_getSystemCommand"});
					}
				},

				//-----------------------------------------------------------------------
				// Description :: 시스템 Row 저장
				//-----------------------------------------------------------------------
				fn_saveGridSystem : function(e) {
					try {

						var detailRow = e.container.next('.k-detail-row');

						if(mint.common.isEmpty(detailRow.find("#appType").data("kendoDropDownList").value())) {
							mint.common.alert('CW00003', "APP 유형");
							e.preventDefault();
						} else if(detailRow.find("#server").data("kendoMultiColumnComboBox").selectedIndex < 0) {
							mint.common.alert('CW00003', mint.label.getLabel('lb-357'));
							e.preventDefault();
						} else {
			            	e.model.set("serverId", detailRow.find("#server").data("kendoMultiColumnComboBox").value());
			            	e.model.set("serverName", detailRow.find("#server").data("kendoMultiColumnComboBox").text());
			            	e.model.set("cd", detailRow.find("#appType").data("kendoDropDownList").value());
			            	e.model.set("type", detailRow.find("#appType").data("kendoDropDownList").value());
			            	e.model.set("name", detailRow.find("#appType").data("kendoDropDownList").text());
			            	e.model.set("comments", detailRow.find("#appType").data("kendoDropDownList").text());
			            	e.model.set("msgs", mint.common.isEmpty(e.model.msgs) ? [] : e.model.msgs );
			            	e.model.set("mappings", mint.common.isEmpty(e.model.mappings) ? [] : e.model.mappings );
			            	e.model.set("systemType", e.model.nodeTypeCd);
			            	e.model.set("nodeType", e.model.nodeTypeCd);

							if( !mint.common.isEmpty($.main_detail.attributes[e.model.type]) ) {
								e.model.attributes = new Object();

								var isValid = false;

								$.main_detail.attributes[e.model.type].some(function(_v, i) {

									var attributes = [];
									var attributeObj = new Object({
										objectType : "AppModelAttribute",
										inputType : _v.inputType,
										cd : _v.cd,
										name : _v.name,
										aid : _v.aid,
										appType : _v.appType,
									});

									// -------------------------------------------------------------------------------
									//  0:text, 1:number, 2:date, 3:checkbox, 4:combobox, 5:list, 6:textarea, 7:file
									// --------------------------------------------------------------------------------
									if(_v.inputType == "3") {
										if(detailRow[0].querySelector("#" + _v.cd).checked) {
											attributeObj.val = attributeObj.tag = "TRUE";
										} else {
											attributeObj.val = attributeObj.tag = "FALSE";
										}
									} else if(_v.inputType == "4") {
										attributeObj.val = attributeObj.tag = detailRow[0].querySelector("#" + _v.cd).kendoBindingTarget.target.text();
									} else if(_v.inputType == "6") {
										attributeObj.val = btoa(encodeURIComponent(detailRow[0].querySelector("#" + _v.cd).value));
										attributeObj.tag = "";
									} else {
										attributeObj.val = attributeObj.tag = detailRow[0].querySelector("#" + _v.cd).value;
									}

									if(_v.requiredYn == "Y" && mint.common.isEmpty( attributeObj.val ) ) {
										mint.common.alert('CW00019', _v.name);
										return isValid = true;
									}

									attributes.push(attributeObj);
									e.model.attributes[_v.cd] = attributes;
								});

								if(isValid) {
									e.preventDefault();
								}
							} else {
								e.model.attributes = new Object();
							}
						}

					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_saveGridSystem"});
					}
				}, // end fn_saveGridSystem()

				fn_gridEditorResourceComboBox : function(container, options) {
					try {
				    		var requestObj = new Object();

				    		requestObj.resourceCd = "";

				    		if( ! mint.common.isEmpty( options.model.nodeType ) ) {
					    		requestObj.nodeType = options.model.nodeType;
					    		requestObj.channelId = $("#cb-channelNm").data("kendoDropDownList").dataItem().channelId;
					    		requestObj.delYn = 'N';
					    		mint.callService(requestObj, screenName, 'REST-R03-RT-01-00',
									function(jsonData) {

						    			// recourceCd기준 distinct 처리
					    				if( ! mint.common.isEmpty( jsonData ) ) {
											var temp = {};
											for(var i=0; i<jsonData.length; i++) {
												temp[jsonData[i].resourceCd] = jsonData[i];
											}

											jsonData = [];
											for(var o in temp) {
												jsonData.push(temp[o]);
											}
										}

						    			var input = $("<input/>");
									    input.attr("name", options.field);
									    input.appendTo(container);
									    input.kendoDropDownList({
									    	  dataTextField: "resourceNm"
											, dataValueField: "resourceNm"
											, dataSource: jsonData
											, index: -1
											, change: function(e) {
												var selectedItem = this.dataItem(this.selectedIndex);

												options.model.resourceNm = selectedItem.resourceNm;
									        	options.model.resourceCd = selectedItem.resourceCd;

												$.main_detail.fn_getAppType(container, options, selectedItem);
											}
										});

									    input.data("kendoDropDownList").value(options.model.resourceNm);
									} , {errorCall : true}
								);
				    		} else {
				    			var input = $("<input/>");
							    input.attr("name", options.field);
							    input.appendTo(container);
							    input.kendoDropDownList({
							    	  dataTextField: "resourceNm"
									, dataValueField: "resourceNm"
									, dataSource: []
									, index: -1
									, change: function(e) {
										var selectedItem = this.dataItem(this.selectedIndex);

										options.model.resourceNm = selectedItem.resourceNm;
							        	options.model.resourceCd = selectedItem.resourceCd;

										$.main_detail.fn_getAppType(container, options, selectedItem);
									}
								});
				    		}

					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "mint.ui.gridEditorResourceTypeComboBox"});
					}
				},

				//-----------------------------------------------------------------------
				// Description :: 노드타입 - 리소스정보 조회
				//-----------------------------------------------------------------------
				fn_getResource : function(container, options, selectedItem) {
					try {
						if( ! mint.common.isEmpty( selectedItem ) ) {

							options.model.nodeTypeNm = selectedItem.nm;
				        	options.model.nodeTypeCd = selectedItem.cd;

							var requestObj = new Object();
							requestObj.resourceCd = "";
							requestObj.nodeType = options.model.nodeTypeCd;
							requestObj.channelId = $("#cb-channelNm").data("kendoDropDownList").dataItem().channelId;
							requestObj.delYn = 'N';
							mint.callService(requestObj, screenName, 'REST-R03-RT-01-00',
								function(jsonData) {

									// recourceCd기준 distinct 처리
									if( ! mint.common.isEmpty( jsonData ) ) {
										var temp = {};
										for(var i=0; i<jsonData.length; i++) {
											temp[jsonData[i].resourceCd] = jsonData[i];
										}

										jsonData = [];
										for(var o in temp) {
											jsonData.push(temp[o]);
										}
									}

									var resourceType = container.parent().find("input[name=resourceNm]").data("kendoDropDownList");
									resourceType.setDataSource(jsonData);
									resourceType.select(-1);
									resourceType.bind("change", $.main_detail.fn_getAppType(container, options, null));
								} , {errorCall : true}
							);
			      		}
					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_getResource"});
					}
				},//end fn_getResource()
				//-----------------------------------------------------------------------
				// Description :: 리소스 - APP유형정보 조회
				//-----------------------------------------------------------------------
				fn_getAppType : function(container, options, selectedItem) {
					try {
						if( ! mint.common.isEmpty( selectedItem ) ) {

							var requestObj = new Object();

					        requestObj.resourceCd = selectedItem.resourceCd;
							requestObj.nodeType = selectedItem.nodeType;
							requestObj.channelId = $("#cb-channelNm").data("kendoDropDownList").dataItem().channelId;
							requestObj.delYn = 'N';
							mint.callService(requestObj, screenName, 'REST-R03-RT-01-00',
								function(jsonData) {
									var appType = $("#appType").data("kendoDropDownList");
									appType.setDataSource(jsonData);
									appType.select(-1);
									appType.bind("change", $.main_detail.fn_appTypeDetail(appType.value()));
								} , {errorCall : true}
							);
			      		} else {
			      			var appType = $("#appType").data("kendoDropDownList");
			      			appType.setDataSource(null);
			      			appType.select(-1);
			      			appType.bind("change", $.main_detail.fn_appTypeDetail(appType.value()));
			      		}
					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_getAppType"});
					}
				},//end fn_getAppType()

				//-----------------------------------------------------------------------
				// Description :: 시스템 Grid - 상세정보 조회/수정
				//-----------------------------------------------------------------------
				fn_detailExpand : function(e) {
					try {
 						var detailRow = e.detailRow;
 						var targetData = $("#gd-system").data("kendoGrid").dataItem(e.masterRow);
 						targetData.delYn = 'N';

 						if( e.masterRow[0].classList.contains("k-grid-edit-row") ) {  // 수정 모드일때
							var template = kendo.template($('#template-ifModel-app').html());
							detailRow.find(".gridDetail").html(template(targetData));

							mint.ui.setDropDownList('appType', null, 0, 'appTypeName', 'appType');

							// 리소스 정보가 있을경우 맵핑된 APP유형 정보를 콤보박스에 재설정한다.
							if(!mint.common.isEmpty(targetData.resourceCd)) {
								var requestObject = new Object();
								requestObject.ObjectType = "AppType";
								requestObject.resourceCd = targetData.resourceCd;
								requestObject.nodeType = targetData.nodeType;
								requestObject.channelId  = $("#cb-channelNm").data("kendoDropDownList").dataItem().channelId;
								mint.callService(requestObject, screenName, 'REST-R03-RT-01-00',
									function(jsonData) {
										var targetData = $("#gd-system").data("kendoGrid").dataItem(e.masterRow);
										var appType = $("#appType").data("kendoDropDownList");
										appType.setDataSource(jsonData);
										appType.value(targetData.type);
										appType.bind("change", $.main_detail.fn_appTypeDetail(targetData.type, e));
									} , {errorCall : true}
								);
							}

							mint.callService(null, screenName, 'REST-R01-CO-02-00-002',
								function(jsonData) {
									var dataSource = new kendo.data.DataSource({
										data: jsonData
									});

									var targetData = $("#gd-system").data("kendoGrid").dataItem(e.masterRow);

								 	var columns = [
										  {field: "serverCd", title: mint.label.getLabel('lb-801')}
										, {field: "serverNm", title: mint.label.getLabel('lb-359')}
										/* , {field: "hostNm", title: mint.label.getLabel('lb-470')} */
										];

									mint.ui.setMultiColumnComboBox('server', dataSource, columns, "serverNm", "serverId");

									var serverId = targetData.serverId;
									if( !mint.common.isEmpty(serverId) ) {
										$("#server").data("kendoMultiColumnComboBox").value(serverId);
									} else {
										$("#server").data("kendoMultiColumnComboBox").value(dataSource.options.data[0].serverId);
									}

								}, {errorCall : true}
							);

 						} else { // 읽기 모드일때
							var template = kendo.template($('#template-ifModel-detail').html());
							detailRow.find(".gridDetail").html(template(targetData));

							$(".attributeArea").kendoTooltip({
								filter: "input",
								position: "top"
							});
 						}

					} catch ( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_detailExpand"});
					}
				}, // end fn_detailExpand

				//-----------------------------------------------------------------------
				// Description :: 시스템 Grid - 상세정보 수정(모델속성)
				//-----------------------------------------------------------------------
				fn_appTypeDetail : function(appType, targetObj) {
					try {
						if( !mint.common.isEmpty(appType) ) {
							var requestObj = new Object();
							requestObj.appType = appType;

							mint.callService(
								requestObj
							 	, screenName
								, 'REST-R01-RT-01-00'
								, function(jsonData) {
									if( !mint.common.isEmpty(jsonData) ) {

								 		$.main.viewModel = kendo.observable({ attribute : jsonData });
										kendo.bind($("#attDetail"), $.main.viewModel);

										if(!mint.common.isEmpty(targetObj)) {
											var data = $("#gd-system").data("kendoGrid").dataItem(targetObj.masterRow);

											for(var key in data.attributes) {
											    for(var i=0; i<data.attributes[key].length; i++) {
											        if( key != "uid" && !mint.common.isEmpty(data.attributes[key][i]) ) {
											        	if(data.attributes[key][i].inputType == "1") {
											        		targetObj.detailRow[0].querySelector("#"+key).kendoBindingTarget.target.value(data.attributes[key][i].val);
											        	} else if(data.attributes[key][i].inputType == "3") {
											        		if(data.attributes[key][i].val == "TRUE") {
											        			targetObj.detailRow[0].querySelector("#"+key).kendoBindingTarget.target.check(true);
											        		} else {
											        			targetObj.detailRow[0].querySelector("#"+key).kendoBindingTarget.target.check(false);
											        		}
											        	} else if(data.attributes[key][i].inputType == "4") {
											        		targetObj.detailRow[0].querySelector("#"+key).kendoBindingTarget.target.search(data.attributes[key][i].val);
											        	} else if(data.attributes[key][i].inputType == "6") {
											        		targetObj.detailRow[0].querySelector("#"+key).value = decodeURIComponent(atob(data.attributes[key][i].val));
											        	} else {
											        		targetObj.detailRow[0].querySelector("#"+key).value = data.attributes[key][i].val;
											        	}
											        }
											    }
											}
										} else {

											for(var i=0; i<jsonData.length; i++) {
												if(jsonData[i].inputType == "1") {
													$("#attDetail").context.querySelector("#"+jsonData[i].cd).kendoBindingTarget.target.value(jsonData[i].defaultValue);
												} else if(jsonData[i].inputType == "3") {
													if(jsonData[i].defaultValue == "TRUE") {
														$("#attDetail").context.querySelector("#"+jsonData[i].cd).kendoBindingTarget.target.check(true);
													} else {
														$("#attDetail").context.querySelector("#"+jsonData[i].cd).kendoBindingTarget.target.check(false);
													}
												} else if(jsonData[i].inputType == "4") {
													$("#attDetail").context.querySelector("#"+jsonData[i].cd).kendoBindingTarget.target.value(jsonData[i].defaultValue);
												} else if(jsonData[i].inputType == "6") {
													$("#attDetail").context.querySelector("#"+jsonData[i].cd).value  = decodeURIComponent(atob(jsonData[i].defaultValue));
									        	}  else {
													$("#attDetail").context.querySelector("#"+jsonData[i].cd).value = jsonData[i].defaultValue;
												}
											}

										}
									} else {
										$("#attDetail > .row").empty();
									}
								} , {errorCall : true}
							);
						} else {
							$("#attDetail > .row").empty();
						}
					} catch ( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_appTypeDetail"});
					}
				},//end fn_appTypeDetail()

				//-----------------------------------------------------------------------
				// Description :: 레이아웃 버튼 클릭 이벤트
				//-----------------------------------------------------------------------
				fn_btnLayoutClickEvent : function(jsonObject) {
					try {
						var isSourceSystemContained = false;
						var isTargetSystemContained = false;
						var gridData = $("#gd-system").data("kendoGrid").dataSource.view();

						for(var i=0; i<gridData.length; i++){
							if( gridData[i].nodeTypeCd == '0' )
								isSourceSystemContained = true;
							if( gridData[i].nodeTypeCd == '2' )
								isTargetSystemContained = true;
			           	}

						if( !isSourceSystemContained || !isTargetSystemContained) {
							mint.common.alert('Source/Target 은 1:1/1:N/N:1 관계만 허용됩니다');
							return;
						} else {
							var modelObject = new Object();

							if( !$.main_detail.isLayoutModify ) {
								modelObject.mid = $("#hd-modelMid").val();
							}

							modelObject.appModels = gridData;

							mint.common.setScreenParam('modelObject', modelObject);
							mint.common.setScreenParam('callback', '$.main_detail.fn_btnLayoutClickEventCallBack');
							mint.common.setScreenParam("isModify", true);
							mint.attachContents('layoutDiv', '../sub-an/AN-06-03-002.html');
						}


					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_btnLayoutClickEvent"});
					}
				},//end fn_btnLayoutClickEvent()

				//-----------------------------------------------------------------------
				// Description :: 레이아웃 버튼 클릭 이벤트 CallBack
				//-----------------------------------------------------------------------
				fn_btnLayoutClickEventCallBack : function(responseData, isModify) {
					try {

						if(!mint.common.isEmpty(isModify)) {
							$.main_detail.isLayoutModify = isModify;
						}

						$("#btn-layout > i").addClass("fa-check-square-o");
						$("#btn-layout > i").removeClass("fa-square-o");
						$("#btn-layout").css("color","#1c84c6");

					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_btnLayoutClickEventCallBack"});
					}
				},//end fn_btnLayoutClickEventCallBack()

				//-----------------------------------------------------------------------
				// Description :: init User Grid
				//-----------------------------------------------------------------------
				fn_initUserGrid : function(jsonData) {
					try {
						$("#gd-user").kendoGrid({
				          	dataSource : $.main_detail.fn_getUserGridDataSource([])
							, filterable: false
							, scrollable: false
							, noRecords: true
							, resizable: true
				            , sortable: true
				            , selectable: true
				            , editable: "inline"
				            , toolbar : kendo.template( $("#template-userSearch").html() )
							, columns: [
								{
									field : "roleTypeNm",
									title : mint.label.getLabel('lb-3041'),
									headerAttributes : { style : "text-align: center" },
									attributes : { style : "text-align: center; white-space: nowrap;" },
									editor : mint.ui.gridEditorRoleTypeComboBox,
								},{
									field : "systemDisplayNm",
									title : mint.label.getLabel('lb-3042'),
									headerAttributes : { style : "text-align: center" },
									attributes : { style : "text-align: center; white-space: nowrap;" },
									hidden : true
								},{
									field : "userNm",
									title : mint.label.getLabel('lb-3043'),
									headerAttributes : { style : "text-align: center" },
									attributes : { style : "text-align: center; white-space: nowrap;" }
								},{
									field : "cellPhone",
									title :  mint.label.getLabel('lb-3044'),
									headerAttributes : { style : "text-align: center" },
									attributes : { style : "text-align: center; white-space: nowrap;" }
								},{
									field : "phone",
									title : mint.label.getLabel('lb-3045'),
									headerAttributes : { style : "text-align: center" },
									attributes : { style : "text-align: center; white-space: nowrap;" }
								},{
									field : "email",
									title : mint.label.getLabel('lb-3046'),
									headerAttributes : { style : "text-align: center" },
									attributes : { style : "text-align: center; white-space: nowrap;" }
								},{
									attributes : { style : "text-align: center; white-space: nowrap;" },
									command : [
										{
											name : "edit",
											text :
											{
												edit : mint.label.getLabel("lb-342"),
												update : mint.label.getLabel("lb-310"),
												cancel : mint.label.getLabel("lb-143")
											},
											click : function(e) {
												var row = this.tbody.find("tr[data-role='editable']");
											}
										},{
											name : "deletes",
											text : "<span class='k-icon k-i-delete'></span>" + mint.label.getLabel('lb-343'),
											click : function(e) {
												var	dataItem = this.dataItem($(e.target).closest("tr"));
												var confirm = mint.common.confirm('BI00003', dataItem.userNm );

												if (confirm == true) {
										        	this.dataSource.remove(dataItem);
												}
											}
										}
									]
								},
								{ field : "userId"     , hidden : true },
								{ field : "roleTypeCd" , hidden : true },
								{ field : "systemId"   , hidden : true },
								{ field : "systemCd"   , hidden : true },
								{ field : "systemNm"   , hidden : true },
								{ field : "seq"        , hidden : true }
							]
							, dataBound: function (e) {
						    	if(0 == $("#gd-user").data().kendoGrid.dataSource.view().length) {
						    		$("#gd-user").children(".k-grid-content").height('150');
						    	} else {
						    		$("#gd-user").children(".k-grid-content").height('auto');
						    	}

						    }
				        });
					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_initUserGrid"});
					}
				},//end fn_initUserGrid()

				//-----------------------------------------------------------------------
				// Description :: init File Upload
				//-----------------------------------------------------------------------
				fn_initFileUpload : function(jsonData) {
					try {
				 		$("#fu-uploadFile").kendoUpload({
				 			 files: jsonData,
				 			 async: {
				 				saveUrl: mint.baseServiceUrl + "/ut/file/upload",//TODO: REST 정보에 관리되도록 조치할것.
				 				removeUrl: "remove",
				 				autoUpload: false
					 		},
				 			localization: {
				 				select: mint.label.getLabel('lb-220')
				 			},
				 			select : function(e) {
		                    	for( var i = 0; i < e.files.length; i++ ) {
		                    		if( e.files[i].size == 0 ) {
		                    			mint.common.alert('CW00013', e.files[i].name);
		                    			e.preventDefault();
		                    		}

		                    		if( mint.common.invalidFileName(e.files[i].name) ) {
		                    			mint.common.alert('CW00015', e.files[i].name);
		                    			e.preventDefault();
		                    		}
		                    		$.main_detail.uploadFileSelectedCount++;
		                    	}
				 			},
				 			upload: function(e) {
								e.data = {userId:mint.session.getUserId()};
				 			},
				 			progress: function(e) {
				 				$.main_detail.fn_uploadProgress(e);
				 			},
				 			cancel: function(e) {

				 			},
				 			error: function(e) {
				 				$.main_detail.fn_uploadCheck(e);
				 			},
				 			success: function(e) {
				 				$.main_detail.fn_uploadCheck(e);
				 			},
				 			complete: function(e) {
				 				$.main_detail.fn_uploadComplete(e);
				 			},
				 			remove: function(e) {
								$.main_detail.fn_removeFile(e);
				 		    }
				 		});
					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_initFileUpload"});
					}
				},//end fn_initFileUpload()

				//-----------------------------------------------------------------------
				// Description :: System Grid DataSource
				//-----------------------------------------------------------------------
				fn_getSystemGridDataSource : function(jsonData) {
					try {

						var	dataSource = new kendo.data.DataSource({
								  data: jsonData
							    , page:1
							    , schema: {
							    	model: $.main_detail.fn_getSystemGridModel()
							    }
								//, sort: { field: "nodeTypeNm", dir: "asc" }
							});

						return dataSource;
					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main.fn_getSystemGridDataSource"});
					}
				},//end fn_getSystemGridDataSource()

				//-----------------------------------------------------------------------
				// Description :: System Grid Model
				//-----------------------------------------------------------------------
				fn_getSystemGridModel : function() {
					try {
						var SystemGridModel = new kendo.data.Model.define({
							id: "systemId",
							fields: {
								seq             : {editable: true,   nullable: false,  defaultValue: ""},
								nodeTypeNm      : {editable: ($.main_detail.isModify) ? false : true,   nullable: false,  defaultValue: ""},
								orgDisplayNm    : {editable: false,  nullable: false,  defaultValue: ""},
								systemDisplayNm : {editable: false,  nullable: false,  defaultValue: ""},
								resourceNm      : {editable: true,   nullable: false,  defaultValue: ""},
								service         : {editable: false,  nullable: false,  defaultValue: ""},
								serviceDesc     : {editable: false,  nullable: false,  defaultValue: ""},
		            			systemId	    : {editable: false,  nullable: false,  defaultValue: ""},
		            			systemCd	    : {editable: false,  nullable: false,  defaultValue: ""},
		            			systemNm	    : {editable: false,  nullable: false,  defaultValue: ""},
		            			orgId	        : {editable: false,  nullable: false,  defaultValue: ""},
		            			orgCd	        : {editable: false,  nullable: false,  defaultValue: ""},
		            			orgNm	        : {editable: false,  nullable: false,  defaultValue: ""},
		            			businessId	    : {editable: false,  nullable: false,  defaultValue: ""},
		            			businessCd	    : {editable: false,  nullable: false,  defaultValue: ""},
		            			businessNm	    : {editable: false,  nullable: false,  defaultValue: ""},
		            			nodeTypeCd 	    : {editable: false,  nullable: false,  defaultValue: ""},
		            			resourceCd 	    : {editable: false,  nullable: false,  defaultValue: ""},
							}
						});

						return SystemGridModel;

					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main.fn_getSystemGridModel"});
					}
				}, //end fn_getSystemGridModel()

				//-----------------------------------------------------------------------
				// Description :: User Grid DataSource
				//-----------------------------------------------------------------------
				fn_getUserGridDataSource : function(jsonData) {
					try {

						var	dataSource = new kendo.data.DataSource({
								  data: jsonData
							    , page:1
							    , schema: {
							    	model: $.main_detail.fn_getUserGridModel()
							    }
							});

						return dataSource;
					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main.fn_getUserGridDataSource"});
					}
				},//end fn_getUserGridDataSource()

				//-----------------------------------------------------------------------
				// Description :: User Grid Model
				//-----------------------------------------------------------------------
				fn_getUserGridModel : function() {
					try {

						var UserModel = new kendo.data.Model.define({
		            		id: "userId",
		            		fields: {
		            			objectType	: {editable: false, nullable: false, defaultValue: "User"},
		            			userId	    : {editable: false, nullable: false, defaultValue: ""},
		            			userNm	    : {editable: false, nullable: false, defaultValue: ""},
		            			password	: {editable: false, nullable: false, defaultValue: ""},
		            			companyNm	: {editable: false, nullable: false, defaultValue: ""},
		            			cellPhone   : {editable: false, nullable: false, defaultValue: ""},
		            			phone	    : {editable: false, nullable: false, defaultValue: ""},
		            			email	    : {editable: false, nullable: false, defaultValue: ""},
		            		}
						});

						var UserGridModel = new kendo.data.Model.define({
							id: "userId",
		            		fields: {
		            			seq	        : {editable: false, nullable: false, defaultValue: ""},
		            			roleTypeNm	: {editable: true},

		            			//TODO : 중첩필드 적용은 어떻게 하는지 찾아볼것, 테스트 결과 안되네...
			            		user        : {editable: false,  nullable: false, defaultValue: new UserModel()},
		            			userId	    : {editable: false, nullable: false, defaultValue: ""},
		            			userNm	    : {editable: false, nullable: false, defaultValue: ""},
		            			password	: {editable: false, nullable: false, defaultValue: ""},
		            			companyNm	: {editable: false, nullable: false, defaultValue: ""},
		            			cellPhone   : {editable: false, nullable: false, defaultValue: ""},
		            			phone	    : {editable: false, nullable: false, defaultValue: ""},
		            			email	    : {editable: false, nullable: false, defaultValue: ""},
		            			roleTypeCd  : {editable: false, nullable: false, defaultValue: ""},

		            			//TODO : 삼성전기버전의 필드인데, 불필요시 향후 삭제할것.
		            			systemDisplayNm	: {editable: false,  nullable: false, defaultValue: ""},
		            			systemId	: {editable: false,  nullable: true,  defaultValue: ""},
		            			systemCd	: {editable: false,  nullable: true,  defaultValue: ""},
		            			systemNm	: {editable: false,  nullable: true,  defaultValue: ""},
		            		}
						});

						return UserGridModel;

					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main.fn_getUserGridModel"});
					}
				}, //end fn_getUserGridModel()

				//-----------------------------------------------------------------------
				// Description :: 파일 업로드 상태 체크
				//-----------------------------------------------------------------------
				fn_uploadCheck : function( e ) {
					try {
						var xhr = e.XMLHttpRequest;
						var httpStatus = xhr.status;
						if( httpStatus == 200 ) {
							//-----------------------------------------------------------------------
							// Response ComMessage
							//-----------------------------------------------------------------------
							var msg = JSON.parse(xhr.responseText);
							if( msg.errorCd == 0 ) {
								var responseObject = msg.responseObject;
								if( !mint.common.isEmpty(responseObject) && !mint.common.isEmpty(responseObject[0]) ) {
									var uploadFileInfo = new Object();
									uploadFileInfo.fileNm   = responseObject[0].fileNm;
									uploadFileInfo.filePath = responseObject[0].filePath;
									$.main_detail.uploadFileInfoList.push(uploadFileInfo);

									$.main_detail.uploadFileCount ++;
								}
							} else {
								$.main_detail.uploadFileFailInfo.push({uid: e.files[0].uid, msg: msg.errorMsg});
								e.preventDefault();
								return;
							}
						} else {
							switch( httpStatus ) {
								case 12029 : //server shutdown
									alertMsg = mint.message.getMessage('CE12029', null);
									break;
								case 404 :
									alertMsg = mint.message.getMessage('CE10404', null);
									break;
								default :
									alertMsg = mint.message.getMessage('CE10000', httpStatus);
									break;
							}
							mint.common.errorDialog('Http', httpStatus, alertMsg, null);
						}
					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main.fn_uploadCheck"});
					}
				},

				//-----------------------------------------------------------------------
				// Description :: 파일 업로드시 진행시.
				//-----------------------------------------------------------------------
				fn_uploadProgress : function(event) {
					try {
						mint.waitingLoad(true);
					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_uploadProgress"});
					}
				},

				//-----------------------------------------------------------------------
				// Description :: 파일 업로드 완료시.
				//-----------------------------------------------------------------------
				fn_uploadComplete : function(event) {
					try {
						mint.waitingLoad(false);
						//-----------------------------------------------------------------------
						// 업로드 실패시 Retry 버튼 숨김
						//-----------------------------------------------------------------------
						$('.k-button.k-upload-action[aria-label="Retry"]').css('display','none');

						//-----------------------------------------------------------------------
						// 업로드 실패한 파일 정보가 있으면 Alert Message 후 멈춤
						//-----------------------------------------------------------------------
						if( $.main_detail.uploadFileFailInfo.length > 0 ) {
							mint.common.alert( $.main_detail.uploadFileFailInfo[0].msg );
							return;
						}
						//-----------------------------------------------------------------------
						// 파일 업로드가 최종적으로 완료되면, save 호출
						// 파일 업로드후 업로드카운트 >= 셀렉트카운트 이면 Next 처리
						//-----------------------------------------------------------------------
						if( $.main_detail.uploadFileCount >= $.main_detail.uploadFileSelectedCount ) {
							$.main_detail.uploadFileFailInfo = [];
							$.main_detail.fn_saveInterface();
						}
					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_uploadComplete"});
					}
				},

				//-----------------------------------------------------------------------
				// Description :: 파일 업로드시 선택된 파일 삭제
				//-----------------------------------------------------------------------
				fn_removeFile : function(e) {
					try {
		 				var files = e.files;

						//-----------------------------------------------------------------------
						// 기 등록된 파일을 삭제할 경우 기 등록된 정보에서도 삭제 처리
						// --> 인터페이스 등록화면에서 필요한 처리 로직
						//-----------------------------------------------------------------------
		 		       	for(var i=0; i<$('#fu-uploadFile').data("kendoUpload").options.files.length; i++) {
		 		   			if(files[0].uid == $('#fu-uploadFile').data("kendoUpload").options.files[i].uid) {
		 		   				$('#fu-uploadFile').data("kendoUpload").options.files.splice(i, 1);
		 		   			}
		 		   		}

						//-----------------------------------------------------------------------
						// 신규로 등록된 파일을 삭제할 경우 신규로 등록된 정보에서도 삭제 처리
						//-----------------------------------------------------------------------
						for( var i = 0; i < $.main_detail.uploadFileInfoList.length; i++ ) {
							if( files[0].uid == $.main_detail.uploadFileInfoList[i].uid ) {
								$.main_detail.uploadFileInfoList.splice(i,1);
							}
						}

						//-----------------------------------------------------------------------
						// 화면상에서 삭제된것 처럼 처리하기 위해 html remove
						//-----------------------------------------------------------------------
		            	$('li.k-file[data-uid="' + files[0].uid + '"]').remove();

						//-----------------------------------------------------------------------
						// 공지사항/FAQ 의 경우 파일정보의 flag 값에 따라 CRUD 처리함
						//-----------------------------------------------------------------------
		            	//$.main_detail.fn_setAttachFileFlag(files[0].fileId, files[0].fileNm, 'D');

						//-----------------------------------------------------------------------
						// e.files.rowFile 정보가 비어있지 않으면 신규로 업로드한 파일로 인지
						//-----------------------------------------------------------------------
						if(!mint.common.isEmpty(e.files[0].rawFile)) {
							if($.main_detail.uploadFileSelectedCount > 0) {
								$.main_detail.uploadFileSelectedCount--;
							}
						}

						//-----------------------------------------------------------------------
						// 파일 업로드에 실패한 파일을 삭제할 경우 uid 및 msg 초기화
						//-----------------------------------------------------------------------
						for( var i = 0; i < $.main_detail.uploadFileFailInfo.length; i++ ) {
							if( files[0].uid == $.main_detail.uploadFileFailInfo[i].uid ) {
								$.main_detail.uploadFileFailInfo.splice(i,1);
							}
						}

						//-----------------------------------------------------------------------
						// kendoFileUpload Component 의 removeURL 을 호출하지 않도록 처리하기 위함
						//-----------------------------------------------------------------------
						e.preventDefault();

					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_removeFile"});
					}
				},

	          	//-----------------------------------------------------------------------
	            // Description :: 첨부파일 삭제 플래그 설정(공지사항 및 FAQ 처리 로직)
	            //-----------------------------------------------------------------------
	            fn_setAttachFileFlag : function(fileId, fileName, flag) {
	            	for(var i = 0; i < $.sub.originalAttachFile.length; i++) {
	            		if( $.sub.originalAttachFile[i].fileId == fileId && $.sub.originalAttachFile[i].fileNm == fileName) {
	            			$.sub.originalAttachFile[i].flag = flag;
	            		}
	            	}
	            },

				//-----------------------------------------------------------------------
				// Description :: 업무 정보 셋팅
				//-----------------------------------------------------------------------
				fn_setBusinessInfo : function(selectedItem) {
					try {
						if( !mint.common.isEmpty(selectedItem) ) {
							$('#hd-businessId').val(selectedItem.businessId);
							$('#hd-businessCd').val(selectedItem.businessCd);
							$('#hd-businessNm').val(selectedItem.businessNm);
							$('#tf-businessDisplayNm').val(selectedItem.businessNm + '('+ selectedItem.businessCd +')');

							// $.main_detail.fn_reSetSystemInfo();
						}

					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_setBusinessInfo"});
					}
				},//end fn_setBusinessInfo()


				//-----------------------------------------------------------------------
				// Description :: 사용자 정보 셋팅
				//-----------------------------------------------------------------------
				fn_setUserInfo : function(selectedItem) {
					try {

						if( !mint.common.isEmpty(selectedItem) ) {
							var userInfo = new Object();

							userInfo.roleTypeNm = '';
							userInfo.roleTypeCd = '';
							userInfo.userNm     = selectedItem.userNm;
							userInfo.cellPhone  = selectedItem.cellPhone;
							userInfo.phone      = selectedItem.phone;
							userInfo.email      = selectedItem.email;
							userInfo.reUseDelYn = 'Y';
							userInfo.userId     = selectedItem.userId;

							userInfo.systemNm   = '';
							userInfo.systemId   = '';
							userInfo.systemCd   = '';
							userInfo.systemDisplayNm = '';

							//담당자 중복 체크
							var userGrid = $('#gd-user').data('kendoGrid');
							userGrid.dataSource.pushCreate(userInfo);
							userGrid.select("tr:last");
							userGrid.editRow(userGrid.select());
						}

					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_setUserInfo"});
					}
				},//end fn_setUserInfo()

				//-----------------------------------------------------------------------
				// Description :: 시스템 정보 셋팅
				//-----------------------------------------------------------------------
				fn_setSystemInfo : function(selectedItem) {
					try {

						if( !mint.common.isEmpty(selectedItem) ) {
							var systemInfo = new Object();

							//TODO : nodeType -> nodeTypeCd 로 변경 필요.
							systemInfo.nodeTypeNm      = '';
							systemInfo.nodeTypeCd      = '';

							systemInfo.orgDisplayNm    = selectedItem.org.objName    + mint.lb + selectedItem.org.objCode    + mint.rb;
							systemInfo.systemDisplayNm = selectedItem.system.objName + mint.lb + selectedItem.system.objCode + mint.rb;

							systemInfo.resourceNm = '';
							systemInfo.resourceCd = '';
							systemInfo.service = '';
							systemInfo.serviceDesc = '';

							systemInfo.orgId = selectedItem.org.id;
							systemInfo.orgCd = selectedItem.org.objCode;
							systemInfo.orgNm = selectedItem.org.objName;

							systemInfo.systemId = selectedItem.system.id;
							systemInfo.systemCd = selectedItem.system.objCode;
							systemInfo.systemNm = selectedItem.system.objName;

							systemInfo.reUseDelYn = 'Y';

							var systemGrid = $('#gd-system').data('kendoGrid');

							// ----------------------------------------------------------
							// 시스템 Seq값을 미리설정.
							// ----------------------------------------------------------
							{
				            	var arrSystemSeq = [];
				            	var systemSeq = 0;
								for(var i=0; i < systemGrid.dataSource.view().length; i++) {
									arrSystemSeq.push(parseInt(systemGrid.dataSource.view()[i].seq));
								}

								if(arrSystemSeq.length > 0 ) {
									systemSeq = Math.max.apply(null, arrSystemSeq) + 1;
								}
							}

							systemInfo.seq = systemSeq;
							systemInfo.systemSeq = systemSeq;

							systemGrid.dataSource.pushCreate(systemInfo);

							systemGrid.select("tr:last");
							systemGrid.editRow(systemGrid.select());
							systemGrid.expandRow(systemGrid.select());
						}

					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_setSystemInfo"});
					}
				},//end fn_setSystemInfo()

				//-----------------------------------------------------------------------
				// Description :: 저장
				//-----------------------------------------------------------------------
				fn_save : function() {
					try {
						if( $.main_detail.fn_validationCheck() ) {
							//-----------------------------------------------------------------------
							// 업로드에 실패한 파일을 삭제하지 않고 저장 버튼 클릭시 Alert Messgae 후 멈춤
							// ( 체크할 수 있는 방법이 마땅치 않음 )
							//-----------------------------------------------------------------------
							if( $.main_detail.uploadFileFailInfo.length > 0 ) {
								mint.common.alert('[RE]-' +$.main_detail.uploadFileFailInfo[0].msg);
								return;
							}

							if( $.main_detail.uploadFileCount >=  $.main_detail.uploadFileSelectedCount ) {
								$.main_detail.fn_saveInterface();
							} else {
								$('#fu-uploadFile').data('kendoUpload').upload();
							}

						}
					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_save"});
					}
				},//end fn_save()


				//-----------------------------------------------------------------------
				// Description :: 저장 - Interface
				// TODO : 결재 프로세스 정리후 보완 필요
				//-----------------------------------------------------------------------
				fn_saveInterface : function() {
					try {
						var requestObject = $.main_detail.fn_getRequirementObject();
						var groupId = null;

						if( !mint.common.isEmpty($("#cb-groupId").val()) ) {
							groupId = $("#cb-groupId").val();
						}

						if( mint.common.isEmpty(requestObject) ) return;

						if( !mint.common.isEmpty($('#hd-requirementId').val()) && $.main_detail.isModify == true ) {
							mint.callService(requestObject, screenName, 'REST-U01-AN-01-01', '$.main_detail.fn_saveComplete',
								{
									  errorCall : true
									, notificationView : false
									, params 	: {requirementId : $("#hd-requirementId").val()}
									, groupId : groupId
								}
							);

						} else {
							//-----------------------------------------------------------------------
							// 등록일 경우
							//-----------------------------------------------------------------------
							mint.callService(requestObject, screenName, 'REST-C01-AN-01-01', '$.main_detail.fn_saveComplete',
								{
									  errorCall : true
									, notificationView : false
									, groupId : groupId
								}
							);
						}

					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_saveInterface"});
					}
				},//end fn_saveInterface()

				//-----------------------------------------------------------------------
				// Description :: 저장 콜백
				//-----------------------------------------------------------------------
				fn_saveComplete : function(jsonObject) {
					try {
						if( !mint.common.isEmpty(jsonObject) ) {
							//-----------------------------------------------------------------------
							// - Alert Message 를 Display 한다.
							//-----------------------------------------------------------------------
							var msgCode = null;
							if( mint.common.isEmpty($('#hd-requirementId').val()) ) {
								msgCode = 'CI00101';
							} else {
								msgCode = 'CI00102';
							}

							//-----------------------------------------------------------------------
							// - default 데이터 접근 권한을 자동 반영
							//-----------------------------------------------------------------------
							mint.callService(null, screenName, 'REST-R05-SU-01-02', function(jsonData) {
								if( ! mint.common.isEmpty(jsonData) ) {
									var roots = jsonData.roots;
									if( ! mint.common.isEmpty(roots) && roots.length > 0 ) {
										//-----------------------------------------------------------------------
										// root data 중 첫번째 항목을 지
										//-----------------------------------------------------------------------
										var root = roots[0];
										var requestObject = new Object();
										requestObject.list = [];

										var accessRoleMapping = new Object();
										accessRoleMapping.roleId = root.id;
										accessRoleMapping.interfaceId = jsonObject.requirement.interface.interfaceId;
										accessRoleMapping.seq = 1;

										requestObject.list.push(accessRoleMapping);

										mint.callService(requestObject, screenName, 'REST-C10-SU-01-02', function(jsonData) {
											if( ! mint.common.isEmpty(jsonData) ) {
												mint.common.alert(msgCode, null);
												$.main_detail.fn_moveDetailView(jsonObject.requirement.requirementId);
											};
										}, { errorCall : true, params : { interfaceId : jsonObject.requirement.interface.interfaceId } } );

									}
								}
							}, { errorCall : true, notificationView : false } );
						} else {
							mint.common.alert(msgCode, null);
							$.main_detail.fn_moveDetailView(jsonObject.requirement.requirementId);
						}
					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_saveComplete"});
					}
				},//end fn_saveComplete()

				//-----------------------------------------------------------------------
				// Description : 저장후 상세페이지 이동
				//-----------------------------------------------------------------------
				fn_moveDetailView : function(requirementId) {
					try {
						//-----------------------------------------------------------------------
						// - 공통코드를 재조회 한다.
						//-----------------------------------------------------------------------
						mint.getCommonCode(function(){
							//-----------------------------------------------------------------------
							// - 상세 페이지로 이동하는데 이전 호출 파라메터에 따라 기본상세, 수정의뢰상세 등으로 분리된다.
							//-----------------------------------------------------------------------
							mint.setDetailView('Y');
							mint.common.setScreenParam("requirementId", requirementId);

							//-----------------------------------------------------------------------
							// - 결재를 진행할 것인지 확인한다.
							//-----------------------------------------------------------------------
							mint.common.setScreenParam("isApprovalCheck", false);
							mint.move('../sub-an/AN-01-01-003');

						}, true);
					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_moveDetailView"});
					}
				},

				//-----------------------------------------------------------------------
				// Description : 인터페이스 결재요청 콜백
				//-----------------------------------------------------------------------
				fn_requestApprovalCallback : function(jsonData) {
					try {
						if(null != jsonData) {
							mint.setDetailView('Y');
							mint.common.setScreenParam("requirementId", jsonData.approvalItemId);
				      		mint.move('../sub-an/AN-01-00-003');
						}
					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_requestApprovalCallback"});
					}
				},//end fn_requestApprovalCallback()

				//-----------------------------------------------------------------------
				// Description :: Requirement Object 생성
				//-----------------------------------------------------------------------
				fn_getRequirementObject : function() {
					try {

						//-----------------------------------------------------------------------
						// Business Object
						//-----------------------------------------------------------------------
						var requirementBusinessObject = new Object();
						requirementBusinessObject.objectType = 'Business';
						requirementBusinessObject.businessId = $('#hd-businessId').val();
						requirementBusinessObject.businessNm = $('#hd-businessNm').val();
						requirementBusinessObject.businessCd = $('#hd-businessCd').val();

						//-----------------------------------------------------------------------
						// Channel Object
						//-----------------------------------------------------------------------
						var channelObject = new Object();
						channelObject.objectType = 'Channel';
						channelObject.channelId  = $("#cb-channelNm").data("kendoDropDownList").dataItem().channelId;
						channelObject.channelNm  = $("#cb-channelNm").data("kendoDropDownList").dataItem().channelNm;
						channelObject.channelCd  = $("#cb-channelNm").data("kendoDropDownList").dataItem().channelCd;

						//-----------------------------------------------------------------------
						// InterfaceMapping Object
						//-----------------------------------------------------------------------
						//TODO: 향후 필요시 개발하도록 한다.
						var interfaceMappingObject = new Object();
						interfaceMappingObject.objectType      = 'InterfaceMapping';
						interfaceMappingObject.asisInterfaceId = '';
						interfaceMappingObject.channelId       = '';
						interfaceMappingObject.interfaceId     = '';
						interfaceMappingObject.regDate         = mint.common.remakeYYMMDD(new Date());
						interfaceMappingObject.regId           = mint.session.getUserId();
						interfaceMappingObject.modDate         = mint.common.remakeYYMMDD(new Date());
						interfaceMappingObject.modId           = mint.session.getUserId();

						//-----------------------------------------------------------------------
						// InterfacePattern Object
						//-----------------------------------------------------------------------
						//TODO: 향후 필요시 개발하도록 한다.
						var patternObejct = new Object();
						patternObejct.objectType = 'InterfacePattern';


						//-----------------------------------------------------------------------
						// System Object
						//-----------------------------------------------------------------------
						var systemList             = [];
						var senderSystemInfoList   = [];
						var receiverSystemInfoList = [];
						var businessList           = [];

						var systemGridView = $("#gd-system").data().kendoGrid.dataSource.view();
						for(var i=0; i < systemGridView.length; i++) {

							//시스템 리스트
							var systemObject = new Object;
							systemObject.objectType  = 'System';
							systemObject.nodeType    = systemGridView[i].nodeTypeCd; //mint.common.findCommonCode(mint.common.commonCodeMap.get("cds").IM08, 'nm',  systemGridView[i].nodeTypeNm).cd;
							systemObject.nodeTypeNm  = systemGridView[i].nodeTypeNm;
							systemObject.seq         = systemGridView[i].seq;

							systemObject.systemId    = systemGridView[i].systemId;
							systemObject.systemNm    = systemGridView[i].systemNm;
							systemObject.systemCd    = systemGridView[i].systemCd;
							systemObject.resourceCd  = systemGridView[i].resourceCd; //mint.common.findCommonCode(mint.common.commonCodeMap.get("cds").IM04, 'nm',  systemGridView[i].resourceNm).cd;
							systemObject.resourceNm  = systemGridView[i].resourceNm;
							systemObject.service     = mint.common.isEmpty(systemGridView[i].service)     ? '' : systemGridView[i].service.trim();
							systemObject.serviceDesc = mint.common.isEmpty(systemGridView[i].serviceDesc) ? '' : systemGridView[i].serviceDesc.trim();

							systemObject.modDate     = mint.common.remakeYYMMDD(new Date());
							systemObject.modId       = mint.session.getUserId();
							systemObject.regDate     = mint.common.remakeYYMMDD(new Date());
							systemObject.regId       = mint.session.getUserId();

							systemList.push(systemObject);

							//업무 리스트
							var businessObject = new Object;
							businessObject.objectType = 'Business';
							businessObject.businessId = $('#hd-businessId').val();
							businessObject.businessCd = $('#hd-businessCd').val();
							businessObject.businessNm = $('#hd-businessNm').val();
							businessObject.seq        = i;
							businessObject.nodeType   = systemGridView[i].nodeTypeCd; //mint.common.findCommonCode(mint.common.commonCodeMap.get("cds").IM08, 'nm',  systemGridView[i].nodeTypeNm).cd;
							businessObject.nodeTypeNm = systemGridView[i].nodeTypeNm;
							businessObject.modDate    = mint.common.remakeYYMMDD(new Date());
							businessObject.modId      = mint.session.getUserId();
							businessObject.regDate    = mint.common.remakeYYMMDD(new Date());
							businessObject.regId      = mint.session.getUserId();

							businessList.push(businessObject);
						}

						//-----------------------------------------------------------------------
						// RelUser Object
						//-----------------------------------------------------------------------
						var relUsersList = [];
						var userGridView = $("#gd-user").data().kendoGrid.dataSource.view();
						for(var i=0; i < userGridView.length; i++) {
							//User
							var userObject = new Object;
							userObject.objectType = 'User';
							userObject.userId     = userGridView[i].userId;
							userObject.userNm     = userGridView[i].userNm;
							userObject.cellPhone  = userGridView[i].cellPhone;
							userObject.phone      = userGridView[i].phone;
							userObject.email      = userGridView[i].email;

							//RelUser
							var relUserObject = new Object();
							relUserObject.objectType = 'RelUser';
							relUserObject.roleType   = userGridView[i].roleTypeCd; //mint.common.findCommonCode(mint.common.commonCodeMap.get("cds").IM09, 'nm',  userGridView[i].roleTypeNm).cd;
							relUserObject.roleTypeNm = userGridView[i].roleTypeNm;
							relUserObject.systemId   = '';
							relUserObject.systemNm   = '';
							relUserObject.seq        = i; //( $.main_detail.isModify == true ) ? userGridView[i].seq : i;
							relUserObject.modDate    = mint.common.remakeYYMMDD(new Date());
							relUserObject.modId      = mint.session.getUserId();
							relUserObject.regDate    = mint.common.remakeYYMMDD(new Date());
							relUserObject.regId      = mint.session.getUserId();

							relUserObject.user = userObject;

							relUsersList.push(relUserObject);
						}

						//-----------------------------------------------------------------------
						// Interface Object
						//-----------------------------------------------------------------------
						var interfaceObject = new Object();
						interfaceObject.objectType            = 'Interface';
						interfaceObject.interfaceId           = $('#hd-interfaceId').val();
						interfaceObject.interfaceNm           = $('#tf-interfaceNm').val();
						interfaceObject.integrationId         = $('#tf-integrationId').val();

						//Data처리방향
						interfaceObject.dataPrDir             = $('#cb-dataPrDirNm').data("kendoDropDownList").dataItem().cd;
						interfaceObject.dataPrDirNm           = $('#cb-dataPrDirNm').data("kendoDropDownList").dataItem().nm;
						//Data처리방식
						interfaceObject.dataPrMethod          = $('#cb-dataPrMethodNm').data("kendoDropDownList").dataItem().cd;
						interfaceObject.dataPrMethodNm        = $('#cb-dataPrMethodNm').data("kendoDropDownList").dataItem().nm;
						//App처리방식
						interfaceObject.appPrMethod           = $('#cb-appPrMethodNm').data("kendoDropDownList").dataItem().cd;
						interfaceObject.appPrMethodNm         = $('#cb-appPrMethodNm').data("kendoDropDownList").dataItem().nm;
						//Data순차보장//TODO: 디비 컬럼명하고 동일하게 빈 속성 수정할것.
						interfaceObject.dataSeqYn             = $("#cb-dataOrderYn").data("kendoDropDownList").value();
						//발생주기
						interfaceObject.dataFrequency         = $('#cb-dataFrequencyNm').data("kendoDropDownList").dataItem().cd;
						interfaceObject.dataFrequencyNm       = $('#cb-dataFrequencyNm').data("kendoDropDownList").dataItem().nm;
						//발생주기 상세
						interfaceObject.dataFrequencyInput    = $('#tf-dataFrequencyInput').val();
						//건당사이즈
						interfaceObject.sizePerTran           = $("#nf-sizePerTran").data("kendoNumericTextBox").value();
						//주기별건수
						interfaceObject.cntPerFrequency       = $("#nf-cntPerFrequency").data("kendoNumericTextBox").value();
						//일일발생횟수
						interfaceObject.cntPerDay             = $("#nf-cntPerDay").data("kendoNumericTextBox").value();
						//일일총전송량
						interfaceObject.qttPerDay             = $("#nf-qttPerDay").data("kendoNumericTextBox").value();

						interfaceObject.startNodeCnt          = 0;//송신시스템카운트
						interfaceObject.endNodeCnt            = 0;//수신시스템카운트

						interfaceObject.channelChangeComments = '';
						interfaceObject.channelChangeCd       = '';
						interfaceObject.channelChangeNm       = '';

						interfaceObject.channel                = channelObject;
						interfaceObject.systemList             = systemList;
						interfaceObject.businessList           = businessList;
						interfaceObject.relUsers               = relUsersList;
						interfaceObject.interfaceMapping       = null;
						interfaceObject.refPattern             = null;
						interfaceObject.senderSystemInfoList   = [];
						interfaceObject.receiverSystemInfoList = [];
						interfaceObject.tagList                = [];

						interfaceObject.regDate                = mint.common.remakeYYMMDD(new Date());
						interfaceObject.regId                  = mint.session.getUserId();
						interfaceObject.modDate                = mint.common.remakeYYMMDD(new Date());
						interfaceObject.modId                  = mint.session.getUserId();

						//-----------------------------------------------------------------------
						// Interface 추가 속성 맵핑 (사이트별 /연계채널별)
						//-----------------------------------------------------------------------
						var propertiesList = [];

						// Interface Additional Attribute
						var additionalAttributeList = mint.common.getCommonCode('interfaceAdditionalAttributeList');

						if( !mint.common.isEmpty( additionalAttributeList ) && additionalAttributeList.length > 0 ) {
							var propertiesObject = new Object();
							propertiesObject.objectType = "InterfaceProperties";
							propertiesObject.attrId     = additionalAttributeList[0].attrId;
							propertiesObject.attrCd     = additionalAttributeList[0].attrCd;
							propertiesObject.type       = "1"; //is Interface additional attribute
							if($('#rd-deployOption').data("kendoSwitch").check()) {
								propertiesObject.attrValue = "2";
							} else {
								propertiesObject.attrValue = "1";
							}

							propertiesList.push(propertiesObject);
						}

						interfaceObject.properties = propertiesList;

						//-----------------------------------------------------------------------
						// Requirement - 첨부파일
						//-----------------------------------------------------------------------
						var attatchFileList = [];

						//기존 첨부파일
						if(0 < $('#fu-uploadFile').data("kendoUpload").options.files.length) {
							for(var i=0; i<$('#fu-uploadFile').data("kendoUpload").options.files.length; i++) {
								var attachFileObject = new Object();
								attachFileObject.objectType    = 'RequirementAttatchFile';
								attachFileObject.requirementId = $("#hd-requirementId").val();
								attachFileObject.fileId        = '';
								attachFileObject.fileNm        = $('#fu-uploadFile').data("kendoUpload").options.files[i].fileNm;
								attachFileObject.filePath      = $('#fu-uploadFile').data("kendoUpload").options.files[i].filePath;
								attachFileObject.regDate       = $('#fu-uploadFile').data("kendoUpload").options.files[i].regDate;
								attachFileObject.regId         = $('#fu-uploadFile').data("kendoUpload").options.files[i].regId;

								attatchFileList.push(attachFileObject);
							}
						}

						//새 첨부파일
						if( $.main_detail.uploadFileInfoList.length > 0 ) {
							for(var i=0; i<$.main_detail.uploadFileInfoList.length; i++) {
								var attachFileObject = new Object();
								attachFileObject.objectType    = 'RequirementAttatchFile';
								attachFileObject.requirementId = $("#hd-requirementId").val();
								attachFileObject.fileId        = '';
								attachFileObject.fileNm        = $.main_detail.uploadFileInfoList[i].fileNm;
								attachFileObject.filePath      = $.main_detail.uploadFileInfoList[i].filePath;
								attachFileObject.regDate       = mint.common.remakeYYMMDD(new Date());
								attachFileObject.regId         = mint.session.getUserId();

								attatchFileList.push(attachFileObject);
							}
				        }

						//-----------------------------------------------------------------------
						// Requirement - 등록유저
						//-----------------------------------------------------------------------
						var regUserObject = new Object();
						regUserObject.objectType = 'User';
						if( $.main_detail.isModify ) {
							regUserObject.userId    = $('#hd-regUserId').val();
							regUserObject.userNm    = $('#tf-regUserNm').val();
							regUserObject.cellPhone = $('#hd-regCellPhone').val();
							regUserObject.phone     = $('#hd-regPhone').val();
							regUserObject.email     = $('#hd-regEmail').val();
						} else {
							regUserObject.userId    = mint.session.getUserId();
							regUserObject.userNm    = mint.session.getUserNm();
							regUserObject.cellPhone = mint.session.getCellPhone();
							regUserObject.phone     = mint.session.getPhone();
							regUserObject.email     = mint.session.getEmail();

							var roleObject = new Object();
							roleObject.objectType   = 'UserRole';
							roleObject.roleId       = mint.session.getRoleId();
							roleObject.roleNm       = mint.session.getRoleNm();
							roleObject.isInterfaceAdmin      = mint.session.isInterfaceAdmin();// 2017-03-20 추가.

							regUserObject.role = roleObject;
						}

						//-----------------------------------------------------------------------
						// Requirement Object
						//-----------------------------------------------------------------------
						var requirementObject = new Object();

						requirementObject.objectType      = 'Requirement';
						requirementObject.requirementId   = $("#hd-requirementId").val();
						requirementObject.requirementNm   = interfaceObject.interfaceNm;
						requirementObject.business        = requirementBusinessObject;
						requirementObject.comments        = $("#ta-description").data("kendoEditor").value();
						requirementObject.interface       = interfaceObject;

						requirementObject.devExpYmd       = mint.common.remakeYYMMDD(new Date()).substring(0, 8);
						requirementObject.devFinYmd       = "";
						requirementObject.testExpYmd      = mint.common.remakeYYMMDD(new Date()).substring(0, 8);
						requirementObject.testFinYmd      = "";
						requirementObject.realExpYmd      = mint.common.remakeYYMMDD(new Date()).substring(0, 8);
						requirementObject.realFinYmd      = "";

						requirementObject.status = 'A1';

						requirementObject.statusNm        = ( $.main_detail.isModify == true ) ?  $("#tf-statusNm").val() : mint.label.getLabel('lb-114');
						requirementObject.attatchFileList = attatchFileList;
						requirementObject.regUser         = regUserObject;
						requirementObject.commentList     = null;//TODO: 향후 필요시 개발하도록 한다.
						requirementObject.delYn           = 'N';
						requirementObject.regDate         = mint.common.remakeYYMMDD(new Date());
						requirementObject.regId           = mint.session.getUserId();
						requirementObject.modDate         = mint.common.remakeYYMMDD(new Date());
						requirementObject.modId           = mint.session.getUserId();

						var interfaceModelObject = new Object();
						var appModels = [];
						interfaceModelObject.objectType = "InterfaceModel";
						interfaceModelObject.mid = $('#hd-modelMid').val();
						interfaceModelObject.name = "ModelInfo";
						interfaceModelObject.stage = mint.common.isEmpty($('#hd-modelStage').val()) ? "0" : $('#hd-modelStage').val();
						interfaceModelObject.stageName = mint.common.isEmpty($('#hd-modelStageNm').val()) ? "개발" : $('#hd-modelStageNm').val();
						interfaceModelObject.comments = $('#tf-integrationId').val() + "_Model";
						interfaceModelObject.deployStatus = $('#hd-modelDeployStatus').val();
						interfaceModelObject.deployStatusName = $('#hd-modelDeployStatusNm').val();
						interfaceModelObject.interfaceId = $('#hd-interfaceId').val();
						interfaceModelObject.integrationId = $('#tf-integrationId').val();
						interfaceModelObject.lastDeployDate = $('#hd-modelLastDeployDate').val();
						interfaceModelObject.lastDeployUser = $('#hd-modelLastDeployUser').val();
						interfaceModelObject.lastDeployUserNm = $('#hd-modelLastDeployUserNm').val();

						var modelStd = $('#rd-modelStd').data("kendoSwitch").check(); // 표준구분
						if(modelStd) {
							interfaceModelObject.std = 'Y';
						} else {
							interfaceModelObject.std = 'N';
						}

						for(var i=0; i < systemGridView.length; i++) {
							systemGridView[i].objectType = "AppModel";
							appModels.push(systemGridView[i]);
						}

						interfaceModelObject.appModels = appModels;

						var requirementModelObject = new Object();
						requirementModelObject.objectType = "RequirementModel";
						requirementModelObject.requirement = requirementObject;
						requirementModelObject.interfaceModel = interfaceModelObject;

						return requirementModelObject;

					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_getRequirementObject"});
					}
				},//end fn_getRequirementObject()

				//-----------------------------------------------------------------------
				// Description ::  Validation 체크
				//-----------------------------------------------------------------------
				fn_validationCheck : function() {
					try {

						//-----------------------------------------------------------------------
						// top-pannel
						//-----------------------------------------------------------------------
						if( mint.common.isEmpty($('#tf-businessDisplayNm').val()) ) {
							mint.common.alert('CW00001', mint.label.getLabel('lb-81'));
							mint.common.focus($('#tf-businessDisplayNm'));
							return;
						}

						if( mint.common.isEmpty($('#tf-interfaceNm').val()) ) {
							mint.common.alert('CW00001', mint.label.getLabel('lb-153'));
							mint.common.focus($('#tf-interfaceNm'));
							return;
						}

						if( !$.main_detail.autoCreateIntegrationID ) {
							if( mint.common.isEmpty($('#tf-integrationId').val()) ) {
								mint.common.alert('CW00001', mint.label.getLabel('lb-154'));
								mint.common.focus($('#tf-integrationId'));
								return;
							}
						}

						if( !mint.common.validate( $('#tf-integrationId').val() ) ) {
							mint.common.alert('CW00012', mint.label.getLabel('lb-154'));
							mint.common.focus($('#tf-integrationId'));
							return;
						}


						//-----------------------------------------------------------------------
						// tab0
						//-----------------------------------------------------------------------

						//-----------------------------------------------------------------------
						// tab1
						//-----------------------------------------------------------------------

						//-----------------------------------------------------------------------
						// Description :: 시스템 체크 로직
						//-----------------------------------------------------------------------
						var isSourceSystemContained = false;
						var isTargetSystemContained = false;
						var systemGridData = $("#gd-system").data("kendoGrid").dataSource.view();

						// 시스템을 선택하지 않았을 경우
						if( systemGridData.length == 0 ) {
							mint.common.alert('CW00001', mint.label.getLabel('lb-82'));
							$('#tab-interface-info a.system').tab('show');
							mint.common.focus($('#gd-system'));
							return;
						} else if( !mint.common.isEmpty($('#gd-system').data('kendoGrid').editable) ){
							mint.common.alert('CW00022', mint.label.getLabel('lb-82'));
							$('#tab-interface-info a.system').tab('show');
							mint.common.focus($('#gd-system'));
							return;
						}

						for(var i=0; i<systemGridData.length; i++) {

							// 시스템 - 노드구분을 선택하지 않았을 경우
							if( mint.common.isEmpty(systemGridData[i].nodeTypeCd) ) {
								mint.common.alert('CW00003', systemGridData[i].systemDisplayNm + '-' + mint.label.getLabel('lb-469'));
								$('#tab-interface-info a.system').tab('show');
								mint.common.focus($('#gd-system'));

								var editGrid = $('#gd-system').data('kendoGrid');
								editGrid.saveRow();
								editGrid.editRow($('#gd-system tr:eq(' + (i+1) + ')'));

								return;
							} else {

								if( systemGridData[i].nodeTypeCd == '0' ) {
									isSourceSystemContained = true;
								}

								if( systemGridData[i].nodeTypeCd == '2' ) {
									isTargetSystemContained = true;
								}
							}

							// 시스템 - 리소스를 선택하지 않았을 경우
							if( mint.common.isEmpty(systemGridData[i].resourceCd) ) {
								mint.common.alert('CW00003', systemGridData[i].systemDisplayNm + '-' + mint.label.getLabel('lb-86'));
								$('#tab-interface-info a.system').tab('show');
								mint.common.focus($('#gd-system'));

								var editGrid = $('#gd-system').data('kendoGrid');
								editGrid.saveRow();
								editGrid.editRow($('#gd-system tr:eq(' + (i+1) + ')'));

								return;
							}
			           	}

						// 시스템 - Source System 이 없는 경우.
						if( !isSourceSystemContained ) {
							mint.common.alert('CW00010', mint.label.getLabel('lb-82') + '-' + mint.label.getLabel('lb-98'));
							$('#tab-interface-info a.system').tab('show');
							mint.common.focus($('#gd-system'));
							return;
						}
						// 시스템 - Target System 이 없는 경우.
						if( !isTargetSystemContained ) {
							mint.common.alert('CW00010', mint.label.getLabel('lb-82') + '-' + mint.label.getLabel('lb-102'));
							$('#tab-interface-info a.system').tab('show');
							mint.common.focus($('#gd-system'));
							return;
						}

						return true;

					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_validationCheck"});
					}
				},//end fn_validationCheck()

				//-----------------------------------------------------------------------
				// Description ::  일일총전송량 계산
				//-----------------------------------------------------------------------
				fn_setQttPerDay : function() {
					try {

						//건당사이즈
						var sizePerTran     = $("#nf-sizePerTran").data("kendoNumericTextBox").value();
						//주기별건수
						var cntPerFrequency = $("#nf-cntPerFrequency").data("kendoNumericTextBox").value();
						//일일발생횟수
						var cntPerDay       = $("#nf-cntPerDay").data("kendoNumericTextBox").value();

						var qttPerDay = sizePerTran * cntPerFrequency * cntPerDay;

						$("#nf-qttPerDay").data('kendoNumericTextBox').value(qttPerDay);

					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_setQttPerDay"});
					}
				},//end fn_setQttPerDay()

				//-----------------------------------------------------------------------
				// Description :: 수정일 경우, 인터페이스 정보를 조회하여 셋팅.
				//-----------------------------------------------------------------------
				fn_setInterfaceInfo : function(jsonData) {
					try {

						var channelCd = $("#cb-channelNm").data("kendoDropDownList").dataItem().channelCd;

						var businessObject = jsonData.requirement.business;
						var regUserObject = jsonData.requirement.regUser;
						var modUserObject = jsonData.requirement.modUser;
						var interfaceObject = jsonData.requirement.interface;
						var channelObject = interfaceObject.channel;

						$('#hd-requirementId').val( jsonData.requirement.requirementId );
						$('#hd-requirementNm').val( jsonData.requirement.requirementNm );
						$('#tf-statusNm').val( jsonData.requirement.statusNm );
						$('#hd-statusCd').val( jsonData.requirement.status);
						$('#tf-regDate').val( mint.common.isEmpty( jsonData.requirement.regDate) ? '' : mint.common.formatDate(jsonData.requirement.regDate) + "(" + regUserObject.userNm + ")" );
						$('#tf-modDate').val( mint.common.isEmpty( jsonData.requirement.modDate) ? '' : mint.common.formatDate(jsonData.requirement.modDate) + "(" + modUserObject.userNm + ")" );

						$('#tf-businessDisplayNm').val( businessObject.businessNm + mint.lb + businessObject.businessCd + mint.rb );
						$('#hd-businessId').val( businessObject.businessId );
						$('#hd-businessCd').val( businessObject.businessCd );
						$('#hd-businessNm').val( businessObject.businessNm );

						$('#tf-regUserNm').val( regUserObject.userNm );
						$('#hd-regUserId').val( regUserObject.userId );
						$('#hd-regCellPhone').val( regUserObject.cellPhone );
						$('#hd-regPhone').val( regUserObject.phone );
						$('#hd-regEmail').val( regUserObject.email );

						$('#tf-interfaceNm').val( interfaceObject.interfaceNm );
						$('#hd-interfaceId').val( interfaceObject.interfaceId );
						$('#tf-integrationId').val( interfaceObject.integrationId );

						$('#cb-channelNm').data("kendoDropDownList").value(channelObject.channelNm);

						$('#cb-dataPrDirNm').data("kendoDropDownList").value(interfaceObject.dataPrDirNm);
						$('#cb-dataPrMethodNm').data("kendoDropDownList").value(interfaceObject.dataPrMethodNm);
						$('#cb-appPrMethodNm').data("kendoDropDownList").value(interfaceObject.appPrMethodNm);

						$('#cb-dataOrderYn').data("kendoDropDownList").value(interfaceObject.dataSeqYn);
						$('#cb-dataFrequencyNm').data("kendoDropDownList").value(interfaceObject.dataFrequencyNm);
						$('#tf-dataFrequencyInput').val(interfaceObject.dataFrequencyInput);

						$('#nf-sizePerTran').data("kendoNumericTextBox").value(interfaceObject.sizePerTran);
						$('#nf-cntPerFrequency').data("kendoNumericTextBox").value(interfaceObject.cntPerFrequency);
						$('#nf-cntPerDay').data("kendoNumericTextBox").value(interfaceObject.cntPerDay);
						$('#nf-qttPerDay').data("kendoNumericTextBox").value(interfaceObject.qttPerDay);

						//-----------------------------------------------------------------------
						// InterfaceModel + System
						//-----------------------------------------------------------------------
						if( !mint.common.isEmpty(jsonData.interfaceModel) ) {
							$('#hd-modelMid').val(jsonData.interfaceModel.mid);
							$('#hd-modelStage').val(jsonData.interfaceModel.stage);
							$('#hd-modelStageNm').val(jsonData.interfaceModel.stageName);
							$('#hd-modelDeployStatus').val(jsonData.interfaceModel.deployStatus);
							$('#hd-modelDeployStatusNm').val(jsonData.interfaceModel.deployStatusName);
							$('#hd-modelLastDeployDate').val(jsonData.interfaceModel.lastDeployDate);
							$('#hd-modelLastDeployUser').val(jsonData.interfaceModel.lastDeployUser);
							$('#hd-modelLastDeployUserNm').val(jsonData.interfaceModel.lastDeployUserNm);
							if(jsonData.interfaceModel.std === "Y") {
								$("#rd-modelStd").data("kendoSwitch").value(true);
							} else {
								$("#rd-modelStd").data("kendoSwitch").value(false);
							}
						}

						var systemObjectList = [];
						var senderSystemObject = interfaceObject.senderSystemInfoList;
						var receiverSystemObject = interfaceObject.receiverSystemInfoList;

						for( var i=0; i<senderSystemObject.length; i++ ) {
							senderSystemObject[i].systemDisplayNm = senderSystemObject[i].systemNm + mint.lb + senderSystemObject[i].systemCd + mint.rb;
							senderSystemObject[i].orgDisplayNm    = senderSystemObject[i].orgNm + mint.lb + senderSystemObject[i].orgCd + mint.rb;
							senderSystemObject[i].nodeTypeCd      = senderSystemObject[i].nodeType;
							senderSystemObject[i].reUseDelYn      = 'Y';

							if( !mint.common.isEmpty(jsonData.interfaceModel) ) {
								for( var j=0; j<jsonData.interfaceModel.appModels.length; j++ ) {
									if(senderSystemObject[i].systemId == jsonData.interfaceModel.appModels[j].systemId
											&& senderSystemObject[i].seq == jsonData.interfaceModel.appModels[j].systemSeq) {
										$.each(jsonData.interfaceModel.appModels[j], function(key, value){
											senderSystemObject[i][key] = value;
										});
									}

									if(jsonData.interfaceModel.appModels[j].mappings.length > 0 || jsonData.interfaceModel.appModels[j].msgs.length > 0) {
										$("#btn-layout > i").addClass("fa-check-square-o");
										$("#btn-layout > i").removeClass("fa-square-o");
										$("#btn-layout").css("color","#1c84c6");
									}
								}
							}

							systemObjectList.push(senderSystemObject[i]);
						}

						for( var i=0; i<receiverSystemObject.length; i++ ) {
							receiverSystemObject[i].systemDisplayNm = receiverSystemObject[i].systemNm + mint.lb + receiverSystemObject[i].systemCd + mint.rb;
							receiverSystemObject[i].orgDisplayNm    = receiverSystemObject[i].orgNm + mint.lb + receiverSystemObject[i].orgCd + mint.rb;
							receiverSystemObject[i].nodeTypeCd      = receiverSystemObject[i].nodeType;
							receiverSystemObject[i].reUseDelYn      = 'Y';
							if( !mint.common.isEmpty(jsonData.interfaceModel) ) {
								for( var j=0; j<jsonData.interfaceModel.appModels.length; j++ ) {
									if(receiverSystemObject[i].systemId == jsonData.interfaceModel.appModels[j].systemId
											&& receiverSystemObject[i].seq == jsonData.interfaceModel.appModels[j].systemSeq) {
										$.each(jsonData.interfaceModel.appModels[j], function(key, value){
											receiverSystemObject[i][key] = value;
										});
									}

									if(jsonData.interfaceModel.appModels[j].mappings.length > 0 || jsonData.interfaceModel.appModels[j].msgs.length > 0) {
										$("#btn-layout > i").addClass("fa-check-square-o");
										$("#btn-layout > i").removeClass("fa-square-o");
										$("#btn-layout").css("color","#1c84c6");
									}
								}
							}

							systemObjectList.push(receiverSystemObject[i]);
						}

						$('#gd-system').data('kendoGrid').setDataSource( $.main_detail.fn_getSystemGridDataSource(systemObjectList) );

						/*
						$("#gd-system .k-master-row").each(function( index ) {
							$('#gd-system').data('kendoGrid').expandRow(this);
						});
						*/

						//-----------------------------------------------------------------------
						// 담당자
						//-----------------------------------------------------------------------
						var relUserObjectList = interfaceObject.relUsers;
						for( var i = 0; i < relUserObjectList.length; i++ ){
							relUserObjectList[i].userNm     = relUserObjectList[i].user.userNm;
							relUserObjectList[i].cellPhone  = relUserObjectList[i].user.cellPhone;
							relUserObjectList[i].phone      = relUserObjectList[i].user.phone;
							relUserObjectList[i].email      = relUserObjectList[i].user.email;
							relUserObjectList[i].userId     = relUserObjectList[i].user.userId;
							relUserObjectList[i].roleTypeCd = relUserObjectList[i].roleType;
							relUserObjectList[i].reUseDelYn = 'Y';
						}

						$('#gd-user').data('kendoGrid').setDataSource( $.main_detail.fn_getUserGridDataSource(relUserObjectList) );

						//-----------------------------------------------------------------------
						// 인터페이스 - 채널별 연계 특성
						//-----------------------------------------------------------------------
						var propertiesList = interfaceObject.properties;
						if( !mint.common.isEmpty(propertiesList[0]) ) {
							if(propertiesList[0].attrValue == "2") {
								$('#rd-deployOption').data("kendoSwitch").value(true);
							} else {
								$('#rd-deployOption').data("kendoSwitch").value(false);
							}
						}

						//-----------------------------------------------------------------------
						// 첨부파일
						//-----------------------------------------------------------------------
						var uploadFiles = [];

						if(0 < jsonData.requirement.attatchFileList.length) {
							for(var i=0; i<jsonData.requirement.attatchFileList.length; i++) {
								var fileObject = new Object;

								fileObject.name      = jsonData.requirement.attatchFileList[i].fileNm;
								fileObject.size      = '';
								fileObject.extension = '';
								fileObject.fileNm    = jsonData.requirement.attatchFileList[i].fileNm;
								fileObject.fileId    = jsonData.requirement.attatchFileList[i].fileId;
								fileObject.filePath  = jsonData.requirement.attatchFileList[i].filePath;
								fileObject.regId     = jsonData.requirement.attatchFileList[i].regId;
								fileObject.regDate   = jsonData.requirement.attatchFileList[i].regDate;

								uploadFiles.push(fileObject);
							}
						}

						$.main_detail.fn_initFileUpload( uploadFiles );

						//-----------------------------------------------------------------------
						// Description
						//-----------------------------------------------------------------------
						$("#ta-description").data("kendoEditor").value(jsonData.requirement.comments);

						//-----------------------------------------------------------------------
						//authGroup
						//-----------------------------------------------------------------------
						{
							var requestObject = new Object();
							{
								requestObject.categoryCd = 'DATA';
								requestObject.dataType = '1';
								requestObject.dataId = interfaceObject.interfaceId;
							}
							mint.callService(requestObject, 'AN-01-01-003', 'REST-R01-AU-01-03',
								function(responseData) {
									if( !mint.common.isEmpty(responseData) ) {
										$('#cb-groupId').data("kendoDropDownList").value(responseData.groupId);
									}
								},
								{
									errorCall : true,
									notificationView : false
							    }
							);
						}

					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_setInterfaceInfo"});
					}
				},//end fn_setInterfaceInfo()

				//-----------------------------------------------------------------------
				// Description :: 시스템 검색 버튼 클릭 이벤트
				//-----------------------------------------------------------------------
				fn_btnSystemSearchClickEvent : function(jsonObject) {
					try {
						mint.common.setScreenParam("caller", "AN-01-01-002");
						mint.common.setScreenParam('callback', '$.main_detail.fn_setSystemInfo');
						mint.common.searchPopup('../sub-co/CO-01-00-903.html','CO-01-00-903');
					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_btnSystemSearchClickEvent"});
					}
				},//end fn_btnSystemSearchClickEvent()

				//-----------------------------------------------------------------------
				// Description :: 사용자 검색 버튼 클릭 이벤트
				//-----------------------------------------------------------------------
				fn_btnUserSearchClickEvent : function(jsonObject) {
					try {
						mint.common.setScreenParam("caller", "AN-01-00-002");
						mint.common.setScreenParam('callback', '$.main_detail.fn_setUserInfo');
						mint.common.searchPopup('../sub-co/CO-01-00-004.html','CO-01-00-004');
					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_btnUserSearchClickEvent"});
					}
				},//end fn_btnUserSearchClickEvent()

				fn_setInterfaceInfoTemplate : function() {
					try {
						var channelItem = $("#cb-channelNm").data("kendoDropDownList").dataItem();

						if(channelItem.channelCd == "FWS") {

							var env = mint.common.getEnvorinment();
		            		var tmpRequirementId = env['system.model.template.integration.id'];

		            		if( !mint.common.isEmpty(tmpRequirementId) ) {
			            		var requestObject = new Object();
			            		requestObject.integrationId = tmpRequirementId[0];

		            			mint.callService(requestObject, screenName, 'REST-R02-AN-01-02', function(jsonData) {

		            				var interfaceObject = jsonData.requirement.interface;
		    						$('#cb-dataPrDirNm').data("kendoDropDownList").value(interfaceObject.dataPrDirNm);
		    						$('#cb-dataPrMethodNm').data("kendoDropDownList").value(interfaceObject.dataPrMethodNm);
		    						$('#cb-appPrMethodNm').data("kendoDropDownList").value(interfaceObject.appPrMethodNm);

		    						$('#cb-dataOrderYn').data("kendoDropDownList").value(interfaceObject.dataSeqYn);
		    						$('#cb-dataFrequencyNm').data("kendoDropDownList").value(interfaceObject.dataFrequencyNm);
		    						$('#tf-dataFrequencyInput').val(interfaceObject.dataFrequencyInput);

		    						$('#nf-sizePerTran').data("kendoNumericTextBox").value(interfaceObject.sizePerTran);
		    						$('#nf-cntPerFrequency').data("kendoNumericTextBox").value(interfaceObject.cntPerFrequency);
		    						$('#nf-cntPerDay').data("kendoNumericTextBox").value(interfaceObject.cntPerDay);
		    						$('#nf-qttPerDay').data("kendoNumericTextBox").value(interfaceObject.qttPerDay);

		    						//-----------------------------------------------------------------------
		    						// 시스템
		    						//-----------------------------------------------------------------------
		    						var systemObjectList = [];
		    						var senderSystemObject = interfaceObject.senderSystemInfoList;
		    						var receiverSystemObject = interfaceObject.receiverSystemInfoList;

		    						for( var i=0; i<senderSystemObject.length; i++ ) {
		    							senderSystemObject[i].systemDisplayNm = senderSystemObject[i].systemNm + mint.lb + senderSystemObject[i].systemCd + mint.rb;
		    							senderSystemObject[i].orgDisplayNm    = senderSystemObject[i].orgNm + mint.lb + senderSystemObject[i].orgCd + mint.rb;
		    							senderSystemObject[i].nodeTypeCd      = senderSystemObject[i].nodeType;
		    							senderSystemObject[i].reUseDelYn      = 'Y';

		    							if( !mint.common.isEmpty(jsonData.interfaceModel) ) {
		    								for( var j=0; j<jsonData.interfaceModel.appModels.length; j++ ) {
		    									if(senderSystemObject[i].systemId == jsonData.interfaceModel.appModels[j].systemId
		    											&& senderSystemObject[i].seq == jsonData.interfaceModel.appModels[j].systemSeq) {
		    										$.each(jsonData.interfaceModel.appModels[j], function(key, value){
		    											senderSystemObject[i][key] = value;
		    										});
		    									}
		    								}
		    							}

		    							systemObjectList.push(senderSystemObject[i]);
		    						}

		    						for( var i=0; i<receiverSystemObject.length; i++ ) {
		    							receiverSystemObject[i].systemDisplayNm = receiverSystemObject[i].systemNm + mint.lb + receiverSystemObject[i].systemCd + mint.rb;
		    							receiverSystemObject[i].orgDisplayNm    = receiverSystemObject[i].orgNm + mint.lb + receiverSystemObject[i].orgCd + mint.rb;
		    							receiverSystemObject[i].nodeTypeCd      = receiverSystemObject[i].nodeType;
		    							receiverSystemObject[i].reUseDelYn      = 'Y';
		    							if( !mint.common.isEmpty(jsonData.interfaceModel) ) {
		    								for( var j=0; j<jsonData.interfaceModel.appModels.length; j++ ) {
		    									if(receiverSystemObject[i].systemId == jsonData.interfaceModel.appModels[j].systemId
		    											&& receiverSystemObject[i].seq == jsonData.interfaceModel.appModels[j].systemSeq) {
		    										$.each(jsonData.interfaceModel.appModels[j], function(key, value){
		    											receiverSystemObject[i][key] = value;
		    										});
		    									}
		    								}
		    							}

		    							systemObjectList.push(receiverSystemObject[i]);
		    						}

		    						$('#gd-system').data('kendoGrid').setDataSource( $.main_detail.fn_getSystemGridDataSource(systemObjectList) );

		    						if(!mint.common.isEmpty($('#hd-businessCd').val())) {
		    							$.main_detail.fn_reSetSystemInfo();
		    						}

		    						//-----------------------------------------------------------------------
		    						// 담당자
		    						//-----------------------------------------------------------------------
		    						var relUserObjectList = interfaceObject.relUsers;
		    						for( var i = 0; i < relUserObjectList.length; i++ ){
		    							relUserObjectList[i].userNm     = mint.session.getUserNm();
		    							relUserObjectList[i].cellPhone  = mint.session.getCellPhone();
		    							relUserObjectList[i].phone      = mint.session.getPhone();
		    							relUserObjectList[i].email      = mint.session.getEmail();
		    							relUserObjectList[i].userId     = mint.session.getUserId();
		    							relUserObjectList[i].roleTypeCd = relUserObjectList[i].roleType;
		    							relUserObjectList[i].reUseDelYn = 'Y';
		    						}

		    						$('#gd-user').data('kendoGrid').setDataSource( $.main_detail.fn_getUserGridDataSource(relUserObjectList) );

		    						//-----------------------------------------------------------------------
		    						// 인터페이스 - 채널별 연계 특성
		    						//-----------------------------------------------------------------------
		    						var propertiesList = interfaceObject.properties;
		    						for( var i = 0; i < propertiesList.length; i++ ) {
		    							var properties = propertiesList[i];
		    							if( !mint.common.isEmpty(properties) ) {
		    								if( properties.type == '0' ) {
		    									$('#tf-chlattr-' + properties.attrCd).val( properties.attrValue );
		    								} else if ( properties.type == '1' ) {
		    									$('#tf-addattr-' + properties.attrCd).val( properties.attrValue );
		    								}
		    							}
		    						}

		    						//-----------------------------------------------------------------------
		    						// 첨부파일
		    						//-----------------------------------------------------------------------
		    						var uploadFiles = [];

		    						if(0 < jsonData.requirement.attatchFileList.length) {
		    							for(var i=0; i<jsonData.requirement.attatchFileList.length; i++) {
		    								var fileObject = new Object;

		    								fileObject.name      = jsonData.requirement.attatchFileList[i].fileNm;
		    								fileObject.size      = '';
		    								fileObject.extension = '';
		    								fileObject.fileNm    = jsonData.requirement.attatchFileList[i].fileNm;
		    								fileObject.fileId    = jsonData.requirement.attatchFileList[i].fileId;
		    								fileObject.filePath  = jsonData.requirement.attatchFileList[i].filePath;
		    								fileObject.regId     = jsonData.requirement.attatchFileList[i].regId;
		    								fileObject.regDate   = jsonData.requirement.attatchFileList[i].regDate;

		    								uploadFiles.push(fileObject);
		    							}
		    						}

		    						$.main_detail.fn_initFileUpload( uploadFiles );

		    						//-----------------------------------------------------------------------
		    						// Description
		    						//-----------------------------------------------------------------------
		    						$("#ta-description").data("kendoEditor").value(jsonData.requirement.comments);
		            			},
		            				{
										errorCall : true
									}
								);
		            		}
						}
					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_requirementAutoSetting"});
					}
				},

				//------------------------------------------------------------------------------------------------------
				// Description :: 연계채널이 프레임워크(FWS)이고, 업무정보가 NULL이 아니면 수신 시스템 정보 재설정.
				//------------------------------------------------------------------------------------------------------
				fn_reSetSystemInfo : function() {
					try {
						var channelItem = $("#cb-channelNm").data("kendoDropDownList").dataItem();

						if(channelItem.channelCd == "FWS") {
							var requestObject = new Object();
							requestObject.ObjectType = "Map";
							requestObject.systemCd = $('#hd-businessCd').val();

							mint.callService(
								requestObject
						 		, screenName
								, 'REST-R04-CO-02-00-012'
								, function(jsonData) {
									if( !mint.common.isEmpty(jsonData) ) {
										var gridSystem = $('#gd-system').data('kendoGrid').dataSource.data();
										for(var i=0; i<gridSystem.length; i++) {
											if(gridSystem[i].nodeType == "2") {
												gridSystem[i].systemId = jsonData.systemId;
												gridSystem[i].systemName = jsonData.systemNm;
												gridSystem[i].systemNm = jsonData.systemNm;
												gridSystem[i].systemCd = jsonData.systemCd;
												gridSystem[i].systemDisplayNm = jsonData.systemNm + mint.lb + jsonData.systemCd + mint.rb;
												gridSystem[i].orgId = jsonData.orgId;
												gridSystem[i].orgNm = jsonData.orgNm;
												gridSystem[i].orgCd = jsonData.orgCd;
												gridSystem[i].orgDisplayNm = jsonData.orgNm + mint.lb + jsonData.orgCd + mint.rb;
												$('#gd-system').data('kendoGrid').setDataSource( $.main_detail.fn_getSystemGridDataSource(gridSystem) );
											}
										}
									}
								}
								, {errorCall : true}
							);
						}
					} catch( e ) {
						mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main_detail.fn_reSetSystemInfo"});
					}
				}
			}// end main
		});// end extends

		//=======================================================================
		// (4) 이벤트 핸들러 정의
		//=======================================================================

		//-----------------------------------------------------------------------
		// Description :: (팝업) 업무 검색 클릭 이벤트
		//-----------------------------------------------------------------------
		$('#tf-businessDisplayNm').on('click', function () {
			mint.common.setScreenParam('callback', '$.main_detail.fn_setBusinessInfo');
			mint.common.searchPopup('../sub-co/CO-01-00-003.html','CO-01-00-003');
		});

		//-----------------------------------------------------------------------
		// Description :: 저장 버튼 Click 이벤트
		//-----------------------------------------------------------------------
		$('.btn-save').on('click', function() {
			$.main_detail.fn_save();
		});

		//-----------------------------------------------------------------------
		// Description :: 목록 버튼 Click 이벤트
		//-----------------------------------------------------------------------
		$('.btn-back').on('click', function(e) {
			mint.back(null);
		});

		//-----------------------------------------------------------------------
		// Description :: 취소 버튼 Click 이벤트
		//-----------------------------------------------------------------------
		$('.btn-cancel').click(function(e) {
			mint.setDetailView('Y');
			mint.common.setScreenParam("requirementId", $("#hd-requirementId").val());
			mint.move('../sub-an/AN-01-01-003');
		});

		//-----------------------------------------------------------------------
		// Description :: (팝업) 시스템 검색 클릭 이벤트
		//-----------------------------------------------------------------------
		$('.btn-systemSearch').on('click', function(e) {
			$.main_detail.fn_btnSystemSearchClickEvent(e);
		});

		//-----------------------------------------------------------------------
		// Description :: (팝업) 담당자 검색 클릭 이벤트
		//-----------------------------------------------------------------------
		$('.btn-userSearch').on('click', function(e) {
			$.main_detail.fn_btnUserSearchClickEvent(e);
		});

		$("#gd-system").on("mousedown", ".k-grid-edit", function (e) {
			var systemGrid = $('#gd-system').data('kendoGrid');
            var editRow = systemGrid.element.find(".k-grid-edit-row");

            if (editRow.length > 0) {
            	mint.common.alert('CW00022', mint.label.getLabel('lb-82'));
                e.preventDefault();
            } else {
				var row = e.currentTarget.parentNode.parentNode;
				var dataItem = systemGrid.dataItem(row);

				systemGrid.dataSource.sync();
				systemGrid.editRow("tr[data-uid='" + dataItem.uid + "']");
				systemGrid.expandRow("tr[data-uid='" + dataItem.uid + "']");
            }
        });


		//=======================================================================
		// (5) 기타 Function 정의
		//=======================================================================

		//=======================================================================
		// (6) 화면 로딩시 실행할 항목 기술
		//=======================================================================
		$.main_detail.fn_init();
		mint.label.attachLabel(null);
	});
</script>