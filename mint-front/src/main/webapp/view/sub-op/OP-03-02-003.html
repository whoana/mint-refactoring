<!--
	Screen ID : OP-03-02-003
	Screen NM : 오류/장애 대장 - 미조치 처리.
-->

<style>
/* GRID Scroll hidden */
.k-grid-header
{
   padding: 0 !important;
}

.k-grid-content
{
   overflow-y: visible;
}
/* end GRID Scroll hidden */
</style>

<div class="row wrapper border-bottom white-bg page-heading">
    <div class="col-lg-5">
        <h2><lb class="lb-623"></lb></h2>
        <ol class="breadcrumb">
            <li><lb class="lb-490"></lb></li>
            <li class="active"><strong><lb class="lb-623"></lb></strong></li>
        </ol>
    </div>

    <div class="col-lg-7">
       <div class="title-action" >
           
            
       </div>
   </div>
</div>

<div class="wrapper wrapper-content animated fadeInRight" >
    <div class="row">
        <div class="col-lg-12">
            <div class="ibox float-e-margins"> 
                <div class="ibox-title"> 
                	<h5><lb class="lb-78"></lb></h5>
               		 &nbsp;&nbsp;&nbsp;
                    <div class="ibox-tools">
                    	<a class="help-over-pannel" onclick="mint.ui.help(this, 'AP00000021','H001')"></a>
                        <a class="collapse-link">
                            <i class="fa fa-chevron-up"></i>
                        </a>
                    </div>
					<div style="float: right; padding: 0px 20px 0px 0px;">
						<a class="btn btn-w-m btn-default btn-outline btn-clear"><i class="fa fa-check "></i> <lb class="lb-79"></lb></a>
						<a class="btn btn-w-m btn-default btn-outline btn-search"><i class="fa fa-search "></i> <lb class="lb-10"></lb> </a>
						<a class="btn btn-w-m btn-default btn-outline btn-dashboard" style="display: none;"><i class="fa fa-reply"></i> <lb class="lb-31"></lb></a>
					</div>	                    
                </div>
             
                <div class="ibox-content">
                    <div class="row">
                    
						<div class="col-sm-4">
                            <div class="form-group">
                            	<span class="lable_tag"><lb class="lb-80"></lb><a class="help-over-label" onclick="mint.ui.help(this, 'AP00000005','H003')"></a></span>
                               	<input id="cb-channelId" type="text" placeholder="Search..." style="width: 63%;">
                           	</div>
						</div>                     
                        <div class="col-sm-4">
                            <div class="form-group">
                                <span class="lable_tag"><lb class="lb-153"></lb></span>
                                <input id="cb-interfaceNm" class="status" type="text" placeholder="Search..."  tabIndex="4" style="width: 63%;">
                            </div>
                        </div>
                        <div class="col-sm-4">
                            <div class="form-group">
                                <span class="lable_tag"><lb class="lb-154"></lb></span>
                                <input id="cb-integrationId" class="status" type="text" placeholder="Search..."  tabIndex="4" style="width: 63%;">
                            </div>
                        </div>
                        
                        <hr class="hr-space">

                        <div class="col-sm-4">
                            <div class="form-group">
                                <span class="lable_tag"><lb class="lb-82"></lb></span>
								<span class="k-widget k-autocomplete k-header k-state-default input-width" style="width: 63%;">
									<input id="tf-systemNm" type="text" class="k-input" style="width: 100%;" readonly="readonly" placeholder="Search...">
									<input id="tf-systemNm_hidden" type="hidden">
									<input id="tf-systemId_hidden" type="hidden">
								</span>								
                                
                                <!--
                                <input id="error-system" class="status" type="text" placeholder="Search..."  tabIndex="4" style="width: 63%;">
                                -->
                            </div>
                        </div>
                        <div class="col-sm-8">
                            <div class="form-group">
                                <span class="lable_tag" style="width: 17%;"><lb class="lb-302"></lb></span>
                                <input id="startDate" class="input-width"  tabIndex="5" style="text-align:center; width: 19.1%"> <span style="padding: 0px 5px;"> ~ </span>
                                <input id="endDate"   class="input-width"  tabIndex="7" style="text-align:center; width: 19.1%"> 
                            </div>
                        </div>                         
                        
                        <hr class="hr-space">
 						<div class="col-sm-12" style="padding-top: 0px">
							<div class="b-col"></div>
						</div>
						<hr class="hr-space">
						                          
                        <div class="col-sm-4">
                            <div class="form-group">
                                <span class="lable_tag"><lb class="lb-463"></lb> <lb class="lb-462"></lb></span>
								<span class="k-widget k-autocomplete k-header k-state-default input-width" style="width: 63%;">
									<input id="tf-errorMsg" type="text" class="k-input" style="width: 100%;" placeholder="">
								</span>								
                            </div>
                        </div>
						<div class="col-sm-4">
							<div class="form-group">
								<span class="lable_tag"><lb class="lb-88"></lb></span>
								<span style="padding: 0px 0px 0px 0px;">
					            	<div class="radio radio-inline" style="padding-left:20px; padding-top:5px;">
										<span class="radio-danger" style="padding-right: 20px;"><input id="rd-search-range-all" type="radio" name="rd-search-range" value="N" checked="checked"><label for="rd-search-range-all"><lb class="lb-89"></label></span>
		                                <span class="radio-info"   style="padding:0px 20px;"><input id="rd-search-range-user" type="radio" name="rd-search-range" value="Y"><label for="rd-search-range-user"><lb class="lb-90"></label></span>
                                	</div>
                                </span>
							</div>
						</div>                         
                    </div>
                </div>
            </div>
        </div>
    </div>

	<div class="row">
        <div class="col-lg-12">
            <div class="ibox float-e-margins">
                <div class="ibox-title">
                    <h5><lb class="lb-91"></lb></h5>
                    <div class="ibox-tools">
                    	<a class="help-over-pannel" onclick="mint.ui.help(this, 'AP00000021','H002')"></a>
                        <a class="collapse-link">
                            <i class="fa fa-chevron-up"></i>
                        </a>
                    </div>
					<div style="float: right; padding: 0px 20px 0px 0px;">
						<a class="btn btn-w-m btn-primary btn-write"><i class="fa fa-check "></i> <lb class="lb-457"></lb> </a> 
					</div>
                </div>             
                <div class="ibox-content">         
        			<div id="non-reg-error-grid"></div>
        		</div>
        	</div>
        </div>
    </div>
</div>

<script>
/* var jsonData = 
	[
		{ nodeName: "시스템001", interfaceNm: "인터페이스0001", interfaceId: "intf0001", startDate: "20151022180700", statusNm: "미등록", crudpsType : "추가"},
		{ nodeName: "시스템001", interfaceNm: "인터페이스0001", interfaceId: "intf0001", startDate: "20151022180700", statusNm: "미등록", crudpsType : "추가"},
		{ nodeName: "시스템001", interfaceNm: "인터페이스0001", interfaceId: "intf0001", startDate: "20151022180700", statusNm: "미등록", crudpsType : "삭제"},
		{ nodeName: "시스템001", interfaceNm: "인터페이스0001", interfaceId: "intf0001", startDate: "20151022180700", statusNm: "미등록", crudpsType : "삭제"},
		{ nodeName: "시스템001", interfaceNm: "인터페이스0001", interfaceId: "intf0001", startDate: "20151022180700", statusNm: "미등록", crudpsType : ""},
		{ nodeName: "시스템001", interfaceNm: "인터페이스0001", interfaceId: "intf0001", startDate: "20151022180700", statusNm: "미등록", crudpsType : ""},
		{ nodeName: "시스템001", interfaceNm: "인터페이스0001", interfaceId: "intf0001", startDate: "20151022180700", statusNm: "미등록", crudpsType : ""},
		{ nodeName: "시스템001", interfaceNm: "인터페이스0001", interfaceId: "intf0001", startDate: "20151022180700", statusNm: "미등록", crudpsType : ""},
	];	 */
$(document).ready(function() {
    //=======================================================================
    //(1) function 및 variable scope 설정 :: (메인은 main, 팝업 및 서브는 sub)
    //=======================================================================
    screenName = "OP-03-02-003";
    
    $.extend({
        main : {
            //=======================================================================
            // (2) Screen 에서 사용할 variable 정의
            //=======================================================================
            noRegProblemList : [],
            //=======================================================================
            // (3) Screen 에서 사용할 function 정의
            //=======================================================================
            
            //-----------------------------------------------------------------------
            // Description :: 화면 초기화
            //-----------------------------------------------------------------------
            fn_init : function() {
                try {
                    mint.init('$.main.fn_initCallback');
                } catch( e ) {
                    mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main.fn_init"});
                }
            },//end fn_init()   

            //-----------------------------------------------------------------------
            // Description :: 화면 초기화 콜백
            //-----------------------------------------------------------------------           
            fn_initCallback : function() {
                try{
                    //검색조건 세팅
                    
                    mint.ui.setComboBoxWithValue('cb-channelId', mint.common.commonCodeMap.get("channelList"), 0, 'channelNm', 'channelId');
                    mint.ui.setComboBoxWithValue('cb-interfaceNm', mint.common.commonCodeMap.get("interfaceCdList"), 0, 'interfaceNm', 'interfaceNm', '');
                    mint.ui.setComboBoxWithValue('cb-integrationId', mint.common.commonCodeMap.get("interfaceCdList"), 0, 'integrationId', 'integrationId', '');                    

            		$("#cb-channelId").data("kendoComboBox").input.keydown($.main.fn_onKeyDownOP0302001);
            		$("#cb-interfaceNm").data("kendoComboBox").input.keydown($.main.fn_onKeyDownOP0302001);
            		$("#cb-integrationId").data("kendoComboBox").input.keydown($.main.fn_onKeyDownOP0302001);
                    
                    
					var tempStartDate;
                    
                    if('undefined' != typeof mint.common.getScreenParam("startDate") && '' != mint.common.getScreenParam("startDate")) {
                    	tempStartDate = new Date(mint.common.getScreenParam("startDate"));
                    } else {
                    	tempStartDate = new Date();
                    }
                    
                    $("#startDate").kendoDatePicker({
                        format : "yyyy/MM/dd",
                        culture: "ko-KR",
                        value : tempStartDate
                    });
                    
       				var tempEndDate;
                    
                    if('undefined' != typeof mint.common.getScreenParam("endDate") && '' != mint.common.getScreenParam("endDate")) {
                    	tempEndDate = new Date(mint.common.getScreenParam("endDate"));
                    } else {
                    	tempEndDate = new Date();
                    }
                    
                    $("#endDate").kendoDatePicker({
                        format : "yyyy/MM/dd",
                        culture: "ko-KR",
                        value :  tempEndDate
                    });
                    
                    
                    $.main.fn_initSearchNode();
                    
                    // 그리드 초기화
                    $.main.fn_init_OP0302003_Grid();
                    
                    
                    if('undefined' != typeof mint.common.getScreenParam("startDate") 
                    		&& '' != mint.common.getScreenParam("startDate") 
                    		&& 'undefined' != typeof mint.common.getScreenParam("endDate") 
                    		&& '' != mint.common.getScreenParam("endDate")) {
                    	
                    	tempStartDate = new Date(mint.common.getScreenParam("startDate"));
                    	
                    	mint.common.setScreenParam("startDate", '');
                    	mint.common.setScreenParam("endDate", '');
                    	
                    	$.main.fn_getData();
                    }
                    
                    var caller = mint.common.getScreenParam("caller");
                    if( ! mint.common.isEmpty(caller) ) {
                    	if( caller == 'OP-02-00-001' ) {
                    		$('.btn-dashboard').show();
                    		$('#rd-search-range-all').prop('checked','checked');
                    	}                    	
						if( caller == 'CO-00-00-001' ) {
							$('#rd-search-range-user').prop('checked','checked');
						}
                    	$.main.fn_getData();
                    	mint.common.setScreenParam("caller", null);
                    }
                    
                } catch( e ) {
                    mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main.fn_initCallback"});                  
                }
            },// end fn_initCallback
            
            //-----------------------------------------------------------------------
            // Description :: 그리드 초기화
            //-----------------------------------------------------------------------
            fn_init_OP0302003_Grid : function() {
                try{
                    $("#non-reg-error-grid").kendoGrid({
                        dataSource : {
                        	data : [],
                    		pageSize :  mint.ui.getPageSizesL({'currentPage' : true})
                        },
                        selectable: true,
                        filterable: true,
                        sortable : true,
                        resizable: true,
                        pageable : {
                        	refresh : false,
                        	pageSizes : mint.ui.getPageSizesL(),
                        	buttonCount : 5
                        },
                        //selectable : "row",
                        toolbar: ["excel"],
						excel: {
							  allPages: true
							, filterable: true
							, fileName: mint.common.remakeYYMMDD(new Date()).substring(0, 14) + mint.label.getLabel('lb-595') + '.xlsx'
						}, 
						messages: {
							commands: {
							  excel: mint.label.getLabel('lb-508')
							}
						}, excelExport: function(e) {
							
							//스타일 편집
							var sheet = e.workbook.sheets[0];
							for(var cw=0; cw<sheet.columns.length; cw++) {
								//sheet.columns[cw].autoWidth = true;
								if (sheet.columns[cw].autoWidth) {
									//sheet.columns[cw].autoWidth = false;
									sheet.columns[cw].width = 40;
								}
								else {
									sheet.columns[cw].width = 160;
								}
							}
							
							// rows 기준
							for (var i = 0; i < sheet.rows.length; i++) {
								for (var ci = 0; ci < sheet.rows[i].cells.length; ci++) {
									sheet.rows[i].cells[ci].vAlign = "center";
									
									//정렬 기준
									if(0 == i) {
										//컬럼 헤더일 경우
										sheet.rows[i].cells[ci].hAlign = "center";
										sheet.rows[i].cells[ci].bold = true;
									} else {
										//데이터 내용일 경우
										sheet.rows[i].cells[ci].hAlign = "center";
										
										//if (ci == 4 || ci == 5) {
										//	sheet.rows[i].cells[ci].value = $.main.fn_changeTime(sheet.rows[i].cells[ci].value);
										//}
									}
								}
							}
							/*
							e.preventDefault();
							var createExcelFileName = mint.common.remakeYYMMDD(new Date()).substring(0, 14) + mint.label.getLabel('lb-595') + '.xlsx'
							mint.downloadExcelFile(createExcelFileName, sheet, screenName);
							*/
						},                        
                        
                        
                        
                        columns : [
   								{
 									title : "<input type='checkbox' id='op0302003-list-checkbox-checkAll'>",
									template : "<input type='checkbox' readonly='readonly' name='op0302003-list-checkbox' class='op0302003-list-checkbox' onclick='$.main.fn_checkNoRegProblemGridRow(this)' >",
									//width : "60px",
									width : "5%",
									headerAttributes : {
										style : "text-align: center; vertical-align:middle;"
									},
									attributes : {
										style : "text-align: center; white-space: nowrap;"
									}
								},         
								/* {
									field : "systemId",
		                            hidden : true
								},
		                        {
		                            //field : "nodeName",
		                            field : "systemNm",
		                            title : "시스템",
		                            width : "150px",
		                            headerAttributes : {
		                                style : "text-align: center"
		                            },
		                            attributes : {
		                                style : "text-align: center"
		                            },
		                            template : '#=$.main.fn_replaceNull(systemNm)#'
		                        },  */
		                        {
		                            field : "channelNm",
		                            title : mint.label.getLabel('lb-80'),
		                            width : "15%",
		                            headerAttributes : {
		                                style : "text-align: center"
		                            },
		                            attributes : {
		                                style : "text-align: center; white-space: nowrap;"
		                            },
		                            filterable: { multi: true, search: true }
		                        },
		                        {
		                            field : "nodeName",
		                            title : mint.label.getLabel('lb-82'),
		                            width : "150px",
		                            headerAttributes : {
		                                style : "text-align: center"
		                            },
		                            attributes : {
		                                style : "text-align: center"
		                            },
		                            template : '#=$.main.fn_replaceNull(nodeName)#',
		                            filterable: { multi: true, search: true }
		                        },		                        
		                        {
		                            field : "interfaceNm",
		                            title : mint.label.getLabel('lb-153'),
		                            width : "27%",
		                            headerAttributes : {
		                                style : "text-align: center"
		                            },
		                            attributes : {
		                                style : "text-align: left; white-space: nowrap;"
		                            },
		                            template : '<span title="${interfaceNm}">#=$.main.fn_replaceNull(interfaceNm)#</span>',
		                            filterable: { multi: true, search: true }
		                        },
		                        {
		                            field : "integrationId",
		                            title : mint.label.getLabel('lb-154'),
		                            //width : "120px",
		                            width : "10%",
		                            headerAttributes : {
		                                style : "text-align: center"
		                            },
		                            attributes : {
		                                style : "text-align: center; white-space: nowrap;"
		                            },
		                            template : '<span title="${integrationId}">#=$.main.fn_replaceNull(integrationId)#</span>',
		                            filterable: { multi: true, search: true }
		                        }, 
		                        {
		                        	field : "interfaceId",
		                        	hidden : true
		                        },
		                        {
		                            field : "errorMsg",
		                            title : mint.label.getLabel('lb-463') + " " + mint.label.getLabel('lb-462'),
		                            width : "40%",
		                            headerAttributes : {
		                                style : "text-align: center"
		                            },
		                            attributes : {
		                                style : "text-align: left; white-space: nowrap;"
		                            },
		                            template : '<span title="${errorMsg}">#=$.main.fn_replaceNull(errorMsg)#</span>',
		                            filterable: { multi: true, search: true }
		                        }, 
		                        {
		                        	field : "seq",
		                        	hidden : true
		                        }, 
		                        {
		                            field : "startDate",
		                            title : mint.label.getLabel('lb-50'),
		                            //width : "150px",
		                            width : "13%",
		                            template : '<span title="${startDate}">#=$.main.fn_changeTime(startDate)#</span>',
		                            headerAttributes : {
		                                style : "text-align: center"
		                            },
		                            attributes : {
		                                style : "text-align: center; white-space: nowrap;"
		                            },
		                            filterable: false
		                        }, 
		                        {
		                            field : "statusNm",
		                            title : mint.label.getLabel('lb-473'),
		                            //width : "70px",
		                            width : "5%",
		                            headerAttributes : {
		                                style : "text-align: center"
		                            },
		                            attributes : {
		                                style : "text-align: center; white-space: nowrap;"
		                            },
		                            template : '<span title="${statusNm}">${statusNm}</span>',
		                            filterable: false
		                        },
								{ field : "key1", hidden : true },
								{ field : "key2", hidden : true },
								{ field : "key3", hidden : true }
                        ],
                        dataBound: function (e) {
							
							if(1 > $("#non-reg-error-grid").data().kendoGrid.dataSource.view().length) {
								var gridHeight = window.innerHeight - ($('.navbar-static-top').height() + $('.page-heading').height() + $('.col-lg-12').height());
								
								$("#non-reg-error-grid").children(".k-grid-content").height(gridHeight / 2.5);
								//$("#non-reg-error-grid").children(".k-grid-content-locked").height(gridHeight / 2.5);
							} else {
								$("#non-reg-error-grid").children(".k-grid-content").height('auto');
								//$("#non-reg-error-grid").children(".k-grid-content-locked").height('auto');
							}
						}
                    });
                } catch ( e ) {
                    mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main.fn_init_OP0302003_Grid"});
                }
            }, // end fn_init_OP0302003_Grid
            
            fn_checkNoRegProblemGridRow : function(rowObj) {
            	try {
            		
            		var grid = $("#non-reg-error-grid").data("kendoGrid");
            		var row = $(rowObj).closest("tr"); 
            		var checkedDataItem = grid.dataItem(row);
            		
            		//console.log(checkedDataItem);
            		//console.log(rowObj.checked);
            		$.main.noRegProblemList[checkedDataItem.interfaceId + "-" + checkedDataItem.seq + "-" + checkedDataItem.startDate] = {
            				checked: rowObj.checked,
            				dataItem: {
            					channelNm : checkedDataItem.channelNm,
            					interfaceId : checkedDataItem.interfaceId,
            					integrationId : checkedDataItem.integrationId,
            					interfaceNm : checkedDataItem.interfaceNm,
            					seq : checkedDataItem.seq,
            					startDate : checkedDataItem.startDate,
            					errorMsg : checkedDataItem.errorMsg,
            					statusNm : checkedDataItem.statusNm
            				}
            		};
            		
            		//console.log($.main.noRegProblemList[checkedDataItem.interfaceId + "-" + checkedDataItem.seq + "-" + checkedDataItem.startDate]);
            		
            		if (rowObj.checked) {
				        //-select the row
				        row.addClass("k-state-selected");
				    } else {
				        //-remove selection
				        row.removeClass("k-state-selected");
				    }
            	}
            	catch(e) {
            		mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main.fn_checkNoRegProblemGridRow"});
            	}
            },
            
            fn_set_OP0302003_GridData : function(jsonData) {
            	try {
            		// 초기화
            		$.main.noRegProblemList = [];
            		$("#op0302003-list-checkbox-checkAll").prop("checked", false);
            		
            		var gridData = $.main.fn_get_OP0302003_GridData_custom(jsonData);
            		//console.log(gridData);
            		var dataSource = new kendo.data.DataSource({
						  data: gridData
					    , page:1
					    , pageSize: mint.ui.getPageSizesL({'currentPage' : true})
					});
					
					//데이터 재설정
					$("#non-reg-error-grid").data("kendoGrid").setDataSource(dataSource);
					
					/* 
					// 미등록 장애 인터페이스 정보 저장
					// 변수 초기화
					$.main.noRegProblemList = [];
					{
						var grid = $("#non-reg-error-grid").data("kendoGrid");
						var dataItemList = grid.dataSource.view();
						
						//var tmpNoRegProblemList = [];
						for (var i=0; i<dataItemList.length; i++) {
							//tmpNoRegProblemList[dataItemList[i].uid] = {
							$.main.noRegProblemList[dataItemList[i].uid] = {
		       						checked : false,
		       						dataItem : {
		       							//systemId : dataItemList[i].systemId,
		       							//systemNm : dataItemList[i].systemNm,
		       	            			interfaceId : dataItemList[i].interfaceId,
		       	            			interfaceNm : dataItemList[i].interfaceNm,
		       	            			seq : dataItemList[i].seq,
		       	            			startDate : dataItemList[i].startDate,
		       	            			statusNm : dataItemList[i].statusNm,
										uid : dataItemList[i].uid
		       						}
		        			};
							
						}
					}
					*/
					
					/* 
					var result = [];
					for(var x in $.main.noRegProblemList) {
						if (Object.prototype.hasOwnProperty.call($.main.noRegProblemList, x)) {
							result.push($.main.noRegProblemList[x]);
						}
					}
					 
					console.log(result);
					*/
            	}
            	catch(e) {
            		mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main.fn_set_OP0302003_GridData"});
            	}
            	
            },
            
            fn_get_OP0302003_GridData_custom : function (jsonData) {
            	try {
            		var gridData = [];
						
					var noRegProblemData = {};
            		for (var i in jsonData) {
            			
            			noRegProblemData = {};
            			
            			//noRegProblemData.systemId = jsonData[i].systemId;
            			//noRegProblemData.systemNm = jsonData[i].systemNm;
            			noRegProblemData.channelNm = jsonData[i].channelNm;
            			noRegProblemData.interfaceId = jsonData[i].interfaceId;
            			noRegProblemData.integrationId = jsonData[i].integrationId;
            			noRegProblemData.interfaceNm = jsonData[i].interfaceNm;
            			noRegProblemData.seq = jsonData[i].seq;
            			noRegProblemData.startDate = jsonData[i].startDate;
            			noRegProblemData.errorMsg = jsonData[i].errorMsg;
            			noRegProblemData.statusNm = jsonData[i].statusNm;
            			noRegProblemData.key1     = jsonData[i].key1;
            			noRegProblemData.key2     = jsonData[i].key2;
            			noRegProblemData.key3     = jsonData[i].key3;
            			
            			noRegProblemData.nodeName = jsonData[i].nodeName;
            			if (jsonData[i].systemCd != '') {
            				if( mint.common.isEmpty( $('#tf-systemId_hidden').val() ) ) {
            					noRegProblemData.nodeName = "";
            				} else {
            					noRegProblemData.nodeName = jsonData[i].systemNm + "(" + jsonData[i].systemCd + ")";
            				}
            			}            			
            			
            			gridData.push(noRegProblemData);

            			
            			// 미등록 장애 인터페이스 정보 저장
            			$.main.noRegProblemList = []; // 초기화
            			$.main.noRegProblemList[noRegProblemData.interfaceId + "-" + noRegProblemData.seq + "-" + noRegProblemData.startDate] = {
            					 checked : false,
            					 dataItem : noRegProblemData
            			};
            		}
            		
            		return gridData;
            	}
            	catch(e) {
            		mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main.fn_get_OP0302003_GridData_custom"});
            	}
            },
            
            //-----------------------------------------------------------------------
            // Description :: 데이터 조회
            //-----------------------------------------------------------------------
            fn_getData : function() {
                try{
                    mint.callService($.main.fn_getRequestObject(), screenName, 'REST-R12-OP-03-02', '$.main.fn_set_OP0302003_GridData', {errorCall : true });
                } catch( e ) {
                    mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main.fn_getData"});                  
                }
                
            },
            
            //-----------------------------------------------------------------------
            // Description :: request object 생성
            //-----------------------------------------------------------------------
            fn_getRequestObject : function() {
                try{
                    var searchObject = new Object();
                    
                    searchObject.channelId     = $('#cb-channelId').val();
					searchObject.systemId      = $('#tf-systemId_hidden').val(); //IFM 상의 시스템 정보이므로, 시스템이름을 시스템아이디에 맵핑 한다.
                    searchObject.integrationId = $('#cb-integrationId').val();
                    searchObject.interfaceNm   = $('#cb-interfaceNm').val();
                    searchObject.startDate     = mint.common.replaceAll(mint.common.replaceAll($("#startDate").val() + "0000" + "00000", "/", ""), ":", "");
                    searchObject.endDate       = mint.common.replaceAll(mint.common.replaceAll($("#endDate").val() + "2359" + "59999", "/", ""), ":", "");
                    searchObject.searchMode    = "DEFAULT";
                    searchObject.errorMsg      = $('#tf-errorMsg').val();
                    searchObject.isRelUser 	   = $('input[name=rd-search-range]:checked').val();

					
                    //searchObject.systemId = $("#error-system").val().replace(/\s/g,'');
                    //searchObject.interfaceId = ($("#cb-interfaceNm").val().replace(/\s/g,'') == "")?$("#cb-integrationId").val().replace(/\s/g,''):$("#cb-interfaceNm").val().replace(/\s/g,'');
                    //searchObject.integrationId = ($("#cb-interfaceNm").val().replace(/\s/g,'') == "")?$("#cb-integrationId").val().replace(/\s/g,''):$("#cb-interfaceNm").val().replace(/\s/g,'');
                    
                    return searchObject;
                } catch( e ) {
                    mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main.fn_getRequestObject"});                  
                }
            },
            
            //-----------------------------------------------------------------------
            // Description :: 그리드 시간 설정
            //-----------------------------------------------------------------------
            fn_changeTime : function(val) {
                try {
                    if(val != null && val != "") {
                        var str = val.substring(0, 14);
                        var returnVal = str.substring(0, 4) + "-" + str.substring(4, 6) + "-" + str.substring(6, 8) + " " + str.substring(8, 10) + ":" + str.substring(10, 12) + ":" + str.substring(12, 14);
                        return returnVal;
                    } else {
                    	return "";
                    }
                } catch( e ) {
                    mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main.fn_changeTime"});
                }
            },
            
            //-----------------------------------------------------------------------
            // Description :: 데이터 없을 경우 ""으로 변경
            //-----------------------------------------------------------------------
            fn_replaceNull : function(str) {
                try {
                    if('undefined' == typeof str || str == null) {
                        return "";
                    } else {
                        return str;
                    }
                } catch( e ) {
                    mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main.fn_replaceNull"});
                }
            },
            /* 
            //-----------------------------------------------------------------------
            // Description :: 그리드에 선택시 데이터 세팅
            //-----------------------------------------------------------------------
            fn_setGridData : function() {
            	try {
            		var grid = $("#problemGrid").data("kendoGrid");
                    var selectedItem = grid.dataItem(grid.select());
                    
                    $.main.problemId = selectedItem.problemId;
                    $.main.channelId = selectedItem.channelId;
            	} catch( e ) {
            	    mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main.fn_setGridData"});
            	}
            },
             */
            //-----------------------------------------------------------------------
            // Description :: interfaceNm 콤보 세팅
            //-----------------------------------------------------------------------
            fn_setComboboxInterfaceNm : function(jsonData) {
            	try {
            		$("#cb-interfaceNm").kendoComboBox({
                        dataTextField: "interfaceNm",
                        //dataValueField: "interfaceId",
                        dataValueField: "integrationId",
                        autoBind: false,
                        dataSource: jsonData,
                        filter: "contains",
                        highlightFirst: false,
                        suggest: false,
                        index: '',
                        height:300,
                        enable : true,
                        select : $.main.fn_onSelectInterfaceNm
                    });
            		
            		$("#cb-interfaceNm").data("kendoComboBox").input.keydown($.main.fn_onKeyDownOP0302003);
            		
            	} catch( e ) {
            	    mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main.fn_setComboboxInterfaceNm"});
            	}
            },
            
          	//-----------------------------------------------------------------------
            // Description :: interfaceId 콤보 세팅
            //-----------------------------------------------------------------------
            fn_setComboboxInterfaceId : function(jsonData) {
            	try {
            		$("#cb-integrationId").kendoComboBox({
                        //dataTextField: "interfaceId",
                        //dataValueField: "interfaceId",
                        dataTextField: "integrationId",
                        dataValueField: "integrationId",
                        autoBind: false,
                        dataSource: jsonData,
                        filter: "contains",
                        highlightFirst: false,
                        suggest: false,
                        index: '',
                        height:300,
                        enable : true,
                        select : $.main.fn_onSelectInterfaceId
                    });
            		
            		$("#cb-integrationId").data("kendoComboBox").input.keydown($.main.fn_onKeyDownOP0302003);
            		
            	} catch( e ) {
            	    mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main.fn_setComboboxInterfaceId"});
            	}
            },
            
            //-----------------------------------------------------------------------
            // Description :: system 콤보 세팅
            //-----------------------------------------------------------------------
            fn_setComboboxSystem : function(jsonData) {
            	try {
            		$("#error-system").kendoComboBox({
                        dataTextField: "systemNm",
                        dataValueField: "systemId",
                        autoBind: false,
                        dataSource: jsonData,
                        filter: "contains",
                        highlightFirst: false,
                        suggest: false,
                        index: '',
                        height:300,
                        enable : true,
                        select : $.main.fn_onSelectSystem
                    });
            		
            		$("#error-system").data("kendoComboBox").input.keydown($.main.fn_onKeyDownOP0302003);
            		
            	} catch( e ) {
            	    mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main.fn_setComboboxSystem"});
            	}
            },
            
            //-----------------------------------------------------------------------
            // Description :: interfaceNm combo 선택 시 event 함수
            //-----------------------------------------------------------------------
            fn_onSelectInterfaceNm : function(e) {
            	try {
            		$.main.fn_setSearchNode('interfaceNm', 'combo');
                    
                    var dataItem = this.dataItem(e.item.index());
                    
                    //$.main.fn_getSearchInfo('interfaceNm', dataItem.interfaceId);
                    $.main.fn_getSearchInfo('interfaceNm', dataItem.integrationId);
                    
            	} catch( e ) {
            	    mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main.fn_onSelectInterfaceNm"});
            	}
            },

          	//-----------------------------------------------------------------------
            // Description :: interfaceId combo 선택 시 event 함수
            //-----------------------------------------------------------------------
            fn_onSelectInterfaceId : function(e) {
            	try {
            		$.main.fn_setSearchNode('interfaceId', 'combo');
                    
                    var dataItem = this.dataItem(e.item.index());
                    
                    //$.main.fn_getSearchInfo('interfaceId', dataItem.interfaceId);
                    $.main.fn_getSearchInfo('interfaceId', dataItem.integrationId);
                    
            	} catch( e ) {
            	    mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main.fn_onSelectInterfaceId"});
            	}
            },
            
            //-----------------------------------------------------------------------
            // Description :: system combo 선택 시 event 함수
            //-----------------------------------------------------------------------
            fn_onSelectSystem : function(e) {
            	try {
            		$.main.fn_setSearchNode('error-system', 'combo');
                    
                    var dataItem = this.dataItem(e.item.index());
                    
                    $.main.fn_getSearchInfo('system', dataItem.systemId);
                    
            	} catch( e ) {
            	    mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main.fn_onSelectSystem"});
            	}
            },
            
            //-----------------------------------------------------------------------
            // Description :: searchNode 초기화 함수
            //-----------------------------------------------------------------------
            fn_initSearchNode : function() {
            	try {
            		$.main.searchNode = new Object();
                    
                    $.main.searchNode.previous = null;
                    $.main.searchNode.current = null;
                    $.main.searchNode.previousType = null;
                    $.main.searchNode.currentType = null;                    
            	} catch( e ) {
            	    mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main.fn_initSearchNode"});
            	}
            },
            
            //-----------------------------------------------------------------------
            // Description :: searchNode 데이터 세팅
            //-----------------------------------------------------------------------
            fn_setSearchNode : function(currentId, type) {
            	try {
            		if($.main.searchNode.current != currentId) {
                        $.main.searchNode.previous = $.main.searchNode.current;
                        $.main.searchNode.previousType = $.main.searchNode.currentType;
                        
                        $.main.searchNode.current = currentId;
                        $.main.searchNode.currentType = type;
                        
                        if($.main.searchNode.previousType == 'combo') {
                        	if($.main.searchNode.previous != null) {
                                //$("#" + $.main.searchNode.previous).kendoComboBox({ enable: false });
                                var combobox = $("#" + $.main.searchNode.previous).data("kendoComboBox");
                                combobox.enable(false);
                            }
                        } else {
                        	if( ! mint.common.isEmpty( $.main.searchNode ) && ! mint.common.isEmpty( $.main.searchNode.previous ) ) {	                        	
	                        	$("#" + $.main.searchNode.previous).prop("disabled", true);
	                        	$("#" + $.main.searchNode.previous).css("background-color", "#F9F8F8");
                        	}
                        }
            		}
            	} catch( e ) {
            	    mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main.fn_setSearchNode"});
            	}
            },
            
            //-----------------------------------------------------------------------
            // Description :: 검색 조건 조회 
            //-----------------------------------------------------------------------
            fn_getSearchInfo : function(flag, data) {
            	try {
            		mint.callService($.main.fn_getSearchObject(flag, data), screenName, 'REST-R02-CO-02-00-000', '$.main.fn_setSearchInfo', {errorCall : true });
            	} catch( e ) {
            	    mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main.fn_getSearchInfo"});
            	}
            },
            
            //-----------------------------------------------------------------------
            // Description :: 검색 조건 조회 request object 세팅
            //-----------------------------------------------------------------------
            fn_getSearchObject : function(flag, data) {
            	try {
            		var searchObject = new Object();
                    
                    if(flag == 'interfaceNm') {
                    	searchObject.interfaceNm = data;
                    	
                    	if($("#cb-channelId").val() != null && $("#cb-channelId").val() != "") {
                    	    searchObject.channelId = $("#cb-channelId").val();
                    	}
                    	
                    	if($("#cb-integrationId").val() != null && $("#cb-integrationId").val() != "") {
	                        searchObject.integrationId = $("#cb-integrationId").val();
                        }
                    	
                        if($("#tf-systemNm_hidden").val() != null && $("#tf-systemNm_hidden").val() != "") {
                            searchObject.systemNm = $("#tf-systemNm_hidden").val();
                        }                    	
                    }
                    
                    if(flag == 'integrationId') {
                    	searchObject.integrationId = data;
                    	
                    	if($("#cb-channelId").val() != null && $("#cb-channelId").val() != "") {
                    	    searchObject.channelId = $("#cb-channelId").val();
                    	}
                    	
                        if($("#cb-interfaceNm").val() != null && $("#cb-interfaceNm").val() != "") {
                        	searchObject.interfaceNm = $("#cb-interfaceNm").val();
                        }
                        
                        if($("#tf-systemNm_hidden").val() != null && $("#tf-systemNm_hidden").val() != "") {
                            searchObject.systemNm = $("#tf-systemNm_hidden").val();
                        }                        
                    }
                    
                    if(flag == 'systemNm') {
                        searchObject.systemNm = data;
                        
                    	if($("#cb-channelId").val() != null && $("#cb-channelId").val() != "") {
                    	    searchObject.channelId = $("#cb-channelId").val();
                    	}
                    	
                    	if($("#cb-integrationId").val() != null && $("#cb-integrationId").val() != "") {
	                        searchObject.integrationId = $("#cb-integrationId").val();
                        }
                    	
                        if($("#cb-interfaceNm").val() != null && $("#cb-interfaceNm").val() != "") {
                        	searchObject.interfaceNm = $("#cb-interfaceNm").val();
                        }                    	
                    }
                    
                    if(flag == 'channel') {
                        searchObject.channelId = data;
                        
                        if($("#cb-interfaceNm").val() != null && $("#cb-interfaceNm").val() != "") {
                        	searchObject.interfaceNm = $("#cb-interfaceNm").val();
                        }
                        
                        if($("#cb-integrationId").val() != null && $("#cb-integrationId").val() != "") {
                        	searchObject.integrationId = $("#cb-integrationId").val();
                        }
                        
                        if($("#tf-systemNm_hidden").val() != null && $("#tf-systemNm_hidden").val() != "") {
                            searchObject.systemNm = $("#tf-systemNm_hidden").val();
                        }	                        

                    }  
                    
                    //searchObject.userId = mint.session.getUserId();
                    
                    return searchObject;
            	} catch( e ) {
            	    mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main.fn_getSearchObject"});
            	}
            },
            
            //-----------------------------------------------------------------------
            // Description :: 검색 조건 세팅
            //-----------------------------------------------------------------------
            fn_setSearchInfo : function(jsonData) {
            	try {
            		if(jsonData != null) {
                        
                    	if($("#cb-channelId").val() == "" && jsonData.channelList  != null) {
                        	mint.ui.setComboBoxWithValue('cb-channelId', jsonData.channelList, 0, 'channelNm', 'channelId');
                        }            			
            			
                        if($("#cb-interfaceNm").val() == "" && jsonData.interfaceCdList != null) {
                            mint.ui.setComboBoxWithValue('cb-interfaceNm', jsonData.interfaceCdList, 0, 'interfaceNm', 'interfaceNm'); 
                        }
                        
                        if($("#cb-integrationId").val() == "" && jsonData.interfaceCdList != null) {
                            mint.ui.setComboBoxWithValue('cb-integrationId', jsonData.interfaceCdList, 0, 'integrationId', 'integrationId');
                        }
                        
                    	if($("#tf-systemNm_hidden").val() == "" && jsonData.systemCdList  != null) {
	                    	srchSystemData = jsonData.systemCdList;
                        }                           
                        
                    	/*
                        if($("#error-system").val() == "" && jsonData.systemCdList  != null) {
                            $.main.fn_setComboboxSystem(jsonData.systemCdList);
                        }
                    	*/
                    }
            	} catch( e ) {
            	    mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main.fn_setSearchInfo"});
            	}
            },
            
            //-----------------------------------------------------------------------
            // Description :: 검색 조건 초기화 함수
            //-----------------------------------------------------------------------
            fn_clearSearchArea : function() {
            	try {
                    //전사솔루션 초기화
                    var combobox = $("#cb-channelId").data("kendoComboBox");
                    combobox.enable(true);
                    combobox.value('');
                    mint.ui.setComboBoxWithValue('cb-channelId', mint.common.commonCodeMap.get("channelList"), 0, 'channelNm', 'channelId');            		
            		
            		//interfaceNm 초기화
            		var combobox = $("#cb-interfaceNm").data("kendoComboBox");
                    combobox.enable(true);
                    combobox.value("");
                    mint.ui.setComboBoxWithValue('cb-interfaceNm', mint.common.commonCodeMap.get("interfaceCdList"), 0, 'interfaceNm', 'interfaceNm'); 
                    
                  	//interfaceId 초기화
            		var combobox = $("#cb-integrationId").data("kendoComboBox");
                    combobox.enable(true);
                    combobox.value("");
                    mint.ui.setComboBoxWithValue('cb-integrationId', mint.common.commonCodeMap.get("interfaceCdList"), 0, 'integrationId', 'integrationId');
                    
                    //system 초기화
                    $('#tf-systemNm').val('');
					$('#tf-systemNm_hidden').val('');
					$('#tf-systemId_hidden').val('');
					$('#tf-systemNm').prop("disabled", false);
					$('#tf-systemNm').css("background-color", "#FFFFFF");   
					
					
					
					$('#tf-errorMsg').val('');
                    
                    
                    /*
                    combobox = $("#error-system").data("kendoComboBox");
                    combobox.enable(true);
                    combobox.value("");
                    $.main.fn_setComboboxSystem(mint.common.commonCodeMap.get("systemCdList"));
                    */
                    //오류/장애 유형 초기화
                    //$("#problemType").val("");
                    //$("#classCd").val("");
                    
                    //상태 초기화
                    //combobox = $("#status").data("kendoComboBox");
                    //combobox.value("");
                    
                    //검색기간 초기화
                    $("#startDate").data("kendoDatePicker").value(new Date());
                    $("#endDate").data("kendoDatePicker").value(new Date());
                    
                    //$("#startDateTime").data("kendoTimePicker").value("00:00");
                    //$("#endDateTime").data("kendoTimePicker").value("23:59");
                    
                    $.main.fn_initSearchNode();
                    
            	} catch( e ) {
            	    mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main.fn_clearSearchArea"});
            	}
            },
            
            fn_isArrayValue : function(channelId) {
            	var arr = mint.session.getChannelIdList();
            	
            	for(var i = 0; i < arr.length; i++) {
            		if(channelId == arr[i]) {
            			return true;
            		}
            	}
            	
            	return false;
            },
            
          	//-----------------------------------------------------------------------
			// Description :: 엔터키 이벤트
			//-----------------------------------------------------------------------
			fn_onKeyDownOP0302003 : function(event) {
				try {
					if(event.keyCode == 13) {
						$.main.fn_getData();
					}
				}
				catch(e) {
					mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main.fn_onKeyDownOP0302003"});
				}
			}, // end fn_onKeyDownOP0302003
			
			//-----------------------------------------------------------------------
			// Description :: System 리턴 값
			//-----------------------------------------------------------------------
			fn_returnSystemPopupData : function(rtnSystemData) {
				try {
					if( mint.common.isEmpty(rtnSystemData) ) {
						$('#tf-systemNm').val('');
						$('#tf-systemNm_hidden').val('');
						$('#tf-systemId_hidden').val('');
					} else {
						$('#tf-systemNm').val(rtnSystemData.systemNm + '(' + rtnSystemData.systemCd + ')');
						$('#tf-systemNm_hidden').val(rtnSystemData.systemNm);
						$('#tf-systemId_hidden').val(rtnSystemData.systemId);
						
						$.main.fn_setSearchNode('tf-systemNm', 'input');
                        $.main.fn_getSearchInfo('systemNm', rtnSystemData.systemNm);
					}
				} catch( e ) {
					mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main.fn_returnSystemPopupData"});
				}
			},//end fn_returnSystemPopupData()
			
			//-----------------------------------------------------------------------
            // Description :: Tracking 상세 페이지 호출
            //-----------------------------------------------------------------------
            fn_moveTrackingDetail : function() {
                try {
                    var entityGrid = $("#non-reg-error-grid").data("kendoGrid");
                    var selectedItem = entityGrid.dataItem(entityGrid.select());
                    console.log(selectedItem);
                    if ( mint.common.isEmpty(selectedItem.interfaceId) ) {
                        mint.common.alert('BW00009', null);
                    } else {
                        
                        //masterlog_id
                        logKey1 = selectedItem.key1;

                        //msg_datetime
                        logKey2 = selectedItem.key2;

                        //interface_id
                        interfaceId = selectedItem.interfaceId;
                        
                        if( !mint.common.isEmpty(logKey1) && !mint.common.isEmpty(logKey2) && !mint.common.isEmpty(interfaceId) ) {
                        
	                        //트래킹 상세 - 팝업
	                        $.ajax({
	                            url : "../sub-co/CO-01-00-009.html",
	                            success : function(data) {
	                                $("#interfaceTrackingModal").html('');
	                                $("#interfaceTrackingModal").html(data);
	    
	                                $('#trackingDetail').modal({
	                                    backdrop : 'static'
	                                });
	                            }
	                        });
                        }
                    }
                    
                } catch( e ) {
                    mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "$.main.fn_moveRequirementDetail"});
                }
            },//end fn_moveRequirementDetail()			
			
        }
    });
    
    
    //=======================================================================
    // (4) 이벤트 핸들러 정의
    //=======================================================================
        
    $('.btn-search').on('click', function() {
        $.main.fn_getData();
    });
    
	//-----------------------------------------------------------------------
	// 미조치 그리드 더블 클릭
	//-----------------------------------------------------------------------
	$('#non-reg-error-grid').on('dblclick', "tr.k-state-selected", function () {
		
		try {
			// Tracking Detail Call
			$.main.fn_moveTrackingDetail();
		}
		catch(e) {
			mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "non-reg-error-grid.dblclick"});
		}
		
	});
	
	$(".btn-dashboard").bind("click", function () {
		try {
			//btn-dashboard;
			//mint.ui.smoothlyMenu();			
			mint.move('../sub-op/OP-02-00-001');
		}
		catch(e) {
			mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "btn-dashboard.click"});
		}
	});  	
	
    /* 
    //오류/장애 유형 검색 - 팝업
    $('.problemType').on('click', function() {
        $.ajax({
            url : "../sub-co/CO-01-00-011.html",
            success : function(data) {
                $("#infoDialogModal").html('');
                $("#infoDialogModal").html(data);

                $('#pop_problem').modal({
                    backdrop : 'static'
                });
            }
        });
    });
     */
    //-----------------------------------------------------------------------
    // Description :: 등록 버튼 클릭 이벤트
    //-----------------------------------------------------------------------
    // - 수정(2015/10/15), dhkim
    //   (1) move 함수에서 back 함수로 변경함으로써 조회 화면 이동시 초기화 되는 문제 조치 
    //-----------------------------------------------------------------------
    $('.btn-write').on('click', function() {
    	try {
    		
    		var isSelectable = false;
    		// 오류/장애 목록 선택 여부 체크
    		{
	    		var result = [];
				for(var x in $.main.noRegProblemList) {
					if (Object.prototype.hasOwnProperty.call($.main.noRegProblemList, x)) {
						result.push($.main.noRegProblemList[x]);
					}
				}
				
				
				for(var i in result) {
					//console.log(result[i].checked);
					if (result[i].checked) {
						isSelectable = true;
						break;
					}
				}
    		}
    		
    		if (isSelectable) {
	    		
	    		$.main.updateCheck = false;
	            
	            {
	    	        mint.common.setScreenParam("updateCheck", $.main.updateCheck);
	    	    	mint.common.setScreenParam("problemId", $.main.problemId);
	    	    	mint.common.setScreenParam("channelId", $.main.channelId);
	    	    	mint.common.setScreenParam("isApproval", $.main.isApproval);
	            }
	            mint.setDetailView('Y');
	            mint.move('../sub-op/OP-03-02-002');
    		}
    		else {
    			mint.common.alert('BW00044', null);
    		}
            
    	}
    	catch(e) {
    		mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "btn-write.click"});
    	}
    });
    
    $('.btn-clear').on('click', function() {
    	try {
    		$.main.fn_clearSearchArea();
    	}
    	catch(e) {
    		mint.common.errorLog(e, {"screenName" : screenName, "fnName" : "btn-clear.click"});
    	}
    });
     
 	//-----------------------------------------------------------------------
 	// Description :: 전사솔루션 변경시 event 함수
 	//-----------------------------------------------------------------------
 	$('#cb-channelId').change(function(e) {
 		$.main.fn_setSearchNode('cb-channelId', 'combo');
         
 		var dataItem = $('#cb-channelId').data("kendoComboBox").dataItem();
         
 		if('undefined' != typeof dataItem) {
 			$.main.fn_getSearchInfo('channel', dataItem.channelId);
 		}
 	});
 	
 	//-----------------------------------------------------------------------
 	// Description :: 인터페이스명 변경시 event 함수
 	//-----------------------------------------------------------------------
 	$('#cb-interfaceNm').change(function(e) {
 		$.main.fn_setSearchNode('cb-interfaceNm', 'combo');
 		$.main.fn_getSearchInfo('interfaceNm', $("#cb-interfaceNm").data("kendoComboBox").value());
 	});
 	
 	//-----------------------------------------------------------------------
 	// Description :: 인터페이스ID 변경시 event 함수
 	//-----------------------------------------------------------------------
 	$('#cb-integrationId').change(function(e) {
 		$.main.fn_setSearchNode('cb-integrationId', 'combo');
 		$.main.fn_getSearchInfo('integrationId', $("#cb-integrationId").data("kendoComboBox").value());
 	});     

 	//-----------------------------------------------------------------------
 	// Description :: 시스템명 변경시 event 함수
 	//-----------------------------------------------------------------------
 	$('#tf-systemNm').on('click', function () {
 		//팝업에 필요한 div 를 동적으로 생성하도록 한다.
 		var attachDiv = 'attachSystemSearchPop';
 		$('#' + attachDiv).remove();
 		$('#page-wrapper').append($('<div id="' + attachDiv + '"></div>'));
 		
 		$.ajax({
      		url: "../sub-co/CO-01-00-901.html",
      		success:function(data){
      			$('#' + attachDiv).html('');
          		$('#' + attachDiv).html(data);
          		
          		$('#pop_system_search').modal({
     				backdrop: 'static'
     			}).on('hidden.bs.modal', function(event) {
     				$('#' + attachDiv).html('');
     			});
      		}
  		});
 	});	
     
    //=======================================================================
    // (5) 기타 Function 정의
    //=======================================================================
    
    
    //=======================================================================
    // (6) 화면 로딩시 실행할 항목 기술
    //=======================================================================       
    $.main.fn_init();
    mint.label.attachLabel(null);
    

  	//=======================================================================
    // (4) 이벤트 핸들러 정의 - 예외 : 화면 초기화 후에 설정해야 하는 이벤트  
    //=======================================================================
	//-----------------------------------------------------------------------
 	// Description :: No Reged Problem Grid CheckBox Click 이벤트 설정
 	//-----------------------------------------------------------------------
 	$("#op0302003-list-checkbox-checkAll").bind('click', function() {
		
 		// row별 checked 설정
 		var checked;
 		var row;
 		var grid = $("#non-reg-error-grid").data("kendoGrid");
 		var checkedDataItem;
 		$("input[name=op0302003-list-checkbox]:checkbox").each(function() {
 			checked = $("#op0302003-list-checkbox-checkAll").is(':checked');
 		    row = $(this).closest("tr"),
			checkedDataItem = grid.dataItem(row);

 			$(this).prop("checked", checked);
 			//console.log(checkedDataItem);
 			$.main.noRegProblemList[checkedDataItem.interfaceId + "-" + checkedDataItem.seq + "-" + checkedDataItem.startDate] = {
       				checked: checked,
       				dataItem: {
       					channelNm : checkedDataItem.channelNm,
       					interfaceId : checkedDataItem.interfaceId,
       					integrationId : checkedDataItem.integrationId,
       					interfaceNm : checkedDataItem.interfaceNm,
       					seq : checkedDataItem.seq,
       					startDate : checkedDataItem.startDate,
       					errorMsg : checkedDataItem.errorMsg,
       					statusNm : checkedDataItem.statusNm
       				}
        	};
 		    
 		    if (checked) {
 		        //-select the row
 		        row.addClass("k-state-selected");
 		    } else {
 		        //-remove selection
 		        row.removeClass("k-state-selected");
 		    }
 		});
 		
 	});
    
	$('#tf-errorMsg').keydown(function(event) {
		$.main.fn_onKeyDownOP0302003(event);
	});	    
	
	
});
</script>
